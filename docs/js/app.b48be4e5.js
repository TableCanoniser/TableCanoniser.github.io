(function(){var __webpack_modules__={35358:function(e,t,_){var n={"./af":22190,"./af.js":22190,"./ar":7218,"./ar-dz":85785,"./ar-dz.js":85785,"./ar-kw":29417,"./ar-kw.js":29417,"./ar-ly":56904,"./ar-ly.js":56904,"./ar-ma":98617,"./ar-ma.js":98617,"./ar-ps":91318,"./ar-ps.js":91318,"./ar-sa":82699,"./ar-sa.js":82699,"./ar-tn":36789,"./ar-tn.js":36789,"./ar.js":7218,"./az":23050,"./az.js":23050,"./be":8316,"./be.js":8316,"./bg":70310,"./bg.js":70310,"./bm":58884,"./bm.js":58884,"./bn":83469,"./bn-bd":46672,"./bn-bd.js":46672,"./bn.js":83469,"./bo":39118,"./bo.js":39118,"./br":13113,"./br.js":13113,"./bs":23626,"./bs.js":23626,"./ca":40921,"./ca.js":40921,"./cs":17799,"./cs.js":17799,"./cv":12828,"./cv.js":12828,"./cy":93521,"./cy.js":93521,"./da":56962,"./da.js":56962,"./de":93294,"./de-at":16158,"./de-at.js":16158,"./de-ch":95960,"./de-ch.js":95960,"./de.js":93294,"./dv":47963,"./dv.js":47963,"./el":3432,"./el.js":3432,"./en-au":20998,"./en-au.js":20998,"./en-ca":38312,"./en-ca.js":38312,"./en-gb":45930,"./en-gb.js":45930,"./en-ie":58081,"./en-ie.js":58081,"./en-il":71594,"./en-il.js":71594,"./en-in":23904,"./en-in.js":23904,"./en-nz":1507,"./en-nz.js":1507,"./en-sg":19409,"./en-sg.js":19409,"./eo":22177,"./eo.js":22177,"./es":84805,"./es-do":39155,"./es-do.js":39155,"./es-mx":69791,"./es-mx.js":69791,"./es-us":76098,"./es-us.js":76098,"./es.js":84805,"./et":96240,"./et.js":96240,"./eu":20391,"./eu.js":20391,"./fa":20612,"./fa.js":20612,"./fi":4220,"./fi.js":4220,"./fil":65570,"./fil.js":65570,"./fo":5466,"./fo.js":5466,"./fr":14461,"./fr-ca":66306,"./fr-ca.js":66306,"./fr-ch":27081,"./fr-ch.js":27081,"./fr.js":14461,"./fy":73484,"./fy.js":73484,"./ga":76957,"./ga.js":76957,"./gd":72978,"./gd.js":72978,"./gl":89866,"./gl.js":89866,"./gom-deva":65011,"./gom-deva.js":65011,"./gom-latn":84724,"./gom-latn.js":84724,"./gu":71601,"./gu.js":71601,"./he":79802,"./he.js":79802,"./hi":9358,"./hi.js":9358,"./hr":13907,"./hr.js":13907,"./hu":10218,"./hu.js":10218,"./hy-am":20533,"./hy-am.js":20533,"./id":52844,"./id.js":52844,"./is":97353,"./is.js":97353,"./it":6364,"./it-ch":20774,"./it-ch.js":20774,"./it.js":6364,"./ja":6008,"./ja.js":6008,"./jv":68221,"./jv.js":68221,"./ka":92417,"./ka.js":92417,"./kk":42071,"./kk.js":42071,"./km":76149,"./km.js":76149,"./kn":94572,"./kn.js":94572,"./ko":60659,"./ko.js":60659,"./ku":66285,"./ku-kmr":59398,"./ku-kmr.js":59398,"./ku.js":66285,"./ky":81609,"./ky.js":81609,"./lb":119,"./lb.js":119,"./lo":81748,"./lo.js":81748,"./lt":71973,"./lt.js":71973,"./lv":81347,"./lv.js":81347,"./me":53023,"./me.js":53023,"./mi":65747,"./mi.js":65747,"./mk":64341,"./mk.js":64341,"./ml":63840,"./ml.js":63840,"./mn":62058,"./mn.js":62058,"./mr":19182,"./mr.js":19182,"./ms":45197,"./ms-my":89136,"./ms-my.js":89136,"./ms.js":45197,"./mt":36408,"./mt.js":36408,"./my":51683,"./my.js":51683,"./nb":53141,"./nb.js":53141,"./ne":29344,"./ne.js":29344,"./nl":44703,"./nl-be":84641,"./nl-be.js":84641,"./nl.js":44703,"./nn":79873,"./nn.js":79873,"./oc-lnc":61217,"./oc-lnc.js":61217,"./pa-in":24612,"./pa-in.js":24612,"./pl":24457,"./pl.js":24457,"./pt":1089,"./pt-br":79146,"./pt-br.js":79146,"./pt.js":1089,"./ro":45950,"./ro.js":45950,"./ru":27292,"./ru.js":27292,"./sd":56774,"./sd.js":56774,"./se":87493,"./se.js":87493,"./si":3761,"./si.js":3761,"./sk":49711,"./sk.js":49711,"./sl":88558,"./sl.js":88558,"./sq":8633,"./sq.js":8633,"./sr":90688,"./sr-cyrl":47903,"./sr-cyrl.js":47903,"./sr.js":90688,"./ss":31991,"./ss.js":31991,"./sv":4639,"./sv.js":4639,"./sw":15891,"./sw.js":15891,"./ta":45714,"./ta.js":45714,"./te":30206,"./te.js":30206,"./tet":24768,"./tet.js":24768,"./tg":28276,"./tg.js":28276,"./th":57977,"./th.js":57977,"./tk":56928,"./tk.js":56928,"./tl-ph":8046,"./tl-ph.js":8046,"./tlh":41361,"./tlh.js":41361,"./tr":64367,"./tr.js":64367,"./tzl":10627,"./tzl.js":10627,"./tzm":12636,"./tzm-latn":98148,"./tzm-latn.js":98148,"./tzm.js":12636,"./ug-cn":68823,"./ug-cn.js":68823,"./uk":40461,"./uk.js":40461,"./ur":41366,"./ur.js":41366,"./uz":83454,"./uz-latn":18374,"./uz-latn.js":18374,"./uz.js":83454,"./vi":78572,"./vi.js":78572,"./x-pseudo":80464,"./x-pseudo.js":80464,"./yo":93709,"./yo.js":93709,"./zh-cn":65873,"./zh-cn.js":65873,"./zh-hk":17549,"./zh-hk.js":17549,"./zh-mo":52240,"./zh-mo.js":52240,"./zh-tw":90405,"./zh-tw.js":90405};function i(e){var t=s(e);return _(t)}function s(e){if(!_.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=35358},27098:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44114),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_url_search_params_delete_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14603),core_js_modules_web_url_search_params_delete_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_url_search_params_delete_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_web_url_search_params_has_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(47566),core_js_modules_web_url_search_params_has_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_web_url_search_params_has_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_url_search_params_size_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(98721),core_js_modules_web_url_search_params_size_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_url_search_params_size_js__WEBPACK_IMPORTED_MODULE_3__),vue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(56768),vue__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(24232),vue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(90144),_components_ColType_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(47802),_handsontable_vue3__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(30328),handsontable_dist_handsontable_full_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(19830),handsontable_registry__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(48355),handsontable__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(8153),_store_table__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(25719),xlsx__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(93230),ant_design_vue__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(17844),_utils_dragLayout__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(17727),_utils_lang__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(21971),_utils_minimap__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(48228);const _hoisted_1={class:"view"},_hoisted_2={class:"view-title"},_hoisted_3={class:"head-text"},_hoisted_4={style:{float:"right","margin-right":"10px"}},_hoisted_5={class:"view-content"},_hoisted_6={id:"output-tbl",style:{height:"calc(100% - 28px)",overflow:"hidden"}},_hoisted_7={class:"view"},_hoisted_8={class:"view-title"},_hoisted_9={style:{float:"right","margin-right":"10px"}},_hoisted_10={class:"view-content"},_hoisted_11={id:"output-tbl",style:{height:"calc(100% - 28px)",overflow:"hidden"}};__webpack_exports__.A=(0,vue__WEBPACK_IMPORTED_MODULE_11__.pM)({__name:"InOutTable",setup(__props){(0,handsontable_registry__WEBPACK_IMPORTED_MODULE_12__.um)();const tableStore=(0,_store_table__WEBPACK_IMPORTED_MODULE_7__.v)(),output_col=(0,vue__WEBPACK_IMPORTED_MODULE_13__.KR)(tableStore.output_tbl.cols),output_tbl=(0,vue__WEBPACK_IMPORTED_MODULE_13__.KR)(tableStore.output_tbl.tbl),input_tbl=(0,vue__WEBPACK_IMPORTED_MODULE_13__.KR)(tableStore.input_tbl.tbl);let inHotInst,outHotInst;function renderTblCell(e,t,_,n,i,s,a){handsontable__WEBPACK_IMPORTED_MODULE_14__.Ay.renderers.TextRenderer.apply(this,arguments),t.innerHTML=`<div class="truncated">${s}</div>`}function updateColInfoFn(e){if("input_tbl"===e){const e=tableStore.input_tbl.tbl;(0,_utils_minimap__WEBPACK_IMPORTED_MODULE_10__.W)(e.length,e[0].length,document.querySelector("svg.tbl-container"),tableStore),tableStore.optimizeMiniTempDistance(),tableStore.initTblInfo(!1),tableStore.output_tbl.colInfo=[],tableStore.spec.matchedInstNum=0}tableStore.computeColInfo(e)}function resetData(){tableStore.input_tbl.tbl=JSON.parse(JSON.stringify(tableStore.currentInitData)),tableStore.input_tbl.instance.updateData(tableStore.input_tbl.tbl),tableStore.input_tbl.instance.render(),updateColInfoFn("input_tbl")}const fileList=(0,vue__WEBPACK_IMPORTED_MODULE_13__.KR)([]);let fileTblData=[];const handleUpload=e=>{try{const t=new FileReader;t.onload=t=>{const _=t.target?.result,n=xlsx__WEBPACK_IMPORTED_MODULE_15__.LF(_,{type:"array"}),i=n.SheetNames[0],s=n.Sheets[i],a=xlsx__WEBPACK_IMPORTED_MODULE_15__.Wp.sheet_to_json(s,{header:1}),r=Math.max(...a.map((e=>e.length)));fileTblData=a.map((e=>{while(e.length<r)e.push(void 0);return e})),handlePreview(),e.onSuccess("ok")},t.readAsArrayBuffer(e.file)}catch(t){ant_design_vue__WEBPACK_IMPORTED_MODULE_16__.Ay.error(`${e.file.name} file uploaded failed.\n${t}`)}};let saveLastCase="";const handleRemove=()=>{tableStore.initTblInfo(),tableStore.transformTblUpdateRootArea(),tableStore.currentCase=saveLastCase||tableStore.caseList[0],saveLastCase="",tableStore.caseList.pop()},handlePreview=()=>{tableStore.initTblInfo(),tableStore.input_tbl.tbl=fileTblData,tableStore.input_tbl.instance.updateData(fileTblData),tableStore.input_tbl.instance.render(),tableStore.currentInitData=JSON.parse(JSON.stringify(fileTblData)),tableStore.transformTblUpdateRootArea(),tableStore.currentCase.startsWith("Custom")||(saveLastCase=tableStore.currentCase),tableStore.caseList.includes("Custom File")||tableStore.caseList.push("Custom File"),tableStore.currentCase="Custom File"};function arrayToCSV(e){return e.map((e=>e.map((e=>`${void 0===e?"":e}`)).join(","))).join("\n")}(0,vue__WEBPACK_IMPORTED_MODULE_11__.wB)((()=>tableStore.currentCase),(e=>{e.startsWith("Custom")?handlePreview():tableStore.loadCaseData(e)}));const handleDownload=()=>{if(0===tableStore.output_tbl.cols.length)return void ant_design_vue__WEBPACK_IMPORTED_MODULE_16__.Ay.warning("The output table is empty.");const e=arrayToCSV([tableStore.output_tbl.cols,...tableStore.output_tbl.tbl]),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(t),n=document.createElement("a");n.href=_,n.download="tidy table.csv",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(_),ant_design_vue__WEBPACK_IMPORTED_MODULE_16__.Ay.success("The output table has been downloaded successfully.")};function normalizeSelection(e){return e.map((([e,t,_,n])=>{e<0&&(e=0),t<0&&(t=0),_<0&&(_=0),n<0&&(n=0);const i=Math.min(e,_),s=Math.max(e,_),a=Math.min(t,n),r=Math.max(t,n);return[i,a,s,r]}))}function initEventsForTbl(tbl){let tblInst1,tblInst2;const tbl2="input_tbl"===tbl?"output_tbl":"input_tbl";"input_tbl"===tbl?(tblInst1=inHotInst,tblInst2=outHotInst):(tblInst1=outHotInst,tblInst2=inHotInst),tblInst1.updateSettings({outsideClickDeselects:e=>{const t=e?.className;return null!==e.closest(".goToInstance")?("cell"===document.body.style.cursor&&tableStore.clearStatus("matchArea"),!0):"wtHolder"===t||("string"!==typeof t?(tblInst2.updateSettings({cell:[]}),!0):(tblInst1===outHotInst&&["relative","rowHeader","current","truncated"].some((e=>t.split(" ").includes(e)))?"cell"!==document.body.style.cursor&&tblInst2.updateSettings({cell:[]}):(tableStore.clearStatus("matchArea"),tblInst2.updateSettings({cell:[]})),tableStore.highlightMinimapCells([]),tableStore.clearStatus("tree"),"input_tbl"===tbl&&(t.startsWith("mtk")||"view-line"===t||tableStore.editor.mappingSpec.decorations?.clear()),!0))}}),tblInst1.addHook("afterColumnResize",((e,t,_)=>{tableStore.computeColInfo(tbl)})),tblInst1.addHook("afterChange",((e,t)=>{e&&e.some((e=>e[2]!==e[3]))&&("input_tbl"===tbl&&(tableStore.initTblInfo(!1),tableStore.computeColInfo("output_tbl"),tableStore.spec.matchedInstNum=0),tableStore.computeColInfo(tbl))})),tblInst1.addHook("afterCreateRow",(()=>updateColInfoFn(tbl))),tblInst1.addHook("afterCreateCol",(()=>updateColInfoFn(tbl))),tblInst1.addHook("afterRemoveRow",(()=>updateColInfoFn(tbl))),tblInst1.addHook("afterRemoveCol",(()=>updateColInfoFn(tbl))),tblInst1.addHook("afterOnCellMouseDown",(e=>{tblInst2.updateSettings({cell:[]})})),tblInst1.addHook("afterOnCellMouseUp",((event,coords,TD)=>{const selected=normalizeSelection(tblInst1.getSelected()||[]),{selectedCoords:selectedCoords,hightedCells:hightedCells}=tableStore.getHightlightedCells(selected),cells=tableStore.in_out_mapping(selectedCoords,tbl);if(tableStore.highlightTblCells(tbl2,cells),"input_tbl"===tbl){if(tableStore.highlightMinimapCells(hightedCells),"cell"===document.body.style.cursor)if(tableStore.spec.selectAreaFromNode){tableStore.tree.instanceIndex=0,tableStore.updateVisTreeAreaBox();const selectType=tableStore.spec.selectAreaFromNode,visNode=tableStore.spec.selectNode.data,nx=visNode.x,ny=visNode.y,nw=visNode.width,nh=visNode.height,[startRow,startCol,endRow,endCol]=selected[0],offsetX=startCol-nx,offsetY=startRow-ny;if(selectType.startsWith("3")){const width=endCol-startCol+1,height=endRow-startRow+1,traverse=visNode.children&&visNode.children.length>0?{}:{xDirection:nw>=2*width?"after":void 0,yDirection:nh>=2*height?"after":void 0};let extract=null,extractColor="";const maxCNum=tableStore.findMaxCNumber()+1;switch(selectType){case"3-0":extract={byPositionToTargetCols:Array.from({length:width*height},((e,t)=>`C${maxCNum+t}`))},extractColor="positionShallow";break;case"3-1":extract={byContext:{position:"above"}},extractColor="contextShallow";break;case"3-2":const createExtract=()=>eval(`currentAreaTbl => {\n                  // Please replace the default code with the necessary implementation to complete the function.\n                  return currentAreaTbl.flat().map((cell, i) => 'C' + (${maxCNum} + i))\n                  }`);extract={byValue:createExtract()},extractColor="valueShallow";break;case"3-3":extract=void 0,extractColor="nullShallow";break}const childPattern={match:{startCell:{offsetX:offsetX,offsetY:offsetY},size:{width:width,height:height},traverse:traverse},extract:extract};tableStore.insertNodeOrPropertyIntoSpecs(childPattern,"children"),tableStore.editor.mappingSpec.highlightCode=[...tableStore.getHighlightCodeStartEndLine(childPattern),extractColor]}else if("1"===selectType){const e=inHotInst.getDataAtCell(startRow,startCol),t={offsetFrom:"topLeft",offsetX:offsetX,offsetY:offsetY,valueCstr:tableStore.getCellDataType(e)};tableStore.insertNodeOrPropertyIntoSpecs(t,"constraints"),tableStore.editor.mappingSpec.highlightCode=[...tableStore.getHighlightCodeStartEndLine(t,tableStore.getNodebyPath(tableStore.spec.rawSpecs,visNode.path)),"selectionShallow"]}tableStore.spec.selectAreaFromNode="",tableStore.clearStatus("matchArea")}else if(tableStore.spec.selectAreaFromLegend.length){inHotInst.updateSettings({cell:[]});const e=tableStore.spec.selectAreaFromLegend;tableStore.spec.selectionsAreaFromLegend.push(selected[0]),tableStore.spec.selectionsPath.push([]),e.length<tableStore.spec.selectionsAreaFromLegend.length&&e.push(e[e.length-1]);const t=tableStore.generateHighlightCells(tableStore.spec.selectionsAreaFromLegend,e);tableStore.highlightTblCells(tbl,t);const{specs:_,newSpec:n}=tableStore.buildTree(tableStore.spec.selectionsAreaFromLegend,e,tableStore.spec.selectionsPath);tableStore.stringifySpec(_),tableStore.editor.mappingSpec.highlightCode=[...tableStore.getHighlightCodeStartEndLine(n,null,_),`${e[e.length-1]}Shallow`]}tableStore.highlightNodes(selected)}else{tableStore.highlightMinimapCells(cells);const e=cells.map((e=>[e.row,e.col,e.row,e.col]));tableStore.highlightNodes(e)}}))}return(0,vue__WEBPACK_IMPORTED_MODULE_11__.sV)((()=>{const e=(0,vue__WEBPACK_IMPORTED_MODULE_11__.nI)()?.proxy;inHotInst=e.$refs.inputTbl.hotInstance,outHotInst=e.$refs.outputTbl.hotInstance,tableStore.input_tbl.instance=inHotInst,tableStore.output_tbl.instance=outHotInst,initEventsForTbl("input_tbl"),initEventsForTbl("output_tbl");const t=document.querySelectorAll(".icons-container .icon-scroll"),_=document.querySelectorAll(".ht_master .wtHolder");t.forEach(((e,t)=>{e.addEventListener("scroll",(()=>{_[t].scrollLeft=e.scrollLeft})),_[t].addEventListener("scroll",(()=>{e.scrollLeft=_[t].scrollLeft}))}))})),(e,t)=>{const _=(0,vue__WEBPACK_IMPORTED_MODULE_11__.g2)("v-icon"),n=(0,vue__WEBPACK_IMPORTED_MODULE_11__.g2)("a-button"),i=(0,vue__WEBPACK_IMPORTED_MODULE_11__.g2)("a-upload");return(0,vue__WEBPACK_IMPORTED_MODULE_11__.uX)(),(0,vue__WEBPACK_IMPORTED_MODULE_11__.CE)(vue__WEBPACK_IMPORTED_MODULE_11__.FK,null,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",_hoisted_1,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",_hoisted_2,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("span",_hoisted_3,(0,vue__WEBPACK_IMPORTED_MODULE_17__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.v)].table.input),1),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("span",_hoisted_4,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(i,{"file-list":fileList.value,"onUpdate:fileList":t[0]||(t[0]=e=>fileList.value=e),"max-count":1,accept:".csv, .txt, .xls, .xlsx",customRequest:handleUpload,onRemove:handleRemove,onPreview:handlePreview,showUploadList:{showRemoveIcon:!0}},{default:(0,vue__WEBPACK_IMPORTED_MODULE_11__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(n,{size:"small"},{default:(0,vue__WEBPACK_IMPORTED_MODULE_11__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(_,{name:"bi-upload",scale:"0.85"}),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("span",null,(0,vue__WEBPACK_IMPORTED_MODULE_17__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.v)].table.upload),1)])),_:1})])),_:1},8,["file-list"]),(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(n,{style:{"margin-left":"5px"},size:"small",onClick:resetData},{default:(0,vue__WEBPACK_IMPORTED_MODULE_11__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(_,{name:"bi-arrow-clockwise",scale:"0.9"}),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("span",null,(0,vue__WEBPACK_IMPORTED_MODULE_17__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.v)].table.reset),1)])),_:1})])]),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",_hoisted_5,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(_components_ColType_vue__WEBPACK_IMPORTED_MODULE_4__.A,{tblType:"input_tbl"}),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",_hoisted_6,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)((0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_handsontable_vue3__WEBPACK_IMPORTED_MODULE_5__.sH),{ref:"inputTbl",data:input_tbl.value,rowHeaders:!0,colHeaders:!0,manualColumnResize:!0,autoWrapRow:!0,autoWrapCol:!0,contextMenu:!0,renderer:renderTblCell,licenseKey:"non-commercial-and-evaluation"},null,8,["data"])])])]),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",{class:"divider-w",onMousedown:t[1]||(t[1]=e=>(0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_dragLayout__WEBPACK_IMPORTED_MODULE_8__.LP)(e,"width")),title:"Drag to resize"},null,32),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",_hoisted_7,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",_hoisted_8,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("span",null,(0,vue__WEBPACK_IMPORTED_MODULE_17__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.v)].table.output),1),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("span",_hoisted_9,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(n,{size:"small",onClick:handleDownload},{default:(0,vue__WEBPACK_IMPORTED_MODULE_11__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(_,{name:"bi-download",scale:"0.85"}),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("span",null,(0,vue__WEBPACK_IMPORTED_MODULE_17__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_9__.v)].table.download),1)])),_:1})])]),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",_hoisted_10,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)(_components_ColType_vue__WEBPACK_IMPORTED_MODULE_4__.A,{tblType:"output_tbl"}),(0,vue__WEBPACK_IMPORTED_MODULE_11__.Lk)("div",_hoisted_11,[(0,vue__WEBPACK_IMPORTED_MODULE_11__.bF)((0,vue__WEBPACK_IMPORTED_MODULE_13__.R1)(_handsontable_vue3__WEBPACK_IMPORTED_MODULE_5__.sH),{ref:"outputTbl",data:output_tbl.value,rowHeaders:!0,colHeaders:output_col.value,manualColumnResize:!0,renderer:renderTblCell,contextMenu:!0,autoWrapRow:!0,autoWrapCol:!0,licenseKey:"non-commercial-and-evaluation"},null,8,["data","colHeaders"])])])])],64)}}})},43517:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44114),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(56768),vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(24232),vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(90144),_utils_drawTree__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(34722),ant_design_vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(17844),_store_table__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25719),d3__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(89782),_utils_lang__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(21971),_utils_minimap__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(48228),_utils_template__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(29833);const _hoisted_1={class:"view"},_hoisted_2={class:"view-title"},_hoisted_3={style:{"font-size":"18px","font-weight":"bold"}},_hoisted_4=["title"],_hoisted_5={style:{"font-size":"15px",height:"25px"}},_hoisted_6={style:{"margin-right":"10px"}},_hoisted_7={class:"view-content",style:{display:"flex"}},_hoisted_8={style:{flex:"1.3"}},_hoisted_9=(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("path",{class:"mini-temp-line top-line"},null,-1),_hoisted_10=(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("path",{class:"mini-temp-line bottom-line"},null,-1),_hoisted_11=[_hoisted_9,_hoisted_10],_hoisted_12={style:{flex:"1","margin-left":"5px"}};__webpack_exports__.A=(0,vue__WEBPACK_IMPORTED_MODULE_1__.pM)({__name:"PatternVis",setup(__props,{expose:__expose}){const tableStore=(0,_store_table__WEBPACK_IMPORTED_MODULE_3__.v)(),instanceContent=(0,vue__WEBPACK_IMPORTED_MODULE_8__.KR)(""),menuList=(0,vue__WEBPACK_IMPORTED_MODULE_1__.EW)((()=>tableStore.tree.menuList)),contextMenuVisible=(0,vue__WEBPACK_IMPORTED_MODULE_1__.EW)((()=>tableStore.tree.contextMenuVisible&&tableStore.tree.menuList.length>0)),contextMenuVisibleChange=e=>{tableStore.tree.contextMenuVisible=e,tableStore.tree.menuList=[]},closeContextMenu=e=>{const visNode=tableStore.spec.selectNode.data;let extract=null,extractColor="",triggerCellCursorFlag=!1,messageInfo="\n"+_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v].pattern.selectionMode;const maxCNum=tableStore.findMaxCNumber()+1;switch(e.key){case"0":messageInfo="Please reselect the template's area in the input table."+messageInfo,triggerCellCursorFlag=!0;break;case"1":messageInfo=_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v].pattern.addConstr+messageInfo,triggerCellCursorFlag=!0;break;case"2-0":extract={byPositionToTargetCols:Array.from({length:visNode.width*visNode.height},((e,t)=>`C${maxCNum+t}`))},extractColor="positionShallow";break;case"2-1":extract={byContext:{position:"above"}},extractColor="contextShallow";break;case"2-2":const createExtract=()=>eval(`currentAreaTbl => {\n                  // Please replace the default code with the necessary implementation to complete the function.\n                  return currentAreaTbl.flat().map((cell, i) => 'C' + (${maxCNum} + i))\n                  }`);extract={byValue:createExtract()},extractColor="valueShallow";break;case"2-3":tableStore.insertNodeOrPropertyIntoSpecs(void 0,"extract");break;case"3-0":case"3-1":case"3-2":case"3-3":messageInfo=_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v].pattern.addSubPattern+messageInfo,triggerCellCursorFlag=!0;break;case"4":tableStore.deleteChildByPath(tableStore.spec.rawSpecs,visNode.path),tableStore.stringifySpec();break;case"5":tableStore.deleteChildByPath(tableStore.spec.rawSpecs,visNode.path,tableStore.spec.selectConstrIndex),tableStore.stringifySpec()}if(null!==extract&&(tableStore.insertNodeOrPropertyIntoSpecs(extract,"extract"),tableStore.editor.mappingSpec.highlightCode=[...tableStore.getHighlightCodeStartEndLine(extract,tableStore.getNodebyPath(tableStore.spec.rawSpecs,visNode.path)),extractColor]),triggerCellCursorFlag){ant_design_vue__WEBPACK_IMPORTED_MODULE_9__.Ay.info(messageInfo),tableStore.spec.selectAreaFromNode=e.key,document.body.style.cursor="cell",document.documentElement.style.setProperty("--custom-cursor","cell");const t=tableStore.generateHighlightCells(tableStore.spec.selectionsAreaFromLegend,tableStore.spec.selectAreaFromLegend);tableStore.highlightTblCells("input_tbl",t)}tableStore.tree.contextMenuVisible=!1},treeContainer=(0,vue__WEBPACK_IMPORTED_MODULE_8__.KR)(null);function resetZoom(){tableStore.tree.visInst.resetZoom(),d3__WEBPACK_IMPORTED_MODULE_4__.Ltv("svg.tbl-container g.left").transition().duration(750).call(_utils_minimap__WEBPACK_IMPORTED_MODULE_6__.V.transform,d3__WEBPACK_IMPORTED_MODULE_4__.GSI),d3__WEBPACK_IMPORTED_MODULE_4__.Ltv("svg.tbl-container g.right").transition().duration(750).call(_utils_template__WEBPACK_IMPORTED_MODULE_7__._.transform,d3__WEBPACK_IMPORTED_MODULE_4__.GSI)}const drawTree=e=>{const t=new _utils_drawTree__WEBPACK_IMPORTED_MODULE_2__.L([2,1],".tree-container",e,tableStore,1,"h");t.render(),tableStore.tree.visInst=t},typeMap={null:"Region",position:"Position Based",context:"Context Based",value:"Value Based"},selectMatchExtractArea=e=>{d3__WEBPACK_IMPORTED_MODULE_4__.Ubm(".legend").classed("legend-selection",!1),d3__WEBPACK_IMPORTED_MODULE_4__.Ltv(`.legend.legend-${e}`).classed("legend-selection",!0);const t=tableStore.spec.selectionsAreaFromLegend,_=tableStore.spec.selectAreaFromLegend,n=tableStore.generateHighlightCells(t,_);tableStore.highlightTblCells("input_tbl",n),_.length>t.length?_[_.length-1]=e:_.push(e),document.body.style.cursor="cell",document.documentElement.style.setProperty("--custom-cursor","cell"),ant_design_vue__WEBPACK_IMPORTED_MODULE_9__.Ay.info("Now is in "+typeMap[e]+" mode. Please select the starting area in the input table.\n Press ESC to cancel the selection mode.")},tblContainer=(0,vue__WEBPACK_IMPORTED_MODULE_8__.KR)(null),handleFormatter=e=>0===tableStore.spec.matchedInstNum?"":isNaN(e)?0:parseInt(e)+1,handleStep=(e,t)=>{if("up"===t.type){if(e<=1)return;tableStore.goToInstance(e-2)}else{if(e>=tableStore.spec.visTree.children[0].matchs.length-2)return;tableStore.goToInstance(e+2)}};function handleCodeChange(e=!1){if(tableStore.editor.mappingSpec.codeUpdateFromEditor&&(setTimeout((()=>{tableStore.editor.mappingSpec.codeUpdateFromEditor=!1}),600),e))return;const t=tableStore.prepareDataAfterCodeChange();if(!t)return;"default"===document.body.style.cursor&&(0,_utils_minimap__WEBPACK_IMPORTED_MODULE_6__.W)(tableStore.input_tbl.tbl.length,tableStore.input_tbl.tbl[0].length,tblContainer.value,tableStore);const _=tableStore.transformTablebyCode();setTimeout((()=>{tableStore.editor.mappingSpec.triggerCodeChange=!0,tableStore.editor.mappingSpec.highlightCode&&(tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode),tableStore.editor.mappingSpec.highlightCode=null)}),600),_&&(0===tableStore.spec.matchedInstNum?(instanceContent.value=_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v].tree.noMatch,tableStore.tree.instanceIndex=-1):instanceContent.value="en"===_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v?"Total "+tableStore.spec.matchedInstNum+" instance(s)":"总共匹配了"+tableStore.spec.matchedInstNum+"个实例",tableStore.computeColInfo("output_tbl"),drawTree(tableStore.spec.visTree),(0,_utils_template__WEBPACK_IMPORTED_MODULE_7__.F)(tblContainer.value,tableStore),tableStore.optimizeMiniTempDistance(),tableStore.updateCurve())}return __expose({handleCodeChange:handleCodeChange}),(0,vue__WEBPACK_IMPORTED_MODULE_1__.wB)((()=>tableStore.editor.mappingSpec.code),(e=>{tableStore.editor.mappingSpec.instance?.setValue(e),tableStore.editor.mappingSpec.triggerCodeChange?handleCodeChange():tableStore.editor.mappingSpec.highlightCode&&(tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode),tableStore.editor.mappingSpec.highlightCode=null,tableStore.editor.mappingSpec.triggerCodeChange=!0)})),(0,vue__WEBPACK_IMPORTED_MODULE_1__.wB)((()=>tableStore.tree.instanceIndex),(()=>{(0,_utils_template__WEBPACK_IMPORTED_MODULE_7__.F)(tblContainer.value,tableStore),tableStore.updateCurve(),tableStore.highlightTblPatternConstr()})),(0,vue__WEBPACK_IMPORTED_MODULE_1__.wB)((()=>tableStore.input_tbl.tbl),(e=>{(0,_utils_minimap__WEBPACK_IMPORTED_MODULE_6__.W)(e.length,e[0].length,tblContainer.value,tableStore),tableStore.computeColInfo("input_tbl")})),(0,vue__WEBPACK_IMPORTED_MODULE_1__.sV)((()=>{document.querySelector("span.ant-input-number-handler-up").setAttribute("title",_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v].pattern.previousInst),document.querySelector("span.ant-input-number-handler-down").setAttribute("title",_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v].pattern.nextInst)})),(e,t)=>{const _=(0,vue__WEBPACK_IMPORTED_MODULE_1__.g2)("a-input-number"),n=(0,vue__WEBPACK_IMPORTED_MODULE_1__.g2)("a-button"),i=(0,vue__WEBPACK_IMPORTED_MODULE_1__.g2)("a-button-group"),s=(0,vue__WEBPACK_IMPORTED_MODULE_1__.g2)("v-icon"),a=(0,vue__WEBPACK_IMPORTED_MODULE_1__.g2)("a-flex"),r=(0,vue__WEBPACK_IMPORTED_MODULE_1__.g2)("a-menu"),o=(0,vue__WEBPACK_IMPORTED_MODULE_1__.g2)("a-dropdown");return(0,vue__WEBPACK_IMPORTED_MODULE_1__.uX)(),(0,vue__WEBPACK_IMPORTED_MODULE_1__.CE)("div",_hoisted_1,[(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("div",_hoisted_2,[(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(a,{justify:"space-between",align:"center"},{default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",_hoisted_3,(0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.patterns),1),(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",null,[(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",null,(0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.currentInst),1),(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(_,{class:"goToInstance",value:(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(tableStore).tree.instanceIndex,defaultValue:-1,disabled:0===(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(tableStore).spec.matchedInstNum,onPressEnter:t[0]||(t[0]=e=>(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(tableStore).goToInstance(+e.target.value-1)),size:"small",precision:0,formatter:handleFormatter,onStep:handleStep,onBlur:t[1]||(t[1]=e=>(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(tableStore).goToInstance(+e.target.value-1))},null,8,["value","disabled"]),(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",{style:{"font-weight":"normal"},title:instanceContent.value},"/ ["+(0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(tableStore).spec.matchedInstNum)+"]",9,_hoisted_4)]),(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",_hoisted_5,[(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",null,(0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.match),1),(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(i,{style:{margin:"0 15px 0 6px"}},{default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(n,{class:"legend legend-null",size:"small",onClick:t[2]||(t[2]=e=>selectMatchExtractArea("null")),title:(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.regionTitle},{default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.eW)((0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.region),1)])),_:1},8,["title"])])),_:1}),(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",null,(0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.extract),1),(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(i,{style:{"margin-left":"6px"}},{default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(n,{class:"legend legend-position",size:"small",title:(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.positionTitle},{default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.eW)((0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.position),1)])),_:1},8,["title"]),(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(n,{class:"legend legend-context",size:"small",onClick:t[3]||(t[3]=e=>selectMatchExtractArea("context")),title:(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.contextTitle},{default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.eW)((0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.context),1)])),_:1},8,["title"]),(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(n,{class:"legend legend-value",size:"small",onClick:t[4]||(t[4]=e=>selectMatchExtractArea("value")),title:(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.valueTitle},{default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.eW)((0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.value),1)])),_:1},8,["title"])])),_:1})]),(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",_hoisted_6,[(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(n,{id:"draw_tree",size:"small",onClick:resetZoom},{default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(s,{name:"bi-arrow-clockwise",scale:"0.9"}),(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("span",null,(0,vue__WEBPACK_IMPORTED_MODULE_10__.v_)((0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.$)[(0,vue__WEBPACK_IMPORTED_MODULE_8__.R1)(_utils_lang__WEBPACK_IMPORTED_MODULE_5__.v)].pattern.reset),1)])),_:1})])])),_:1})]),(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("div",_hoisted_7,[(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("div",_hoisted_8,[((0,vue__WEBPACK_IMPORTED_MODULE_1__.uX)(),(0,vue__WEBPACK_IMPORTED_MODULE_1__.CE)("svg",{ref_key:"tblContainer",ref:tblContainer,class:"tbl-container"},_hoisted_11,512))]),(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("div",_hoisted_12,[(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(o,{trigger:["contextmenu"],open:contextMenuVisible.value,onOpenChange:contextMenuVisibleChange},{overlay:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.bF)(r,{onClick:closeContextMenu,items:menuList.value},null,8,["items"])])),default:(0,vue__WEBPACK_IMPORTED_MODULE_1__.k6)((()=>[(0,vue__WEBPACK_IMPORTED_MODULE_1__.Lk)("div",{ref_key:"treeContainer",ref:treeContainer,class:"tree-container"},null,512)])),_:1},8,["open"])])])])}}})},96637:function(e,t,_){"use strict";var n=_(45130),i=_(56768);const s={class:"wrapper"},a=(0,i.Fv)('<div class="filing-container" style="display:none;"><span class="item" id="busuanzi_container_site_pv"> 本站总访问量<span id="busuanzi_value_site_pv"></span>次 </span><span class="item" id="busuanzi_container_site_uv"> 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span><span class="item" id="busuanzi_container_page_pv"> 本文总阅读量<span id="busuanzi_value_page_pv"></span>次 </span></div>',1);function r(e,t,_,n,r,o){const l=(0,i.g2)("panel-view");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",s,[(0,i.bF)(l)]),a],64)}_(44114);var o=_(24232),l=_(90144),c=_(27098);const u=c.A;var d=u,h=_(42336),p=_(25719),E=(0,i.pM)({__name:"CodeView",props:{codeType:{}},setup(e,{expose:t}){const{codeType:_}=e,n=(0,p.v)(),s={value:"",language:"typescript",theme:"vs",fontSize:14,glyphMargin:!1,automaticLayout:!1,autoIndent:"advanced",readOnly:"rootArea"===_,minimap:{enabled:"rootArea"===_},lineNumbersMinChars:1,scrollBeyondLastLine:!1,wordWrap:"on",padding:{bottom:50}},a=(0,l.KR)(null);let r=null;const o=/\s+/g,c=(e,t)=>e.replace(o,"")===t.replace(o,""),u=e=>{c(n.editor.mappingSpec.code,e)||(n.spec.undoHistory.push(n.editor.mappingSpec.code),n.spec.redoHistory=[],n.editor.mappingSpec.codeUpdateFromEditor=!0,n.editor.mappingSpec.code=e)};t({updateCode:u});const d=()=>{r&&r.dispose();const e={...s,value:n.editor[_].code};r=h.EN.create(a.value,e);const t=n.debounce((()=>{n.checkGrammarError(),null===n.editor.mappingSpec.errorMark&&n.editor.mappingSpec.autoRun&&u(r.getValue())}),1e3);r.onDidChangeModelContent((()=>{n.editor.mappingSpec.decorations?.clear(),t()}))},E=n.debounce((()=>{r&&r.layout()}),300),g=new ResizeObserver(E);if("mappingSpec"===_){const e="ts:grammar.ts",t=h.EN.getModels().find((t=>t.uri.toString()===e));t||fetch("./grammar.ts").then((t=>{t.text().then((t=>{h.eo.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!1}),h.eo.typescript.javascriptDefaults.setCompilerOptions({target:h.eo.typescript.ScriptTarget.ES2015,allowNonTsExtensions:!0}),h.eo.typescript.javascriptDefaults.addExtraLib(t,e),h.EN.createModel(t,"typescript",h.zn.parse(e))}))}))}return(0,i.sV)((()=>{d(),g.observe(a.value),r&&(n.editor[_].instance=r,"mappingSpec"===_&&(n.editor.mappingSpec.decorations=r.createDecorationsCollection([])))})),(0,i.hi)((()=>{r&&r.dispose()})),(e,t)=>((0,i.uX)(),(0,i.CE)("div",{ref_key:"editorWrapper",ref:a,class:"editor-container"},null,512))}});const g=E;var M=g,P=_(43517);const b=P.A;var m=b,f=_(21971),D=_(1890),O=_(17727),C=_(17844);const v={id:"panel"},A={class:"system-name"},T=(0,i.Lk)("span",{id:"system_name"},"TableCanoniser",-1),I={style:{left:"20px",position:"absolute"}},L={style:{"font-size":"16px","font-weight":"normal","margin-right":"5px"}},R={style:{right:"20px",position:"absolute"}},y={style:{"margin-left":"5px"}},B={style:{"margin-left":"5px"}},W={class:"main-views"},U={class:"column",style:{flex:"12"}},x={style:{flex:"1",display:"flex","min-height":"0px"}},K={style:{flex:"1",display:"flex","min-height":"0px"}},w={class:"column",style:{flex:"5"}},S={class:"view"},k={class:"view-content"},$=["title"],j=["title"],N=["title"];var F=(0,i.pM)({__name:"PanelView",setup(e){for(const i in D.Ur)document.documentElement.style.setProperty(`--color-${i}`,D.Ur[i]);document.documentElement.style.setProperty("--custom-cursor","default");const t=(0,p.v)(),_=(0,i.EW)((()=>t.caseList.map((e=>({value:e,label:e}))))),n=(0,i.EW)((()=>t.currentCase)),s=(0,l.KR)("1"),a=(0,i.EW)((()=>0===t.spec.undoHistory.length)),r=(0,i.EW)((()=>0===t.spec.redoHistory.length));function c(){t.editor.mappingSpec.errorMark=null;const e=t.spec.undoHistory.pop();void 0!==e&&(t.spec.redoHistory.push(t.editor.mappingSpec.code),t.editor.mappingSpec.code=e)}function u(){t.editor.mappingSpec.errorMark=null;const e=t.spec.redoHistory.pop();void 0!==e&&(t.spec.undoHistory.push(t.editor.mappingSpec.code),t.editor.mappingSpec.code=e)}const h=(0,l.KR)(),E=(0,l.KR)();function g(){if(!t.editor.mappingSpec.autoRun){if(null!==t.editor.mappingSpec.errorMark){const e=t.editor.mappingSpec.errorMark;return C.Ay.error(`Invalid syntax at Line ${e.startLineNumber}, Column ${e.startColumn}:\n ${e.message}`),!1}const e=t.editor.mappingSpec.instance.getValue();E.value.updateCode(e)}h.value.handleCodeChange(!0),t.editor.mappingSpec.highlightCode&&(t.highlightCode(...t.editor.mappingSpec.highlightCode),t.editor.mappingSpec.highlightCode=null,t.editor.mappingSpec.triggerCodeChange=!0)}function P(e){"Escape"===e.key&&(t.editor.mappingSpec.decorations?.clear(),t.input_tbl.instance.deselectCell(),t.output_tbl.instance.deselectCell(),t.input_tbl.instance.updateSettings({cell:[]}),t.output_tbl.instance.updateSettings({cell:[]}),t.highlightMinimapCells([]),t.clearStatus("tree"),t.clearStatus("matchArea"))}function b(e){t.currentCase=e,F.value=!1}const F=(0,l.KR)(!1);let z=null,H=null;function q(e,t){F.value=!0,null===H&&setTimeout((()=>{H=document.querySelector(".rc-virtual-list-holder-inner"),H?.addEventListener("mouseenter",(()=>{null!==z&&(clearTimeout(z),z=null),F.value=!0})),H?.addEventListener("mouseleave",(()=>{F.value=!1}))}),100)}function V(e,t){z=setTimeout((()=>{F.value=!1}),200)}return(0,i.sV)((()=>{t.loadCaseData(t.currentCase),document.addEventListener("keydown",P),document.addEventListener("mousemove",O.oS),document.addEventListener("mouseup",O.K0)})),(e,p)=>{const P=(0,i.g2)("a-select"),D=(0,i.g2)("v-icon"),C=(0,i.g2)("a-button"),z=(0,i.g2)("a-button-group"),H=(0,i.g2)("a-checkbox"),J=(0,i.g2)("a-tab-pane"),Y=(0,i.g2)("a-tabs");return(0,i.uX)(),(0,i.CE)("div",v,[(0,i.Lk)("div",A,[T,(0,i.Lk)("span",I,[(0,i.Lk)("span",L,(0,o.v_)((0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.case),1),(0,i.bF)(P,{value:n.value,options:_.value,size:"small",onChange:b,onMouseenter:q,onMouseleave:V,open:F.value,style:{width:"137px"}},null,8,["value","options","open"])]),(0,i.Lk)("span",R,[(0,i.bF)(z,null,{default:(0,i.k6)((()=>[(0,i.bF)(C,{size:"small",onClick:c,disabled:a.value},{default:(0,i.k6)((()=>[(0,i.bF)(D,{name:"io-arrow-undo-outline",scale:"0.9"}),(0,i.Lk)("span",y,(0,o.v_)((0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.undo),1)])),_:1},8,["disabled"]),(0,i.bF)(C,{size:"small",onClick:u,disabled:r.value},{default:(0,i.k6)((()=>[(0,i.bF)(D,{name:"io-arrow-redo-outline",scale:"0.9"}),(0,i.Lk)("span",B,(0,o.v_)((0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.redo),1)])),_:1},8,["disabled"])])),_:1})])]),(0,i.Lk)("div",W,[(0,i.Lk)("div",U,[(0,i.Lk)("div",x,[(0,i.bF)(d)]),(0,i.Lk)("div",{class:"divider-h",onMousedown:p[0]||(p[0]=e=>(0,l.R1)(O.LP)(e,"height")),title:"Drag to resize"},null,32),(0,i.Lk)("div",K,[(0,i.bF)(m,{ref_key:"patternVis",ref:h},null,512)])]),(0,i.Lk)("div",{class:"divider-w",onMousedown:p[1]||(p[1]=e=>(0,l.R1)(O.LP)(e,"width")),title:"Drag to resize"},null,32),(0,i.Lk)("div",w,[(0,i.Lk)("div",S,[(0,i.Lk)("div",k,[(0,i.bF)(Y,{activeKey:s.value,"onUpdate:activeKey":p[3]||(p[3]=e=>s.value=e),type:"card"},{rightExtra:(0,i.k6)((()=>[(0,i.Lk)("span",{title:(0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.autoRunTitle},[(0,i.bF)(H,{checked:(0,l.R1)(t).editor.mappingSpec.autoRun,"onUpdate:checked":p[2]||(p[2]=e=>(0,l.R1)(t).editor.mappingSpec.autoRun=e)},{default:(0,i.k6)((()=>[(0,i.eW)((0,o.v_)((0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.autoRun),1)])),_:1},8,["checked"])],8,$),(0,i.bF)(C,{size:"small",style:{margin:"1px 6px 5px"},onClick:g},{default:(0,i.k6)((()=>[(0,i.bF)(D,{name:"la-rocket-solid",scale:"0.85"}),(0,i.Lk)("span",null,(0,o.v_)((0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.run),1)])),_:1})])),default:(0,i.k6)((()=>[(0,i.bF)(J,{key:"1"},{tab:(0,i.k6)((()=>[(0,i.Lk)("span",{style:{"font-size":"15px"},title:(0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.specTitle},(0,o.v_)((0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.spec),9,j)])),default:(0,i.k6)((()=>[(0,i.bF)(M,{codeType:"mappingSpec",ref_key:"specCode",ref:E},null,512)])),_:1}),(0,i.bF)(J,{key:"2"},{tab:(0,i.k6)((()=>[(0,i.Lk)("span",{style:{"font-size":"15px"},title:(0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.matchedInstTitle},(0,o.v_)((0,l.R1)(f.$)[(0,l.R1)(f.v)].panel.matchedInst)+" ["+(0,o.v_)((0,l.R1)(t).spec.matchedInstNum)+"] ",9,N)])),default:(0,i.k6)((()=>[(0,i.bF)(M,{codeType:"rootArea"})])),_:1})])),_:1},8,["activeKey"])])])])])])}}});const z=F;var H=z,q=(0,i.pM)({name:"overView",components:{PanelView:H}}),V=_(71241);const J=(0,V.A)(q,[["render",r]]);var Y=J,X=_(55234),Q=_(76877),G=_(34385),Z=_(92278),ee=_(13472),te=_(35678),_e=_(91328),ne=_(13209),ie=_(25169),se=_(54467),ae=_(6311),re=_(52511),oe=_(50931),le=_(64089),ce=_(86135),ue=_(97694),de=_(99604),he=_(74789),pe=_(95682),Ee=_(77478),ge=_(86789),Me=_(90070),Pe=_(58856),be=_(20627);const me=(0,X.Ey)(),fe=(0,n.Ef)(Y);fe.use(me).use(Q.Ay).use(G.A).use(Z.A).use(ee.A).use(te.A).use(_e.A).use(ne.Ay).use(ie.A).use(se.Ay).use(ae.Ay).use(re.Ay).use(oe.Ay).use(le.A).use(ce.A).use(ue.Ay).use(de.A).use(he.A).use(pe.A).use(Ee.Ay),(0,ge.oe)(Me.tAF,Me.Ah9,Pe.RqA,Me.rLf,be.Eks,be.q_,Me.MQY,Me.XWt),fe.component("v-icon",ge.Ly),fe.mount("#app")},25719:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{v:function(){return useTableStore}});var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44114),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_esnext_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(43375),core_js_modules_esnext_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_esnext_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_esnext_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39225),core_js_modules_esnext_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_esnext_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_esnext_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(13972),core_js_modules_esnext_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_esnext_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_esnext_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(99209),core_js_modules_esnext_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_esnext_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_esnext_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25714),core_js_modules_esnext_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_esnext_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_esnext_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(17561),core_js_modules_esnext_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_esnext_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_esnext_set_union_v2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(66197),core_js_modules_esnext_set_union_v2_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_esnext_set_union_v2_js__WEBPACK_IMPORTED_MODULE_7__),pinia__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(55234),d3__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(89782),vue__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(90144),_table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(81579),_table_canoniser_dist_parser__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(54235),ant_design_vue__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(17844),monaco_editor__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(42336),typescript__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(8230),typescript__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(typescript__WEBPACK_IMPORTED_MODULE_12__),_utils_style__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1890),_utils_lang__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(21971);function replaceEvenSpaces(e){return e.replace(/ {2,}/g,(e=>{const t=e.length,_=t/2;return" ".repeat(_)}))}function removeWhitespace(e){return e.replace(/ /g,"")}function csvToMatrix(e){const t=e.trim().split("\n"),_=t.map((e=>e.split(",")));return _}const removeSpaceType={even:replaceEvenSpaces,all:removeWhitespace},useTableStore=(0,pinia__WEBPACK_IMPORTED_MODULE_15__.nY)("table",{state(){return{caseList:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(["1a. university","1b. university_v","2. model","3. phone","4. bank","5. payroll","6. York"]),currentCase:"1a. university",currentInitData:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([]),spec:{undoHistory:[],redoHistory:[],rawSpecs:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([]),visTree:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)({id:0,width:0,height:0,x:0,y:0,type:"null",path:[],children:[]}),visTreeMatchPath:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)({}),selectNode:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(null),selectConstrIndex:-1,constrNodeRectClickId:"",selectAreaFromNode:"",selectAreaFromLegend:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([]),selectionsAreaFromLegend:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([]),selectionsPath:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([]),dragConfigOpen:!1,matchedInstNum:0,areaConfig:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)({match:{startCell:{},size:{},traverse:{},constraints:[]},extract:null,fill:"",children:[]}),areaFormData:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)({offsetLayer:null,offsetFrom:null,position:{x:null,y:null},traverse:{xDirection:null,yDirection:null},size:{width:null,height:null}})},editor:{mappingSpec:{code:"",codePref:"const option: TableCanoniserTemplate[] = ",codeSuff:"\nreturn option;",errorMark:null,decorations:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(null),highlightCode:null,instance:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(null),triggerCodeChange:!0,codeUpdateFromEditor:!1,autoRun:!0},rootArea:{code:"",codePref:"const matchedResult: AreaInfo = ",object:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(null),instance:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(null)}},input_tbl:{instance:{},tbl:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([]),in2out:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)({}),in2nodes:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)({}),colInfo:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([])},output_tbl:{instance:{},tbl:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([]),cols:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([]),out2in:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)({}),colInfo:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)([])},tree:{contextMenuVisible:!1,instanceIndex:-1,clickNode:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(null),clickConstrIndex:-1,offset:{left:{x:0,y:0},right:{x:0,y:0}},visInst:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(null),tblVisHighlight:null,tblVisInfo:(0,vue__WEBPACK_IMPORTED_MODULE_16__.IJ)(null),minimapInstHighlight:null,minimapVisInfo:{width:0,height:0},menuAllList:[{key:"3",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.addPattern,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.addPattern,children:[{key:"3-0",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.position,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.positionTitle,style:{color:_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur["position"]}},{key:"3-1",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.context,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.contextTitle,style:{color:_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur["context"]}},{key:"3-2",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.value,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.valueTitle,style:{color:_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur["value"]}},{key:"3-3",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.region,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.regionTitle,style:{color:_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur["null"]}}]},{key:"1",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.addConstr,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.addConstr},{key:"2",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.resetCol,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.resetColTitle,children:[{key:"2-0",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.position,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.positionTitle,style:{color:_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur["position"]}},{key:"2-1",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.context,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.contextTitle,style:{color:_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur["context"]}},{key:"2-2",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.value,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.valueTitle,style:{color:_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur["value"]}},{key:"2-3",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.region,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.regionTitle,style:{color:_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur["null"]}}]},{key:"4",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.deletePattern,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.deletePatternTitle},{key:"5",label:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.deleteConstr,title:_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.menu.deleteConstrTitle}],menuList:[]}}},actions:{async loadCaseData(e){let t=[],_=`./${e}/`;try{const[n,i]=await Promise.all([fetch(_+"data.csv"),fetch(_+"spec.js")]),[s,a]=await Promise.all([n.ok?n.text():Promise.resolve(null),i.ok?i.text():Promise.resolve(null)]);this.initTblInfo(),this.clearStatus("matchArea"),this.editor.mappingSpec.errorMark=null,this.tree.instanceIndex=-1,this.spec.selectNode=null,this.editor.mappingSpec.highlightCode=null,null!==s?(this.input_tbl.tbl=csvToMatrix(s),this.input_tbl.instance.updateData(this.input_tbl.tbl),this.currentInitData=csvToMatrix(s),this.input_tbl.instance.render()):t.push(`Failed to load data from ${e}`),null!==a?(this.spec.undoHistory=[],this.spec.redoHistory=[],this.editor.mappingSpec.code=a):t.push(`Failed to load spec from ${e}`)}catch(n){t.push(`Error loading data: ${n}`)}this.currentCase=e,t.forEach((e=>{ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error(e)}))},traverseTree4UpdateMatchs(e,t=-1){let _=null;e.forEach(((e,n)=>{const i=e.templateRef.toString(),s=1===e.templateRef.length,a=s||e.isDefinedFromSpec;if(s&&(t=n),this.spec.visTreeMatchPath.hasOwnProperty(i))this.spec.visTreeMatchPath[i].matchs.push({x:e.x,y:e.y,width:e.width,height:e.height,instIndex:t,isDefinedFromSpec:a}),_=this.spec.visTreeMatchPath[i],_.match?.constraints?.forEach(((n,i)=>{const s=_.constrsInfo[i],r=(0,_table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.completeCellConstraint)(n),o=(0,_table_canoniser_dist_parser__WEBPACK_IMPORTED_MODULE_10__.U6)(r,e,this.editor.rootArea.object,!0);o&&s.push({x:o.x,y:o.y,isDefinedFromSpec:a,instIndex:t})}));else{if(_=this.getNodebyPath(this.spec.visTree.children,e.templateRef),null===_)return;this.spec.visTreeMatchPath[i]=_,_.matchs=[{x:e.x,y:e.y,width:e.width,height:e.height,instIndex:t,isDefinedFromSpec:a}],_.constrsInfo=[],_.match?.constraints?.forEach((n=>{const i=[],s=(0,_table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.completeCellConstraint)(n),r=(0,_table_canoniser_dist_parser__WEBPACK_IMPORTED_MODULE_10__.U6)(s,e,this.editor.rootArea.object,!0);r&&i.push({x:r.x,y:r.y,isDefinedFromSpec:a,instIndex:t}),_.constrsInfo.push(i)}))}this.traverseTree4UpdateMatchs(e.children,t)}))},updateVisTreeAreaBox(e=null){if(null===e){if(0===this.spec.visTree.children.length)return;e=this.spec.visTree.children[0]}if(void 0===e.matchs)return;const t=e.matchs.filter((e=>e.instIndex===this.tree.instanceIndex));e.currentMatchs=[];let _=null;if(t.forEach((t=>{if(e.currentMatchs.some((e=>e.x===t.x&&e.y===t.y)))return;const n={...t};t.isDefinedFromSpec&&(null===_?_=n:n.isDefinedFromSpec=!1),e.currentMatchs.push(n)})),null!==_)e.x=_.x,e.y=_.y,e.width=_.width,e.height=_.height;else if(e.currentMatchs.length>0){const t=e.currentMatchs[0];e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height}e.children&&e.children.forEach((e=>{this.updateVisTreeAreaBox(e)}))},goToInstance(e){if(0===this.spec.matchedInstNum)return;if(isNaN(e))return void ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error("The input number is invalid!");e=Math.round(e);const t=this.spec.visTree.children[0].matchs.length;if(e<0||e>=t)return void ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error(`The input number is out of range: [1, ${t}]`);this.tree.instanceIndex=e,this.updateVisTreeAreaBox(),this.highlightViewsAfterClickNode(),this.tree.minimapInstHighlight&&0===this.tree.minimapInstHighlight.selectAll("rect").size()&&this.highlightMinimapInsts();const _=this.tree.minimapInstHighlight;_.selectAll("rect").attr("stroke","none"),_.select(`rect:nth-child(${this.tree.instanceIndex+1})`).attr("stroke",_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur.selection)},highlightMinimapInsts(){const e=this.tree.minimapInstHighlight,t=this.tree.minimapVisInfo,_=this;e.selectAll("rect").remove(),0!==this.spec.visTree.children.length&&void 0!==this.spec.visTree.children[0].matchs&&e.raise().selectAll("rect").data(this.spec.visTree.children[0].matchs.map(((e,t)=>({x:e.x,y:e.y,width:e.width,height:e.height,index:t})))).enter().append("rect").attr("x",(e=>e.x*t.width)).attr("y",(e=>e.y*t.height)).attr("width",(e=>e.width*t.width)).attr("height",(e=>e.height*t.height)).attr("fill","rgba(0, 0, 0, 0)").attr("stroke",((e,t)=>t===this.tree.instanceIndex?_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur.selection:"none")).attr("stroke-width",1.5).on("mouseover",(function(e,t){d3__WEBPACK_IMPORTED_MODULE_8__.Ltv(this).attr("stroke",_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur.selection)})).on("mouseout",(function(e,t){t.index!==_.tree.instanceIndex&&d3__WEBPACK_IMPORTED_MODULE_8__.Ltv(this).attr("stroke","none")})).on("click",(function(e,t){_.goToInstance(t.index)})).append("svg:title").text(((e,t)=>"en"===_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v?`The ${_.numberToOrdinal(t+1)} instance.\nArea Box:\n · x: ${e.x}\n · y: ${e.y}\n · width: ${e.width}\n · height: ${e.height}`:`第${t+1}个实例。\n区域网格信息：\n · x：${e.x}\n · y：${e.y}\n · 宽：${e.width}\n · 高：${e.height}`))},optimizeMiniTempDistance(e=120){try{const t=d3__WEBPACK_IMPORTED_MODULE_8__.Ltv("g.left g.matrix"),_=t.node().getBBox().width,n=this.tree.offset.right.x-this.tree.offset.left.x-_-e;n>0&&(this.tree.offset.left.x+=n,t.attr("transform",`translate(${this.tree.offset.left.x}, ${this.tree.offset.left.y})`))}catch(t){console.error(t)}},updateCurve(){try{const e=this.tree.minimapInstHighlight.select(`rect:nth-child(${this.tree.instanceIndex+1})`),t=+e.attr("x")+ +e.attr("width"),_=+e.attr("y"),n=+e.attr("y")+ +e.attr("height"),i=d3__WEBPACK_IMPORTED_MODULE_8__.Ltv("rect.tbl-template-cell"),s=+i.attr("x"),a=+i.attr("y"),r=+i.attr("y")+ +i.attr("height")*this.spec.visTree.children[0].height,o=d3__WEBPACK_IMPORTED_MODULE_8__.Ltv("g.left g.matrix"),l=d3__WEBPACK_IMPORTED_MODULE_8__.Ltv("g.right g.tbl-template"),c=o.node().getCTM(),u=l.node().getCTM(),d=(e,t,_)=>({x:_.a*e+_.e,y:_.d*t+_.f}),h=d(t,_,c),p=d(t,n,c),E=d(s,a,u),g=d(s,r,u),M=d3__WEBPACK_IMPORTED_MODULE_8__.n8j().curve(d3__WEBPACK_IMPORTED_MODULE_8__.oDi),P=M([[h.x,h.y],[E.x,E.y]]),b=M([[p.x,p.y],[g.x,g.y]]);d3__WEBPACK_IMPORTED_MODULE_8__.Ltv("path.top-line").attr("d",P),d3__WEBPACK_IMPORTED_MODULE_8__.Ltv("path.bottom-line").attr("d",b)}catch(e){d3__WEBPACK_IMPORTED_MODULE_8__.Ltv("path.top-line").attr("d",""),d3__WEBPACK_IMPORTED_MODULE_8__.Ltv("path.bottom-line").attr("d","")}},traverseTree4UpdateIn2Nodes(e,t=[],_=[1]){const n=this.input_tbl.in2nodes;e.forEach(((e,i)=>{e.id=_[0]++;const s=[...t,i];e.path=s;const a=`${e.x}-${e.y}-${e.width}-${e.height}`;e.type="null",void 0!==e.extract&&null!=e.extract&&(void 0!==e.extract.byValue?e.type="value":void 0!==e.extract.byContext?e.type="context":void 0!==e.extract.byPositionToTargetCols&&(e.type="position")),this.spec.selectionsAreaFromLegend.push([e.y,e.x,e.y+e.height-1,e.x+e.width-1]),this.spec.selectAreaFromLegend.push(e.type),this.spec.selectionsPath.push(e.path),n.hasOwnProperty(a)?n[a].add(e.id):n[a]=new Set([e.id]),e.matchs?.forEach((t=>{const{x:_,y:i,width:s,height:a}=t,r=`${_}-${i}-${s}-${a}`;n.hasOwnProperty(r)?n[r].add(e.id):n[r]=new Set([e.id])})),e.children&&this.traverseTree4UpdateIn2Nodes(e.children,s,_)}))},transformTblUpdateRootArea(e=[]){const{rootArea:t,tidyData:_,executionMessages:n}=(0,_table_canoniser_dist_parser__WEBPACK_IMPORTED_MODULE_10__.LR)(this.input_tbl.tbl,e);this.editor.rootArea.object=t;const i=(0,_table_canoniser_dist_parser__WEBPACK_IMPORTED_MODULE_10__.lK)(t),s=/"(\w+)":/g;return this.editor.rootArea.code=this.editor.rootArea.codePref+i.replace(s,"$1:"),this.traverseTree4UpdateMatchs(t.children),this.tree.instanceIndex=0,this.updateVisTreeAreaBox(),this.input_tbl.in2nodes={},this.spec.selectAreaFromLegend=[],this.spec.selectionsAreaFromLegend=[],this.spec.selectionsPath=[],this.traverseTree4UpdateIn2Nodes(this.spec.visTree.children),n.length>0&&(n.forEach((e=>{const t=this.getNodebyPath(this.spec.rawSpecs,e.data.path);"MismatchNumberOfCells"===e.type&&(t.extract=e.data.code);const _=[...this.getHighlightCodeStartEndLine(e.data.code,t),"selectionShallow"];null===this.editor.mappingSpec.highlightCode&&(this.editor.mappingSpec.highlightCode=_);const n=_[0],i=_[1];ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.warning(`${e.type} warning on lines: ${n}-${i}\n`+e.message)})),this.editor.mappingSpec.triggerCodeChange=!1,this.stringifySpec()),_},generateHighlightCells(e,t=[]){const _=[];return 0===t.length&&(t=Array(e.length).fill("null")),e.forEach(((e,n)=>{for(let i=e[0];i<=e[2];i++)for(let s=e[1];s<=e[3];s++)_.push({row:i,col:s,className:t[n]})})),_},highlightTblCells(e,t,_=null,n=!0,i=!0){if(this[e].instance.updateSettings({cell:t}),null===_&&(_=t.map((e=>[e.row,e.col]))),_.length){let{topLeft:t,rowSize:s,colSize:a}=this.startPoint(_);const r=this[e].instance.countVisibleRows(),o=this[e].instance.countVisibleCols();this[e].instance.scrollViewportTo({row:n?1===s?Math.max(0,t[0]-Math.floor(r/2)):Math.max(0,t[0]-2):void 0,col:i?1===a?Math.max(0,t[1]-Math.floor(o/2)):Math.max(0,t[1]-1):void 0,verticalSnap:"top",horizontalSnap:"start"})}},highlightMinimapCells(e,t=!0){t&&d3__WEBPACK_IMPORTED_MODULE_8__.Ubm("g.matrix rect.grid-cell").attr("class","grid-cell"),e.forEach((e=>{e.className&&d3__WEBPACK_IMPORTED_MODULE_8__.Ltv(`g.matrix #grid-${e.row}-${e.col}`).raise().classed(e.className,!0)}))},highlightViewsAfterClickNode(){const e=this.tree.clickNode,t=this.tree.clickConstrIndex;if(d3__WEBPACK_IMPORTED_MODULE_8__.Ltv(".tbl-container .tbl-template-highlight").selectAll("rect").remove(),null!==e){const _=e.data;if(-1===t){this.highlightTblTemplate(_.currentMatchs);const e=[];_.matchs?.forEach((t=>{const{x:_,y:n,width:i,height:s}=t;e.push([n,_,n+s-1,_+i-1])}));let t=[],n=[];if(e.length>0){const{selectedCoords:i,hightedCells:s}=this.getHightlightedCells(e,`${_.type}Shallow`);t=t.concat(s);const a=this.in_out_mapping(i,"input_tbl",`${_.type}Shallow`);n=n.concat(a),this.highlightMinimapCells(s)}const i=[[_.y,_.x,_.y+_.height-1,_.x+_.width-1]],{selectedCoords:s,hightedCells:a}=this.getHightlightedCells(i,_.type);t=t.concat(a),this.highlightTblCells("input_tbl",t,Object.values(s)[0]);const r=this.in_out_mapping(s,"input_tbl",_.type);n=n.concat(r);const o=r.map((e=>[e.row,e.col]));this.highlightTblCells("output_tbl",n,o),this.highlightMinimapCells(a,0===e.length),this.input_tbl.instance.deselectCell(),this.output_tbl.instance.deselectCell()}else{let e=0;const n=_.constrsInfo[t].map(((e,t)=>({ele:e,index:t}))).filter((e=>e.ele.instIndex===this.tree.instanceIndex));if(void 0===n)return;this.highlightTblTemplate(n.map((t=>(t.ele.isDefinedFromSpec&&(e=t.index),{x:t.ele.x,y:t.ele.y,width:1,height:1,isDefinedFromSpec:t.ele.isDefinedFromSpec}))));const i=_.constrsInfo[t].map((e=>[e.y,e.x,e.y,e.x])),s=Array(i.length).fill("selectionShallow"),a=this.generateHighlightCells(i,s);let{row:r,col:o}=a.slice(-1)[0];e<s.length&&(a[e].className="selection",r=a[e].row,o=a[e].col),this.highlightTblCells("input_tbl",a,[[r,o]]),this.highlightMinimapCells(a)}}},in_out_mapping(e,t,_="selection"){const n="input_tbl"===t?this.input_tbl.in2out:this.output_tbl.out2in;if(0===Object.keys(n).length)return[];let i=[],s=[];for(let r in e)e[r].forEach((e=>{s=s.concat(n[`[${e[0]},${e[1]}]`])}));const a=[];return s&&s.forEach((e=>{if(e&&e.startsWith("[")&&e.endsWith("]")&&!a.includes(e)){a.push(e);let t=JSON.parse(e);i.push({row:t[0],col:t[1],className:_})}})),i},doRectanglesIntersect(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y},isRectanglesContained(e,t){const[_,n,i,s]=e,[a,r,o,l]=t;return _<=a&&n<=r&&i>=o&&s>=l},findMaxCNumber(e=null){null===e&&(e=this.output_tbl.cols);let t=0;return e.forEach((e=>{if("string"!==typeof e)return;const _=e.match(/^C(\d+)$/);if(_){const e=parseInt(_[1],10);e>t&&(t=e)}})),t},buildTree(e,t,_){const n=[],i=(e,t)=>{e.children||(e.children=[]);for(const _ of e.children)if(this.isRectanglesContained(_.selection,t.selection))return i(_,t);return e.children.push(t),!0};for(let r=0;r<e.length;r++){const s=e[r],a={type:t[r],selection:s,path:_[r]};let o=!1;for(const e of n)if(this.isRectanglesContained(e.selection,s)){o=i(e,a);break}o||n.push(a)}const s=[],a=[null];return this.traverseTree4buildSpecs(n,s,[0,0,this.input_tbl.tbl.length-1,this.input_tbl.tbl[0].length-1],a),{rootNodes:n,specs:s,newSpec:a[0]}},traverseTree4buildSpecs(nodes,specs,pSelection,addedSpec){const px=pSelection[1],py=pSelection[0],pw=pSelection[3]-px+1,ph=pSelection[2]-py+1;nodes.forEach((node=>{const newSpec={},{selection:selection,type:type}=node;if(node.path.length>0){const e=this.getNodebyPath(this.spec.rawSpecs,node.path);this.copyAttributes(e,newSpec,["match","extract","fill"])}else{const[startRow,startCol,endRow,endCol]=selection,width=endCol-startCol+1,height=endRow-startRow+1,traverse=nodes.length>1?{}:{xDirection:pw>=2*width?"after":void 0,yDirection:ph>=2*height?"after":void 0};newSpec.match={startCell:{offsetX:startCol-px,offsetY:startRow-py},size:{width:width,height:height},traverse:traverse};const maxCNum=this.findMaxCNumber()+1;switch(type){case"position":newSpec.extract={byPositionToTargetCols:Array.from({length:width*height},((e,t)=>`C${maxCNum+t}`))};break;case"context":newSpec.extract={byContext:{position:"above"}};break;case"value":const createExtract=()=>eval(`currentAreaTbl => {\n                  // Please replace the default code with the necessary implementation to complete the function.\n                  return currentAreaTbl.flat().map((cell, i) => 'C' + (${maxCNum} + i))\n                  }`);newSpec.extract={byValue:createExtract()};break}addedSpec[0]=newSpec}node.children&&(newSpec.children=[],this.traverseTree4buildSpecs(node.children,newSpec.children,selection,addedSpec)),specs.push(newSpec)}))},highlightNodes(e){const t=new Set;e.forEach((e=>{const _=e[0],n=e[1],i=e[2]-e[0]+1,s=e[3]-e[1]+1,a={x:n,y:_,width:s,height:i};for(let r in this.input_tbl.in2nodes){const[e,_,n,i]=r.split("-").map((e=>Number(e)));this.doRectanglesIntersect(a,{x:e,y:_,width:n,height:i})&&this.input_tbl.in2nodes[r].forEach((e=>{t.add(e)}))}})),d3__WEBPACK_IMPORTED_MODULE_8__.Ubm(".type-node").classed("selection",!1);for(let _ of t)d3__WEBPACK_IMPORTED_MODULE_8__.Ltv(`.type-node.node-rect-${_}`).classed("selection",!0);return t},highlightTblTemplate(e){try{const t=this.tree.tblVisHighlight,_=this.tree.tblVisInfo;e.forEach((e=>{void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height&&t.raise().append("rect").attr("x",(e.x-_.x)*_.width).attr("y",(e.y-_.y)*_.height).attr("width",e.width*_.width).attr("height",e.height*_.height).attr("fill","none").attr("stroke",_utils_style__WEBPACK_IMPORTED_MODULE_13__.Ur.selection).attr("stroke-width",3).attr("stroke-dasharray",e.isDefinedFromSpec?"0":"6,6")}))}catch(t){console.log(t)}},highlightTblPatternConstr(){const e=this.tree.clickNode,t=this.tree.clickConstrIndex;if(null!==e)if(-1===t)this.highlightTblTemplate(e.data.currentMatchs);else{const _=e.data.constrsInfo[t].map(((e,t)=>({ele:e,index:t}))).filter((e=>e.ele.instIndex===this.tree.instanceIndex));if(void 0===_)return;this.highlightTblTemplate(_.map((e=>({x:e.ele.x,y:e.ele.y,width:1,height:1,isDefinedFromSpec:e.ele.isDefinedFromSpec}))))}},getHightlightedCells(e,t="selection"){let _={},n=[];return e.forEach((e=>{const i=e[0],s=e[1],a=e[2],r=e[3];_[e.toString()]=[];for(let o=i;o<=a;o++)for(let i=s;i<=r;i++)_[e.toString()].push([o,i]),n.push({row:o,col:i,className:t})})),{selectedCoords:_,hightedCells:n}},grid_cell_click(e,t="selection"){const _=[{...e,className:t}];this.highlightTblCells("input_tbl",_);const n=this.in_out_mapping({0:[[e.row,e.col]]},"input_tbl",t);this.highlightTblCells("output_tbl",n)},startPoint(e){let t=e[0];const _=new Set([t[0]]),n=new Set([t[1]]);for(let i=1;i<e.length;i++){let s=e[i];_.add(s[0]),n.add(s[1]),(s[0]<t[0]||s[0]===t[0]&&s[1]<t[1])&&(t=s)}return{topLeft:t,rowSize:_.size,colSize:n.size}},prepareDataAfterCodeChange(){const e="Example format:\n"+this.editor.mappingSpec.codePref+"[\n  // Please write the specification here\n];";try{let t=this.editor.mappingSpec.code;if(""===t.trim())return ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error("Empty code!\nDefault code content has been filled in the code panel."),this.editor.mappingSpec.code=this.editor.mappingSpec.codePref+"[\n  // Please write the specification here\n];",!1;t+=this.editor.mappingSpec.codeSuff;const _=typescript__WEBPACK_IMPORTED_MODULE_12__.transpileModule(t,{compilerOptions:{target:typescript__WEBPACK_IMPORTED_MODULE_12__.ScriptTarget.ES2015,module:typescript__WEBPACK_IMPORTED_MODULE_12__.ModuleKind.CommonJS}}),n=new Function("TableCanoniserKeyWords",_.outputText),i=n(_table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.TableCanoniserKeyWords);return!1===Array.isArray(i)?(ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error("Invalid code!\nPlease provide your code input. "+e),!1):(this.spec.rawSpecs=i,this.spec.visTree.children=JSON.parse(JSON.stringify(i,((e,t)=>"function"===typeof t?"function":t))),!0)}catch(t){return t.message.includes("option")?ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error(t+"\n"+e):ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error(`${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.failedParse}\n ${t}`),!1}},numberToOrdinal(e){let t="th";if(e%100>=11&&e%100<=13)t="th";else switch(e%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd";break}return e+t},checkGrammarError(){const e=monaco_editor__WEBPACK_IMPORTED_MODULE_11__.EN.getModelMarkers({});e.length>0?e.forEach((e=>{"6133"==e.code||(this.editor.mappingSpec.errorMark=e)})):this.editor.mappingSpec.errorMark=null},transformTablebyCode(){if(null!==this.editor.mappingSpec.errorMark){const e=this.editor.mappingSpec.errorMark;return ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error("en"===_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v?`Invalid syntax at Line ${e.startLineNumber}, Column ${e.startColumn}:\n ${e.message}`:`语法错误（第${e.startLineNumber}行，第${e.startColumn}列）：\n${e.message}`),!1}let e="";try{const t=this.spec.rawSpecs;this.spec.visTreeMatchPath={};const _=this.transformTblUpdateRootArea(t);return this.initTblInfo(!1),this.spec.matchedInstNum=0,this.spec.visTree.children?.forEach(((t,_)=>{_?e+="\n":t.matchs&&(this.spec.matchedInstNum=t.matchs.length),t.matchs?t.matchs.length>1?e+=`${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.for} ${this.numberToOrdinal(_+1)} ${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.template} ${t.matchs.length} ${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.matched}`:1===t.matchs.length?e+=`${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.for} ${this.numberToOrdinal(_+1)} ${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.template} ${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.oneMatch}`:e+=`${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.for} ${this.numberToOrdinal(_+1)} ${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.template} ${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.noMatch}`:e+=`${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.for} ${this.numberToOrdinal(_+1)} ${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.template} ${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.noMatch}`})),0===Object.keys(_).length&&(e&&(e+="\n"),e+=_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.emptyTable),ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.info(e),this.derivePosiMapping(_),this.output_tbl.instance.updateData(this.output_tbl.tbl),this.output_tbl.instance.updateSettings({colHeaders:this.output_tbl.cols}),this.highlightMinimapInsts(),!0}catch(t){return e=t instanceof _table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.CustomError?`${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.failedTransform}\n ${t}`:`${_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.failedParse}\n ${t}`,ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error(e),console.error(t),!1}},derivePosiMapping(e){const t=Object.keys(e);this.output_tbl.cols=t;const _=Math.max(...t.map((t=>e[t].length)));for(let n=0;n<_;n++){const _=[];for(let i=0;i<t.length;i++){const s=t[i];let a;a=e[s].length<=n?{x:-1,y:-1,value:void 0}:e[s][n],_.push(a.value);let r=`[${a.y},${a.x}]`;const o=`[${n},${i}]`;a.x<0||a.y<0?r="":this.input_tbl.in2out.hasOwnProperty(r)?this.input_tbl.in2out[r].push(o):this.input_tbl.in2out[r]=[o],this.output_tbl.out2in.hasOwnProperty(o)?this.output_tbl.out2in[o].push(r):this.output_tbl.out2in[o]=[r]}this.output_tbl.tbl.push(_)}},generateGrid(e,t){const _=[];for(let n=0;n<e;n++)for(let e=0;e<t;e++)_.push({row:n,col:e});return _},computeTblPatternGrid(){const e=this.spec.visTree.children[0],t=this.generateGrid(e.height,e.width),_=[e],n=[e.x,e.y,e.x+e.width,e.y+e.height];while(_.length){const i=_.shift();if(void 0!==i.currentMatchs){for(const _ of i.currentMatchs){const{x:s,y:a,width:r,height:o}=_,l=s-n[0],c=a-n[1];if(!(l>=0&&c>=0&&s+r<=n[2]&&a+o<=n[3]))continue;let u=i.type,d="cellFill";"position"!==u&&(d="ambiguousText"),i.path.length>1&&!1===_.isDefinedFromSpec&&(u+="Shallow");for(let _=0;_<o;_++)for(let n=0;n<r;n++){const i=t[(c+_)*e.width+(l+n)];if(i.bgColor=u,i.text=new Set,i.textColor=d,this.input_tbl.in2out.hasOwnProperty(`[${a+_},${s+n}]`)){const e=this.input_tbl.in2out[`[${a+_},${s+n}]`];e.forEach((e=>{const[t,_]=JSON.parse(e);i.text.add(this.output_tbl.cols[_])}))}i.text=Array.from(i.text)}}i.children&&i.children.length&&_.push(...i.children)}}return t},initTblInfo(e=!0){e&&(this.input_tbl.tbl=[],this.input_tbl.instance.updateData(this.input_tbl.tbl)),this.input_tbl.in2out={},this.output_tbl.tbl=[],this.output_tbl.cols=[],this.output_tbl.out2in={},this.output_tbl.instance.updateData(this.output_tbl.tbl),this.output_tbl.instance.updateSettings({colHeaders:this.output_tbl.cols})},deleteChildByPath(e,t,_=-1){if(0===t.length)return;if(-1!==_){const n=this.getNodebyPath(e,t);return void(n&&(n.match.constraints.splice(_,1),0===n.match.constraints.length&&delete n.match.constraints))}const n=t.slice(0,-1),i=t[t.length-1];if(0===n.length)return void e.splice(i,1);const s=this.getNodebyPath(e,n);s&&s.children&&(s.children.splice(i,1),0===s.children.length&&delete s.children)},getNodebyPath(e,t){return(0,_table_canoniser_dist_parser__WEBPACK_IMPORTED_MODULE_10__.D5)(e,t)},stringifySpec(e=null,t="even",_=!0){let n=[];null===e&&(e=this.spec.rawSpecs);let i=JSON.stringify(e,r,2);n.forEach((e=>{i=i.replace('"$TableCanoniser$"',e)}));const s=/"(\w+)":/g;i=i.replace(s,"$1:");const a=/"TableCanoniserKeyWords\.(\w+)"/g;function r(e,_){return"function"===typeof _?(n.push(removeSpaceType[t](_.toString())),"$TableCanoniser$"):_}return i=i.replace(a,"TableCanoniserKeyWords.$1"),"all"===t&&(i=removeSpaceType.all(i)),_&&(this.editor.mappingSpec.triggerCodeChange&&(this.spec.undoHistory.push(this.editor.mappingSpec.code),this.spec.redoHistory=[]),this.editor.mappingSpec.code=this.editor.mappingSpec.codePref+i),i},selectArea(){const e=this.spec.selectNode.data,t=this.spec.areaFormData,_={match:{startCell:{offsetLayer:t.offsetLayer,offsetFrom:t.offsetFrom,offsetX:t.position.x,offsetY:t.position.y},size:{width:t.size.width,height:t.size.height},traverse:{xDirection:t.traverse.xDirection,yDirection:t.traverse.yDirection}}};if(0===e.path.length)this.spec.rawSpecs.push(_);else{const t=this.getNodebyPath(this.spec.rawSpecs,e.path);if(null===t)return void ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error("The node path is invalid");t.hasOwnProperty("children")&&void 0!=t.children?t.children.push(_):t.children=[_]}this.stringifySpec()},insertNodeOrPropertyIntoSpecs(e,t,_=null){if(null===_&&(_=this.spec.selectNode.data),0===_.path.length)this.spec.rawSpecs.push(e);else{const n=this.getNodebyPath(this.spec.rawSpecs,_.path);if(null===n)return void ant_design_vue__WEBPACK_IMPORTED_MODULE_17__.Ay.error(_utils_lang__WEBPACK_IMPORTED_MODULE_14__.$[_utils_lang__WEBPACK_IMPORTED_MODULE_14__.v].store.invalidPath);switch(t){case"children":n.hasOwnProperty("children")&&void 0!=n.children?n.children.push(e):n.children=[e];break;case"match":n.hasOwnProperty("match")&&void 0!=n.match?Object.assign(n.match,e):n.match=e;break;case"constraints":n.hasOwnProperty("match")&&void 0!=n.match?n.match.hasOwnProperty("constraints")&&void 0!=n.match.constraints?n.match.constraints.push(e):n.match.constraints=[e]:n.match={constraints:[e]};break;case"extract":n.extract=e;break}}this.stringifySpec()},copyAttributes(e,t,_){for(const n of _)e.hasOwnProperty(n)&&(t[n]=e[n])},copyTreeAttributes(e,t,_=["width","height","x","y"]){if(this.copyAttributes(e,t,_),e.children&&t.children)for(let n=0;n<e.children.length;n++)this.copyTreeAttributes(e.children[n],t.children[n],_)},getHighlightCodeStartEndLine(e,t=null,_=null){null===_&&(_=this.spec.rawSpecs);const n=this.stringifySpec(_,"all",!1),i=this.stringifySpec(e,"all",!1);if(null===t){const e=n.indexOf(i),t=n.slice(0,e),_=(t.match(/\n/g)||[]).length+1,s=_+(i.match(/\n/g)||[]).length;return[_,s]}{const[_,n]=this.getHighlightCodeStartEndLine(t),[i,s]=this.getHighlightCodeStartEndLine(e,null,t),a=_+i-1,r=_+s-1;return[a,r]}},highlightCode(e,t=e,_="nullShallow"){const n=this.editor.mappingSpec.instance,i=this.editor.mappingSpec.decorations;if(n&&i){const s=new monaco_editor__WEBPACK_IMPORTED_MODULE_11__.Q6(e,1,t,1),a=[{range:s,options:{isWholeLine:!0,className:_}}];i.set(a),n.revealRangeAtTop(s)}},computeColInfo(e="input_tbl"){const t=this[e].tbl;if(this[e].colInfo=[],0===t.length)return void("input_tbl"===e&&(this.spec.visTree.width=0,this.spec.visTree.height=0));const _=this[e].instance,n=t[0].length;"input_tbl"===e&&(this.spec.visTree.width=n,this.spec.visTree.height=t.length);for(let i=0;i<n;i++){const n={index:i,width:_.getColWidth(i),string:[],number:[],none:[]};null===n.width&&(n.width=60);for(let e=0;e<t.length;e++){const _=t[e][i],s=this.getCellDataType(_);switch(s){case _table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.TableCanoniserKeyWords.String:n.string.push(e);break;case _table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.TableCanoniserKeyWords.Number:n.number.push(e);break;case _table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.TableCanoniserKeyWords.None:n.none.push(e);break}}this[e].colInfo.push(n)}},getCellDataType(e){return""===e||null===e||void 0===e?_table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.TableCanoniserKeyWords.None:isNaN(Number(e))?"string"===typeof e?_table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.TableCanoniserKeyWords.String:_table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.TableCanoniserKeyWords.NotNone:_table_canoniser_dist_grammar__WEBPACK_IMPORTED_MODULE_9__.TableCanoniserKeyWords.Number},clearStatus(e){switch(e){case"matchArea":document.body.style.cursor="default",document.documentElement.style.setProperty("--custom-cursor","default"),d3__WEBPACK_IMPORTED_MODULE_8__.Ubm(".legend").classed("legend-selection",!1);break;case"tree":this.spec.constrNodeRectClickId="",this.tree.clickNode=null,this.tree.clickConstrIndex=-1,d3__WEBPACK_IMPORTED_MODULE_8__.Ltv(".tbl-container .tbl-template-highlight").selectAll("rect").remove(),d3__WEBPACK_IMPORTED_MODULE_8__.Ubm(".type-node").classed("selection",!1),d3__WEBPACK_IMPORTED_MODULE_8__.Ubm(".node-constraint-rect").attr("visibility","hidden");break;case"miniHighlight":break}},debounce(e,t){let _=null;return function(...n){_&&clearTimeout(_),_=setTimeout((()=>{e(...n)}),t)}}},getters:{}})},17727:function(e,t,_){"use strict";_.d(t,{K0:function(){return u},LP:function(){return l},oS:function(){return c}});const n={ele:void 0,width:0,height:0,flex:1},i={ele:void 0,width:0,height:0,flex:1};let s,a,r=0,o="";function l(e,t){const _=e.target,l=Array.from(_.parentElement.children),c=l.indexOf(_);n.ele=l[c-1],n.width=n.ele.getBoundingClientRect().width,n.height=n.ele.getBoundingClientRect().height,n.flex=parseFloat(n.ele.style.flex||"1"),i.ele=l[c+1],i.width=i.ele.getBoundingClientRect().width,i.height=i.ele.getBoundingClientRect().height,i.flex=parseFloat(i.ele.style.flex||"1"),r=n.flex+i.flex,o=t,s=e.clientX,a=e.clientY}function c(e){if(!o||void 0===n.ele||void 0===i.ele)return;const t="width"===o?e.clientX-s:e.clientY-a,_=n[o]+t,l=i[o]-t,c=_/(n[o]+i[o]),u=l/(n[o]+i[o]),d=c*r,h=u*r;n.ele.style.flex=`${d}`,i.ele.style.flex=`${h}`}function u(){o=""}},34722:function(e,t,_){"use strict";_.d(t,{L:function(){return u}});var n=_(91114),i=_(89782),s=_(1890),a=_(81579),r=_(21971);const o=new KeyboardEvent("keydown",{key:"Escape",code:"Escape",keyCode:27,charCode:27,which:27,bubbles:!0,cancelable:!0});function l(e){const{startx:t,starty:_,rectWidth:n,rectHeight:i,rounded:s,radius:a}=e;let r;switch(s){case"left":r=`\n      M${t+a},${_+a}\n      a${a},${a} 0 0 1 ${a},-${a}\n      h${n-a}\n      v${i}\n      h${-n+a}\n      a${a},${a} 0 0 1 -${a},-${a}\n      z\n      `;break;case"right":r=`\n      M${t},${_}\n      h${n-a}\n      a${a},${a} 0 0 1 ${a},${a}\n      v${i-2*a}\n      a${a},${a} 0 0 1 ${-a},${a}\n      h ${a-n}\n      z\n      `;break;case"top":r=`\n      M${t},${_+a}\n      a${a},${a} 0 0 1 ${a},-${a}\n      h${n-2*a}\n      a${a},${a} 0 0 1 ${a},${a}\n      v${i-a}\n      h${-n}\n      z`;break;case"bottom":r=`\n      M${t},${_}\n      h${n}\n      v${i-a}\n      a${a},${a} 0 0 1 ${-a},${a}\n      h${2*a-n}\n      a${a},${a} 0 0 1 -${a},-${a}\n      z`;break;case"all":r=`\n      M${t},${_+a}\n      a${a},${a} 0 0 1 ${a},-${a}\n      h${n-2*a}\n      a${a},${a} 0 0 1 ${a},${a}\n      v${i-2*a}\n      a${a},${a} 0 0 1 ${-a},${a}\n      h${2*a-n}\n      a${a},${a} 0 0 1 -${a},-${a}\n      z`;break;default:r=`\n      M${t}${_}\n      h${n}\n      v${i}\n      h${-n}\n      v${-i}\n      z\n      `;break}return r}function c(e,t,_,n){n.preventDefault(),n.preventDefault(),null===t.parent?e.tree.menuList=[e.tree.menuAllList[0]]:-1===_?e.tree.menuList=e.tree.menuAllList.slice(0,-1):(e.tree.menuList=e.tree.menuAllList.slice(-1),e.spec.selectConstrIndex=_),e.spec.selectNode=t,e.tree.contextMenuVisible=!0}class u{constructor(e,t,_,i,s=1,a="h"){(0,n.A)(this,"svgWidth",void 0),(0,n.A)(this,"svgHeight",void 0),(0,n.A)(this,"margins",void 0),(0,n.A)(this,"container",void 0),(0,n.A)(this,"data",void 0),(0,n.A)(this,"zoomLevel",void 0),(0,n.A)(this,"resetZoom",void 0),(0,n.A)(this,"depth",void 0),(0,n.A)(this,"calculated",void 0),(0,n.A)(this,"treeLayout",void 0),(0,n.A)(this,"realChart",void 0),(0,n.A)(this,"previousTransform",void 0),(0,n.A)(this,"centerG",void 0),(0,n.A)(this,"centerX",void 0),(0,n.A)(this,"root",void 0),(0,n.A)(this,"allNodes",void 0),(0,n.A)(this,"defaultFont",void 0),(0,n.A)(this,"duration",void 0),(0,n.A)(this,"store",void 0),(0,n.A)(this,"orient",void 0),this.svgWidth=500,this.svgHeight=500,this.margins=e,this.container=t,this.zoomLevel=s,this.orient=a,this.depth=10,this.calculated={},this.treeLayout=null,this.realChart=null,this.previousTransform=null,this.centerX=0,this.root=null,this.allNodes=null,this.defaultFont="Helevtica",this.duration=600,this.data=_,this.store=i,this.setZoomFactor.bind(this),this.batchEnterExitUpdate()}setZoomFactor(){const e=this.centerG.node().getBoundingClientRect().width;let t=this.svgWidth/e;t=t>1?1:t,this.zoomLevel=t,"h"===this.orient?this.centerG.attr("transform",`translate(${this.calculated.nodeMaxWidth/2}, ${this.calculated.centerY}) scale(${t})`):this.centerG.attr("transform",`translate(${this.calculated.centerX}, ${this.calculated.nodeMaxHeight/2}) scale(${t})`)}batchEnterExitUpdate(){i.r1M.prototype.patternify=function(e){const{tag:t,selector:_}=e,n=e.targetData||[_],i=this.selectAll(`.${_}`).data(n,((e,t)=>"object"===typeof e&&e.id?e.id:t));i.exit().remove();const s=i.enter().append(t).merge(i);return s.attr("class",_),s}}render(){const e=i.Ltv(this.container);e.node().replaceChildren();const t=e.node().getBoundingClientRect();t.width>0&&(this.svgWidth=t.width,this.svgHeight=t.height);const _=s.uL.nodeWidth,n=s.uL.nodeHeight;this.calculated={id:`ID${Math.floor(1e6*Math.random())}`,chartVerticalMargin:this.margins[0],chartHorizontalMargin:this.margins[1],chartWidth:this.svgWidth-2*this.margins[0],chartHeight:this.svgHeight-2*this.margins[1],nodeMaxWidth:_,nodeMaxHeight:n,centerX:(this.svgWidth-2*this.margins[0])/2,centerY:(this.svgHeight-2*this.margins[1])/2},this.depth="h"===this.orient?_/2:n+20,this.treeLayout=i.B22().size([this.calculated.chartWidth,this.calculated.chartHeight]),"h"===this.orient?this.treeLayout.nodeSize([this.calculated.nodeMaxHeight+s.uL.nodeSpacing,this.calculated.nodeMaxWidth+this.depth]):this.treeLayout.nodeSize([this.calculated.nodeMaxWidth+s.uL.nodeSpacing,this.calculated.nodeMaxHeight+this.depth]),Array.isArray(this.data)?this.root=i.zTO().id((e=>e.nodeId)).parentId((e=>e.parentNodeId))(this.data):(this.root=i.Sk5(this.data,(e=>e.children)),this.root.each((e=>{e.id=e.data.id}))),this.root.x0=0,this.root.y0=0;const a=i.s_O().on("zoom",(e=>{o.attr("transform",e.transform)})),r=e.patternify({tag:"svg",selector:"svg-chart-container"}).attr("width",this.svgWidth).attr("height",this.svgHeight).attr("font-family",this.defaultFont).call(a).on("dblclick.zoom",null);this.resetZoom=()=>{r.transition().duration(750).call(a.transform,i.GSI)};const o=r.patternify({tag:"g",selector:"chart"}).attr("transform",`translate(${this.calculated.chartHorizontalMargin}, ${this.calculated.chartVerticalMargin})`);this.realChart=o;const l=o.patternify({tag:"g",selector:"center-group"});return this.centerG=l,this.update(this.root),this}update(e){const t=this.store,n=this.treeLayout(this.root),u=n.descendants().slice(1),d=n.descendants();"h"===this.orient&&d.forEach(((e,t)=>{const _=e.x;e.x=e.y,e.y=_,0===t&&(e.x=2*s.uL.nodeCircleRadius)}));const{x0:h,y0:p,x:E,y:g}=e,M=this.centerG.selectAll("path.link").data(u,(e=>e.id)),P=i.pqs(),b=M.enter().insert("path","g").attr("class","link").attr("d",(()=>{const e={source:[h,p],target:[h,p]};return P(e)})),m=b.merge(M);m.attr("fill","none").attr("stroke-width",s.uL.connectorLineWidth).attr("stroke",s.uL.connectorLineColor);let f=0;m.transition().duration(this.duration).attr("d",(e=>{if("h"===this.orient){let t=s.uL.nodeWidth/2;const _=0,n=-s.uL.nodeWidth/2,i=0;"0"==e.parent.id&&(t=s.uL.nodeCircleRadius);const a=e.x+t;a>f&&(f=a);const r={source:[e.parent.x+t,e.parent.y+_],target:[e.x+n,e.y+i]};return P(r)}const t={source:[e.parent.x,e.parent.y+s.uL.nodeHeight/2],target:[e.x,e.y-s.uL.nodeHeight/2]};return P(t)}));M.exit().transition().duration(this.duration).attr("d",(()=>{const e={source:[E,g],target:[E,g]};return P(e)})).remove();const D=this.centerG.selectAll("g.node").data(d,(e=>e.id)),O=D.enter().append("g").attr("class","node").attr("transform",(()=>`translate(${h}, ${p})`)).attr("cursor","pointer"),C=O.patternify({tag:"g",selector:"node-group",targetData:e=>[e]}),v=O.merge(D);v.transition().attr("opaicty",0).duration(this.duration).attr("transform",(e=>`translate(${e.x}, ${e.y})`)).attr("opacity",1),C.attr("transform",(()=>`translate(${-s.uL.nodeWidth/2}, ${-s.uL.nodeHeight/2})`)),C.each((function(e){const n=i.Ltv(this);if(null===e.parent)return n.patternify({tag:"circle",selector:`node-circle-${e.id}`}),void C.select(`.node-circle-${e.id}`).attr("class",`node-circle-${e.id} type-node`).attr("r",s.uL.nodeCircleRadius).attr("fill","#f5f5f5").attr("stroke",s.uL.connectorLineColor).attr("stroke-width",s.uL.connectorLineWidth).attr("transform",`translate(${s.uL.nodeWidth/2}, ${s.uL.nodeHeight/2})`).attr("cursor","pointer").append("svg:title").text(`${r.$[r.v].tree.width}${e.data.width}, ${r.$[r.v].tree.height}${e.data.height}`);1===e.data.id&&(t.spec.selectNode=e,t.tree.clickNode=e,"cell"!==document.body.style.cursor&&t.goToInstance(0));const u={rectHeight:s.uL.nodeHeight,rectWidth:s.uL.nodeWidth,starty:0,startx:0,radius:5,rounded:"all"};let d=e.data.matchs?.length;d=void 0===d?r.$[r.v].tree.noMatch:`${r.$[r.v].tree.matched}${d} ${r.$[r.v].tree.instances}`,n.patternify({tag:"path",selector:`node-rect-${e.id}`}),C.select(`.node-rect-${e.id}`).attr("class",`node-rect-${e.id} type-node`).attr("d",l(u)).attr("fill",s.Ur[e.data.type]).attr("cursor","pointer").append("svg:title").text(`${r.$[r.v].tree.width}${e.data.width}, ${r.$[r.v].tree.height}${e.data.height}\n${r.$[r.v].tree.path}${JSON.stringify(e.data.path)}\n`+d),e.data.match?.constraints?.forEach(((i,l)=>{const u=s.uL.iconsize,d=`${e.id}-${l}`;n.patternify({tag:"rect",selector:`node-constraint-rect-${d}`});const h=C.select(`.node-constraint-rect-${d}`),p=t.getNodebyPath(t.spec.rawSpecs,e.data.path),E=p.match.constraints[l];h.classed("node-constraint-rect",!0).attr("transform",`translate(${(u+s.uL.iconPadding)*l}, ${-s.uL.nodeHeight/2-3})`).attr("visibility","hidden").attr("width",u+2).attr("height",u+2).attr("stroke",s.Ur.selection).attr("stroke-width",1.5).attr("fill","none");let g=0;n.patternify({tag:"image",selector:`node-constraint-icon-${d}`}),C.select(`.node-constraint-icon-${d}`).attr("transform",`translate(${1+(u+s.uL.iconPadding)*l}, ${-s.uL.nodeHeight/2-2})`).attr("xlink:xlink:href",(()=>{const e=E.valueCstr;let t;if("function"===typeof e)t=_(76020);else switch(e){case a.TableCanoniserKeyWords.String:t=_(50087);break;case a.TableCanoniserKeyWords.Number:t=_(11615);break;case a.TableCanoniserKeyWords.None:t=_(83266);break;case a.TableCanoniserKeyWords.NotNone:t=_(80528);break;default:t=_(58323)}return t})).attr("width",u).attr("height",u).attr("tabindex",0).on("keyup",((e,_)=>{"Delete"!==e.key&&"Backspace"!==e.key||(t.deleteChildByPath(t.spec.rawSpecs,_.data.path,l),t.stringifySpec())})).on("mouseover",((e,_)=>{try{h.attr("visibility","visible");let e=_.data.constrsInfo[l].map(((e,t)=>({ele:e,index:t}))).filter((e=>e.ele.instIndex===t.tree.instanceIndex));if(void 0===e)return;t.highlightTblTemplate(e.map((e=>(e.ele.isDefinedFromSpec&&(g=e.index),{x:e.ele.x,y:e.ele.y,width:1,height:1,isDefinedFromSpec:e.ele.isDefinedFromSpec}))))}catch(n){console.log("Constraint mouseover error: \n",n)}})).on("mouseout",((e,_)=>{t.spec.constrNodeRectClickId!==d&&h.attr("visibility","hidden"),t.highlightViewsAfterClickNode()})).on("contextmenu",c.bind(null,t,e,l)).on("click",((e,_)=>{try{document.dispatchEvent(o),t.spec.constrNodeRectClickId=d,t.tree.clickNode=_,t.tree.clickConstrIndex=l,h.attr("visibility","visible"),t.highlightViewsAfterClickNode(),t.editor.mappingSpec.highlightCode=[...t.getHighlightCodeStartEndLine(E,p),"selectionShallow"],t.editor.mappingSpec.triggerCodeChange=!1;const e=t.editor.mappingSpec.codePref+t.stringifySpec(null,"even",!1);t.editor.mappingSpec.code===e?(t.highlightCode(...t.editor.mappingSpec.highlightCode),t.editor.mappingSpec.highlightCode=null,t.editor.mappingSpec.triggerCodeChange=!0):t.editor.mappingSpec.code=e}catch(n){console.log("Constraint click error: \n",n)}})).append("svg:title").text((()=>{const e=E.valueCstr;if("function"===typeof e)return r.$[r.v].tree.function;switch(e){case a.TableCanoniserKeyWords.String:return r.$[r.v].tree.string;case a.TableCanoniserKeyWords.Number:return r.$[r.v].tree.number;case a.TableCanoniserKeyWords.None:return r.$[r.v].tree.none;case a.TableCanoniserKeyWords.NotNone:return r.$[r.v].tree.notNone;default:return r.$[r.v].tree.equal+e+r.v==="en"?".":"。"}}))}))})),v.patternify({tag:"text",selector:"node-text"}),v.select(".node-text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("fill",s.zK.color).attr("font-size",s.zK.fontSize).attr("y",(()=>s.zK.yAxisAdjust)).attr("cursor","pinter").attr("pointer-events","none").text((e=>{if(0===e.id)return"";{let t=e.data.width,_=e.data.height,n=e.data.match?.size?.width,i=e.data.match?.size?.height;return void 0===n&&(n=1),void 0===i&&(i=1),void 0===t?t=n:null===n&&(t=null),void 0===_?_=i:null===i&&(_=null),`(${t}, ${_})`}})),i.Ubm(".type-node").attr("tabindex",0).on("keyup",((e,_)=>{("Delete"===e.key||"Backspace"===e.key&&0!==_.data.id)&&(t.deleteChildByPath(t.spec.rawSpecs,_.data.path),t.stringifySpec())})).on("contextmenu",((e,_)=>{c(t,_,-1,e)})).on("mouseover",(function(e,_){_.id&&t.highlightTblTemplate(_.data.currentMatchs)})).on("mouseout",(function(){t.highlightViewsAfterClickNode()})).on("click",(function(e,_){if(e.stopPropagation(),t.clearStatus("tree"),_.id){t.spec.selectNode=_,t.tree.clickNode=_,t.tree.clickConstrIndex,t.highlightViewsAfterClickNode(),i.Ltv(this).classed("selection",!0);const e=_.data,n=t.getNodebyPath(t.spec.rawSpecs,e.path);t.editor.mappingSpec.highlightCode=[...t.getHighlightCodeStartEndLine(n),`${e.type}Shallow`],t.editor.mappingSpec.triggerCodeChange=!1;const s=t.editor.mappingSpec.codePref+t.stringifySpec(null,"even",!1);t.editor.mappingSpec.code===s?(t.editor.mappingSpec.instance?.setValue(s),t.highlightCode(...t.editor.mappingSpec.highlightCode),t.editor.mappingSpec.highlightCode=null,t.editor.mappingSpec.triggerCodeChange=!0):t.editor.mappingSpec.code=s}else document.dispatchEvent(o)}));D.exit().attr("opacity",1).transition().duration(this.duration).attr("transform",`translate(${E},${g})`).on("end",(function(){i.Ltv(this).remove()})).attr("opacity",0);d.forEach((e=>{e.x0=e.x,e.y0=e.y}));const A=Math.max((this.svgWidth-f)/2,0)-s.uL.nodeCircleRadius,T=Math.max((this.svgHeight-this.realChart.node().getBBox().height)/2,0)+s.uL.nodeCircleRadius;this.centerG.attr("transform",`translate(${A}, ${T})`)}}},21971:function(e,t,_){"use strict";_.d(t,{$:function(){return s},v:function(){return i}});const n=window.location.href,i=n.includes("cn")?"cn":"en",s={en:{panel:{case:"Case:",undo:"Undo",redo:"Redo",run:"Run",autoRun:"AutoRun",autoRunTitle:"Set whether to automatically run code upon changes",spec:"Specification",specTitle:"The mapping specification that transforms the input table to the output table",matchedInst:"Matched Instances",matchedInstTitle:"A tree data structure that contains the AreaInfo of all matched instances, starting from the root area"},pattern:{patterns:"Mapping Patterns",currentInst:"Current instance:",match:"Match:",region:"Region",regionTitle:"Click to select a starting area in the input table. Press 'Esc' to cancel the selection mode.",extract:"Extract by:",position:"Position",positionTitle:"Click to select a starting area in the input table for matching and extracting by position. Press 'Esc' to cancel the selection mode.",context:"Context",contextTitle:"Click to select a starting area in the input table for matching and extracting by context. Press 'Esc' to cancel the selection mode.",value:"Value",valueTitle:"Click to select a starting area in the input table for matching and extracting by value. Press 'Esc' to cancel the selection mode.",reset:"Reset View",previousInst:"Previous instance",nextInst:"Next instance",selectionMode:"Press ESC to cancel the selection mode.",addConstr:"Please select the constrained cell in the input table.",addSubPattern:"Please select an area in the input table."},table:{input:"Input Table",upload:"Upload",reset:"Reset Data",output:"Output Table",download:"Download"},store:{for:"For the",template:"template,",matched:"instances are matched.",oneMatch:"only one instance is matched.",noMatch:"no instance is matched.",emptyTable:"The output table is empty based on the specification.",failedTransform:"Failed to transform the table based on the specification:",failedParse:"Failed to parse the specification:",invalidPath:"The node path is invalid.",invalidInstNum:"The input number is out of range: ",menu:{addPattern:"Add Sub-Pattern",position:"Position",positionTitle:"Match and Extract by Position",context:"Context",contextTitle:"Match and Extract by Context",value:"Value",valueTitle:"Match and Extract by Value",region:"Region",regionTitle:"Match Without Extraction",addConstr:"Add Constraint",resetCol:"Reset Target Cols",resetColTitle:"Reset the Match & Extract Method of the Target Cols",deletePattern:"Delete This Pattern",deletePatternTitle:"Delete This Pattern.\nShortcut: Delete/Backspace",deleteConstr:"Delete This Constraint",deleteConstrTitle:"Delete This Constraint.\nShortcut: Delete/Backspace"}},tree:{function:"The cell is constrained by a custom function:\nClick to see details in the Code Panel.",string:"The cell's data type should be a string.",number:"The cell's data type should be a number.",none:"The cell should be an empty string, null, or undefined.",notNone:"The cell should not be an empty string, null, or undefined.",equal:"The cell should be ",width:"Width: ",height:"Height: ",path:"Pattern Path: ",noMatch:"Don't match any instances",matched:"Match: ",instances:"instances",total:"Total "},others:{colType:"cell(s) with a data type of",string:"string",number:"number",none:"none",targetCol:"The cell's Target Column is:",noTargetCol:"No Target Column"}},cn:{panel:{case:"演示案例 :",undo:"撤销",redo:"重做",run:"运行",autoRun:"自动运行",autoRunTitle:"设置是否在代码改变时自动运行代码",spec:"映射规范",specTitle:"将输入表转换为输出表的语义映射规范",matchedInst:"匹配实例",matchedInstTitle:"从根区域开始，包含所有匹配实例的AreaInfo的树数据结构"},pattern:{patterns:"映射模式",currentInst:"当前实例 :",match:"匹配方式 :",region:"区域",regionTitle:"点击选择输入表中的起始区域。按ESC键取消选择模式。",extract:"抽取方式 :",position:"位置",positionTitle:"点击选择输入表中的起始区域以进行位置匹配和抽取。按ESC键取消选择模式。",context:"上下文",contextTitle:"点击选择输入表中的起始区域以进行上下文匹配和抽取。按ESC键取消选择模式。",value:"值",valueTitle:"点击选择输入表中的起始区域以进行值匹配和抽取。按ESC键取消选择模式。",reset:"重置视图",previousInst:"上一个实例",nextInst:"下一个实例",selectionMode:"按ESC键取消选择模式。",addConstr:"请在输入表中选择约束单元格。",addSubPattern:"请在输入表中选择子模式单元格区域。"},table:{input:"输入表",upload:"上传",reset:"重置数据",output:"输出表",download:"下载"},store:{for:"对于第",template:"模板，",matched:"个实例匹配成功。",oneMatch:"只有一个实例匹配成功。",noMatch:"没有实例匹配成功。",emptyTable:"输出表为空，基于规范匹配成功。",failedTransform:"基于规范重构表格失败，原因为:",failedParse:"解析规范失败，原因为:",invalidPath:"该节点路径无效。",invalidInstNum:"输入的实例数值超出范围：",menu:{addPattern:"添加子模式",position:"位置",positionTitle:"按位置匹配和抽取",context:"上下文",contextTitle:"按上下文匹配和抽取",value:"值",valueTitle:"按值匹配和抽取",region:"区域",regionTitle:"不抽取",addConstr:"添加约束",resetCol:"重置目标列",resetColTitle:"重置目标列的匹配和抽取方式",deletePattern:"删除此模式",deletePatternTitle:"删除此模式。\n快捷键：Delete/Backspace",deleteConstr:"删除此约束",deleteConstrTitle:"删除此约束。\n快捷键：Delete/Backspace"}},tree:{function:"该单元格受自定义函数约束：\n点击“代码面板”查看详细信息。",string:"该单元格的数据类型应为字符串。",number:"该单元格的数据类型应为数值。",none:"该单元格应为空字符串，null，或undefined。",notNone:"该单元格不应为空字符串，null，或undefined。",equal:"该单元格应为：",width:"宽：",height:"高：",path:"模式路径：",noMatch:"没有匹配任何实例",matched:"匹配：",instances:"个实例",total:"总共匹配了"},others:{colType:"个单元格的数据类型为",string:"字符串 (string)",number:"数值 (number)",none:"空 (none)",targetCol:"该单元格在输出表中的映射目标列为：",noTargetCol:"该单元格在输出表中无映射目标列"}}}},48228:function(e,t,_){"use strict";_.d(t,{V:function(){return i},W:function(){return s}});var n=_(89782);let i=null;const s=(e,t,_,s,a=.2)=>{if(!_)return;const r=n.Ltv(_);if(r.select("g.left").remove(),0===e||0===t)return;const o=_.clientWidth*a,l=_.clientHeight;let c=Math.max(5,Math.min(45,Math.floor(o/t))),u=Math.max(5,Math.min(20,Math.floor(l/e)));c=u=Math.min(c,u),i=n.s_O().on("zoom",(function(e){h.attr("transform",`translate(${s.tree.offset.left.x+e.transform.x}, ${s.tree.offset.left.y+e.transform.y}) scale(${e.transform.k})`),s.updateCurve()}));const d=r.append("g").classed("left",!0).call(i).on("dblclick.zoom",null),h=d.append("g").classed("matrix",!0),p=s.generateGrid(e,t);h.append("g").selectAll("rect").data(p).enter().append("rect").classed("grid-cell",!0).attr("x",(e=>e.col*c)).attr("y",(e=>e.row*u)).attr("id",(e=>`grid-${e.row}-${e.col}`)).attr("width",c).attr("height",u).on("click",(function(e,t){n.Ubm("rect.grid-cell").attr("class","grid-cell"),n.Ltv(this).raise().classed("selection",!0),s.grid_cell_click({row:t.row,col:t.col}),s.input_tbl.instance.deselectCell(),s.output_tbl.instance.deselectCell()})).append("title").text((e=>`Position: (${e.row}, ${e.col})`));s.tree.offset.left.x=Math.max((o-h.node().getBBox().width)/2,0),s.tree.offset.left.y=Math.max((l-h.node().getBBox().height)/2,0),h.attr("transform",`translate(${s.tree.offset.left.x}, ${s.tree.offset.left.y})`),s.tree.minimapInstHighlight=h.append("g").classed("tbl-minimap-highlight",!0),s.tree.minimapVisInfo={width:c,height:u}}},1890:function(e,t,_){"use strict";_.d(t,{Ur:function(){return n},uL:function(){return i},zK:function(){return s}});const n={position:"rgba(106, 176, 76)",positionShallow:"rgba(106, 176, 76, 0.65)",context:"rgba(240, 147, 43)",contextShallow:"rgba(240, 147, 43, 0.65)",value:"rgba(34, 166, 179)",valueShallow:"rgba(34, 166, 179, 0.65)",null:"rgba(131, 149, 167)",nullShallow:"rgba(131, 149, 167, 0.65)",selection:"rgba(9, 132, 227)",selectionShallow:"rgba(9, 132, 227, 0.65)",positionRGBA:"rgba(106, 176, 76, 0.5)",contextRGBA:"rgba(240, 147, 43, 0.5)",valueRGBA:"rgba(34, 166, 179, 0.5)",nullRGBA:"rgba(131, 149, 167, 0.5)",selectionRGBA:"rgba(9, 132, 227, 0.5)",ambiguousText:"#f9f7ff",cellFill:"#f9f7ff",cellStroke:"#cccccc"},i={nodeWidth:96,nodeHeight:30,nodeRectFillColor:"#7EAA55",nodeCircleFillColor:"#83b5ed",nodeCircleRadius:15,nodeBorderRadius:5,verticalLineLength:40,verticalLineWidth:5,nodeSpacing:34,connectorLineColor:"#0000004D",connectorLineWidth:1.5,iconsize:15,iconPadding:6},s={color:"white",fontSize:15,yAxisAdjust:2}},29833:function(e,t,_){"use strict";_.d(t,{F:function(){return r},_:function(){return a}});var n=_(1890),i=_(89782),s=_(21971);let a=null;const r=(e,t,_=.8)=>{if(!e)return;const r=i.Ltv(e);r.select("g.right").remove();try{const o=t.spec.visTree.children;if(void 0===o||0===o.length||0===o[0].width||0===o[0].height)return;const l=e.clientWidth*_,c=e.clientHeight;let u=Math.max(5,Math.min(90,Math.floor(l/o[0].width))),d=Math.max(5,Math.min(30,Math.floor(c/o[0].height)));a=i.s_O().on("zoom",(function(e){p.attr("transform",`translate(${t.tree.offset.right.x+e.transform.x}, ${t.tree.offset.right.y+e.transform.y}) scale(${e.transform.k})`),M(e.transform.k),t.updateCurve()})).filter((function(e){return!e.ctrlKey&&!e.button&&"dblclick"!==e.type}));const h=r.append("g").classed("right",!0).call(a),p=h.append("g").classed("tbl-template",!0);p.on("mouseover",(()=>{r.call(a)})),p.on("mouseout",(()=>{r.on(".zoom",null)}));let E=null;const g=t.computeTblPatternGrid();p.selectAll("rect").data(g).enter().append("rect").classed("tbl-template-cell",!0).attr("x",(e=>e.col*u)).attr("y",(e=>e.row*d)).attr("width",u).attr("height",d).attr("fill",(e=>e.bgColor?n.Ur[e.bgColor]:n.Ur.cellFill)).attr("stroke","#cccccc").on("mouseover",(function(){i.Ltv(this).raise().attr("stroke-width",2),E&&E.raise()})).on("mouseout",(function(){i.Ltv(this).attr("stroke-width",1),i.Ltv(".tbl-container .tbl-template-highlight").raise()})).on("click",(function(e,_){const n=_.row+o[0].y,s=_.col+o[0].x;i.Ltv(`#grid-${n}-${s}`).dispatch("click"),t.highlightNodes([[n,s,n,s]]),t.input_tbl.instance.deselectCell(),t.output_tbl.instance.deselectCell()})).append("title").text((e=>e.text&&e.text.length?s.$[s.v].others.targetCol+"\n"+e.text.toString():s.$[s.v].others.noTargetCol));t.tree.offset.right.x=e.clientWidth*(1-_)+Math.max((l-p.node().getBBox().width)/2,0),t.tree.offset.right.y=Math.max((c-p.node().getBBox().height)/2,0),p.attr("transform",`translate(${t.tree.offset.right.x}, ${t.tree.offset.right.y})`);const M=e=>{const t=u*e,_=d*e;t>=90||_>=30?E?E.style("display","block"):E=p.selectAll("text").data(g).enter().append("text").classed("tbl-template-text",!0).attr("x",(e=>e.col*u+u/2)).attr("y",(e=>e.row*d+d/2)).attr("dy",".30em").attr("font-size",15/e).attr("fill",(e=>e.textColor?n.Ur[e.textColor]:n.Ur.cellFill)).attr("text-anchor","middle").text((e=>e.text?e.text[0]:"")).each((function(e){const t=i.Ltv(this);let _=t.text(),n=this.getComputedTextLength();while(n>u&&_.length>0)_=_.slice(0,-1),t.text(_+"…"),n=this.getComputedTextLength()})).style("display","block").style("pointer-events","none"):E&&E.style("display","none")};M(1),t.tree.tblVisHighlight=p.append("g").classed("tbl-template-highlight",!0),t.tree.tblVisInfo={x:o[0].x,y:o[0].y,width:u,height:d}}catch(o){console.error(o)}}},81579:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomError=t.completeCellConstraint=t.completeRegionPosition=t.completeSpecification=t.TableCanoniserKeyWords=void 0;const _={String:"TableCanoniserKeyWords.String",Number:"TableCanoniserKeyWords.Number",None:"TableCanoniserKeyWords.None",NotNone:"TableCanoniserKeyWords.NotNone",Forward:"TableCanoniserKeyWords.Forward",Auto:"TableCanoniserKeyWords.Auto",pairSort:n};function n(e,t,_){let n=e.map(((e,t)=>({value:e,index:t})));n.sort(((e,t)=>"asc"===_?e.value<t.value?-1:e.value>t.value?1:0:e.value>t.value?-1:e.value<t.value?1:0));const i=new Array(t.length);return n.forEach(((e,_)=>i[e.index]=t[_])),i}t.TableCanoniserKeyWords=_;const i=1,s=1,a="current",r="topLeft",o=0,l=0,c=null,u=null,d="above",h=e=>e[0].value,p=_.String,E=!0,g=_.Auto;function M(e){return e?{offsetLayer:e.offsetLayer||a,offsetFrom:e.offsetFrom||r,offsetX:void 0===e.offsetX?o:e.offsetX,offsetY:void 0===e.offsetY?l:e.offsetY}:{offsetLayer:a,offsetFrom:r,offsetX:o,offsetY:l}}function P(e){const t=M(e);return Object.assign(Object.assign({},t),{valueCstr:void 0===e.valueCstr?p:e.valueCstr,ignoreOutOfBounds:void 0===e.ignoreOutOfBounds?E:e.ignoreOutOfBounds})}function b(e){return{position:e.position||d,toTargetCol:e.toTargetCol||h}}function m(e){var t,_,n,a,r,o,l,d,h,p,E,f;return{match:{startCell:M(null===(t=e.match)||void 0===t?void 0:t.startCell),size:{width:void 0===(null===(n=null===(_=e.match)||void 0===_?void 0:_.size)||void 0===n?void 0:n.width)?i:e.match.size.width,height:void 0===(null===(r=null===(a=e.match)||void 0===a?void 0:a.size)||void 0===r?void 0:r.height)?s:e.match.size.height},constraints:(null===(l=null===(o=e.match)||void 0===o?void 0:o.constraints)||void 0===l?void 0:l.map(P))||[],traverse:{xDirection:void 0===(null===(h=null===(d=e.match)||void 0===d?void 0:d.traverse)||void 0===h?void 0:h.xDirection)?c:e.match.traverse.xDirection,yDirection:void 0===(null===(E=null===(p=e.match)||void 0===p?void 0:p.traverse)||void 0===E?void 0:E.yDirection)?u:e.match.traverse.yDirection}},extract:e.extract?{byPositionToTargetCols:e.extract.byPositionToTargetCols||void 0,byContext:e.extract.byContext?b(e.extract.byContext):void 0,byValue:e.extract.byValue||void 0}:null,fill:void 0===e.fill?g:e.fill,children:(null===(f=e.children)||void 0===f?void 0:f.map(m))||[]}}t.completeRegionPosition=M,t.completeCellConstraint=P,t.completeSpecification=m;class f extends Error{constructor(e,t="CustomError"){super(e),this.name=t,Object.setPrototypeOf(this,new.target.prototype)}}t.CustomError=f},54235:function(e,t,_){"use strict";_(44114),_(43375),_(39225),_(13972),_(99209),_(25714),_(17561),_(66197),t.LR=t.U6=t.D5=t.lK=void 0;const n=_(81579);function i(e){const t=new WeakSet;return JSON.stringify(e,(function(e,_){if("object"===typeof _&&null!==_){if(t.has(_))return`[Reference to: ${e}]`;t.add(_)}return _}),2)}t.lK=i;var s={},a=[],r=[];const o=(e,t)=>{try{let _=e[t[0]];return t.slice(1).forEach((e=>{_=_.children[e]})),_}catch(_){return null}};t.D5=o;const l=(e,t)=>"function"===typeof t.valueCstr?t.valueCstr(e):t.valueCstr===n.TableCanoniserKeyWords.String?"string"===typeof e&&""!==e&&isNaN(Number(e)):t.valueCstr===n.TableCanoniserKeyWords.Number?"number"===typeof e||"string"===typeof e&&""!==e&&!isNaN(Number(e)):t.valueCstr===n.TableCanoniserKeyWords.None?null===e||""===e||void 0===e:t.valueCstr===n.TableCanoniserKeyWords.NotNone?null!==e&&""!==e&&void 0!==e:e===t.valueCstr,c=(e,t,_)=>"number"===typeof e?e:e(t,_),u=(e,t,_,i=!1)=>{let s=t;if("current"===e.offsetLayer)s=t;else if("root"===e.offsetLayer)s=_;else if("parent"===e.offsetLayer)s=t.parent;else{const _=t.areaLayer-e.offsetLayer(t);for(let e=0;e<_;e++)s=s.parent}let a={x:s.x+c(e.offsetX,t,_),y:s.y+c(e.offsetY,t,_)};if("bottomLeft"===e.offsetFrom?a.y+=s.height-1:"topRight"===e.offsetFrom?a.x+=s.width-1:"bottomRight"===e.offsetFrom&&(a.x+=s.width-1,a.y+=s.height-1),a.x<0||a.y<0||a.x>=_.width||a.y>=_.height){const e=`Invalid cell selection:\n Table size is (width: ${_.width}, height: ${_.height}), Position (${a.x}, ${a.y}) is out of bounds.`;if(i)return null;throw new n.CustomError(e,"OutOfBoundsError")}return Object.assign(Object.assign({},a),{value:_.areaTbl[a.y][a.x]})};t.U6=u;const d=(e,t,_,n)=>"number"===typeof e?e:"toParentX"===e?n.width-t:"toParentY"===e?n.height-_:1,h=(e,t,_,n,i)=>{const s=[];for(let a=_;a<_+i;a++){const _=e[a].slice(t,t+n);s.push(_)}return s},p=(e,t,_)=>{if(null===_)return;const i=Math.max(...Object.values(t).map((e=>e.length)));for(const s in t){if(!e.has(s))continue;const a=t[s],r=_===n.TableCanoniserKeyWords.Forward?a[a.length-1]:{x:-1,y:-1,value:_};while(a.length<i)a.push(r)}},E=(e,t,_,n,i,s,a,r,o,l,c,u)=>{let d=t,h=t+s-1,p=_,E=_+a-1,M=null;while(E<=i){const _=E-p+1;while(h<=n){const t=h-d+1;if(M=g(e,d,p,t,_,r,o,l,c,u),null===M)null!=e.match.size.width?(d+=1,h+=1):h===n?(d+=1,h=d):h+=1;else{if(r.instanceIndex+=1,null===e.match.traverse.xDirection)break;r.xIndex+=1,d+=t,h=d+s-1}}if(r.xIndex=0,null===M)null!=e.match.size.height?(p+=1,E+=1):E===i?(p+=1,E=p):E+=1;else{if(null===e.match.traverse.yDirection)break;r.yIndex+=1,p+=_,E=p+a-1}d=t,h=t+s-1}},g=(e,_,n,i,s,a,r,o,c,u)=>{let d=r.x+_,p=r.y+n;if("current"!==e.match.startCell.offsetLayer){const _=(0,t.U6)(e.match.startCell,r,o);if(null===_)return null;d=_.x,p=_.y}const E={parent:r,areaLayer:r.areaLayer+1,templateRef:a.templateRef.slice(),instanceIndex:a.instanceIndex,xIndex:a.xIndex,yIndex:a.yIndex,offsetX:_,offsetY:n,x:d,y:p,width:i,height:s,isDefinedFromSpec:d===u.x&&p===u.y,areaTbl:h(o.areaTbl,d,p,i,s),children:[]};for(let h of e.match.constraints)try{const e=(0,t.U6)(h,E,o);if(null===e)return null;if(!l(e.value,h))return null}catch(g){if(h.ignoreOutOfBounds)continue;return null}return r.children.push(E),M(e,E,o,c),E},M=(e,_,i,o)=>{const l=_.areaTbl.flat();if(e.extract){let c;if(void 0!==e.extract.byPositionToTargetCols)c=e.extract.byPositionToTargetCols;else if(void 0!==e.extract.byContext){const s=e.extract.byContext,a=[],r=[],o=[];if("above"===s.position)_.areaTbl.forEach(((e,t)=>{e.forEach(((e,_)=>{o.push([(0,n.completeRegionPosition)({offsetX:_,offsetY:t-1})])}))}));else if("below"===s.position)_.areaTbl.forEach(((e,t)=>{e.forEach(((e,_)=>{o.push([(0,n.completeRegionPosition)({offsetX:_,offsetY:t+1})])}))}));else if("left"===s.position)_.areaTbl.forEach(((e,t)=>{e.forEach(((e,_)=>{o.push([(0,n.completeRegionPosition)({offsetX:_-1,offsetY:t})])}))}));else if("right"===s.position)_.areaTbl.forEach(((e,t)=>{e.forEach(((e,_)=>{o.push([(0,n.completeRegionPosition)({offsetX:_+1,offsetY:t})])}))}));else{const e=s.position;_.areaTbl.forEach(((t,s)=>{t.forEach(((t,a)=>{const r=e({offsetX:a,offsetY:s,value:t},_,i),l=r.map((e=>(0,n.completeRegionPosition)(e)));o.push(l)}))}))}o.length>0&&o[0].length>0?o.forEach((e=>{const n=[];e.forEach((e=>{const s=(0,t.U6)(e,_,i);if(null===s)return null;n.push(s)})),r.push(n)})):console.log("No context cells found");const l=s.toTargetCol;r.forEach((e=>{a.push(l(e))})),c=a}else{if(void 0===e.extract.byValue)throw new n.CustomError("Please specify 'byPositionToTargetCols', 'byContext', or 'byValue' for extraction","NoExtractionSpecified");c=e.extract.byValue(_.areaTbl)}const u=_.templateRef.toString();s.hasOwnProperty(u)||(s[u]=new Set);const d=s[u];if(c.length!==l.length&&!a.some((e=>"MismatchNumberOfCells"===e.type))){const e=(0,t.D5)(r,_.templateRef).extract;let n;c.length>l.length?n=`The number of extracted columns (${c.length}) is larger than the number of matched cells (${l.length}).`:(void 0!==(null===e||void 0===e?void 0:e.byPositionToTargetCols)&&(e.byPositionToTargetCols=[...e.byPositionToTargetCols,...Array(l.length-c.length).fill(null)]),n=`The number of extracted columns (${c.length}) is less than the number of matched cells (${l.length}).\nWe have automatically filled the missing columns with null.`),a.push({type:"MismatchNumberOfCells",message:n,data:{code:e,path:_.templateRef}})}c.forEach(((e,t)=>{if(null!==e&&void 0!==e&&""!==e){const n={x:t>=l.length?-1:_.x+t%_.width,y:t>=l.length?-1:_.y+Math.floor(t/_.width),value:l[t]};o.hasOwnProperty(e)?o[e].push(n):o[e]=[n],d.add(e)}}));for(let e=1;e<_.templateRef.length;e++){const t=_.templateRef.slice(0,e).toString();s.hasOwnProperty(t)||(s[t]=new Set),s[t]=new Set([...s[t],...d])}}},P=(e,_,i,o,l=0)=>{const c={templateRef:[..._.templateRef,l],instanceIndex:0,xIndex:0,yIndex:0},u=e.match.traverse.xDirection,h=e.match.traverse.yDirection,g=(0,t.U6)(e.match.startCell,_,i);if(null===g)return null;const M=g.x-_.x,b=g.y-_.y,m=d(e.match.size.width,M,b,_),f=d(e.match.size.height,M,b,_);let D,O,C,v;null===u?(D=M,C=null===e.match.size.width?_.width-1:D+m-1):"before"===u?(D=0,C=M):"after"===u?(D=M,C=_.width-1):(D=0,C=_.width-1),null===h?(O=b,v=null===e.match.size.height?_.height-1:O+f-1):"before"===h?(O=0,v=b):"after"===h?(O=b,v=_.height-1):(O=0,v=_.height-1),E(e,D,O,C,v,m,f,c,_,i,o,g);const A=_.children.filter((e=>e.templateRef.toString()===c.templateRef.toString()));if(e.children.length>0&&A.length>0&&A.forEach((t=>{e.children.forEach(((e,_)=>{P(e,t,i,o,_)}));const _=s[t.templateRef.toString()];e.fill===n.TableCanoniserKeyWords.Auto?t.templateRef.length>1?p(_,o,null):p(_,o,""):p(_,o,e.fill)})),e.extract){const _=[];for(const t in e.extract)void 0!==e.extract[t]&&_.push(t);if(_.length>1&&!a.some((e=>"MultipleKeysInExtract"===e.type))){const e=(0,t.D5)(r,c.templateRef).extract;a.push({type:"MultipleKeysInExtract",message:`Multiple keys (${_}) are detected in 'extract'. We'll prioritize and parse in this order: byPositionToTargetCols, byContext, byValue. Any others will be ignored.\nPlease provide only one key for accurate processing.`,data:{code:e,path:c.templateRef}})}}};function b(e,t){const _={parent:null,areaLayer:0,templateRef:[],instanceIndex:0,xIndex:0,yIndex:0,offsetX:0,offsetY:0,x:0,y:0,width:e.length>0?e[0].length:0,height:e.length,isDefinedFromSpec:!1,areaTbl:e,children:[]},i={};return s={},a=[],r=t,t.forEach(((e,t)=>{const s=(0,n.completeSpecification)(e);P(s,_,_,i,t)})),{tidyData:i,rootArea:_,template2Cols:s,executionMessages:a}}t.LR=b},89387:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=89387,e.exports=t},47802:function(e,t,_){"use strict";_.d(t,{A:function(){return b}});var n=_(56768),i=_(24232),s=_(90144),a=_(50087),r=_(11615),o=_(83266),l=_(25719),c=_(21971);const u=e=>((0,n.Qi)("data-v-3eed367a"),e=e(),(0,n.jt)(),e),d={class:"icons-container"},h=u((()=>(0,n.Lk)("div",{style:{width:"50px",display:"inline-block"}},null,-1))),p={class:"icon-scroll"},E=["src","alt","title","onClick"];var g=(0,n.pM)({__name:"ColType",props:{tblType:{}},setup(e){const{tblType:t}=e,_=(0,l.v)(),u={string:a,number:r,none:o},g=(0,n.EW)((()=>_[t].colInfo.map((e=>{const t=[{type:"string",count:e.string.length},{type:"number",count:e.number.length},{type:"none",count:e.none.length}].filter((e=>e.count>0)).sort(((e,t)=>t.count-e.count));return{...e,sortedIcons:t}}))));function M(e,n){const i="selection",s=n.map((t=>({row:t,col:e,className:i})));_.highlightTblCells(t,s,null,!0,!1);const a=_.in_out_mapping({0:s.map((e=>[e.row,e.col]))},t,i);"input_tbl"===t?(_.highlightMinimapCells(s),_.highlightTblCells("output_tbl",a)):(_.highlightMinimapCells(a),_.highlightTblCells("input_tbl",a))}return(e,t)=>((0,n.uX)(),(0,n.CE)("div",d,[h,(0,n.Lk)("div",p,[(0,n.Lk)("div",{style:(0,i.Tr)({width:g.value.reduce(((e,t)=>e+t.width),0)+"px"})},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(g.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.index,style:(0,i.Tr)({width:e.width+"px"}),class:"icon-column"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.sortedIcons,(t=>((0,n.uX)(),(0,n.CE)("img",{key:t.type,src:u[t.type],alt:`${t.type} icon`,class:"icon",title:`${t.count} ${(0,s.R1)(c.$)[(0,s.R1)(c.v)].others.colType} ${(0,s.R1)(c.$)[(0,s.R1)(c.v)].others[t.type]}`,onClick:_=>M(e.index,e[t.type])},null,8,E)))),128))],4)))),128))],4)])]))}}),M=_(71241);const P=(0,M.A)(g,[["__scopeId","data-v-3eed367a"]]);var b=P},58323:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAACxAAAAsQHGLUmNAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAJJJREFUSInt0jEKAjEQRuFPEawEwXOsV/ES4iG01dPIFt5E0RNoLQjCgiBouwY2SGJnHqQITN78zIRCIZdecB9ihnGi74YdHl0FNV6ZZxtLcPlBg3OswQJNhrzBvC0MdwADjGIpItzxTHz7r4Q7mGKJSaLvig2OXQUH+d903xb2E5N+TTiiCit5I1rjlBOqUPjkDTtrUD2uq29SAAAAAElFTkSuQmCC"},76020:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAARtJREFUSIm11D8vBEEYx/FPkOhW6EWhVd1RUegpRBQSrbegv15xtffgBdBJVATRqERHK6gkF3+K3eRmhzCzt/dLJjszmef3nZ3nyUO+ptHDE76isR4fnso0n8AxNoO9U9ziGWeZfj+0p37jg1ENY50H5vfKP2pNBQYBoJ8SlHODjnrOLtoGdKP1dUrQf1W0gaVqvh3sf2Kn+sILjlKAoWaUpRfX+m+jl2seq8BHYHiYGpiag050Nun9cwDL0bp1QFhBr3gYJ+DGsHpaARRYDNbJz5MK6GqY4BxAqLEC3mQkuAkgK8EpgDn1BF/mmKcAtqIzJ7mAvzSPR8P+c4fJXJO4Xa9hFQvYxWy1/459ZcMbSVfqbXigfJaVpobfX29FllHU6BIAAAAASUVORK5CYII="},83266:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG3SURBVEiJrdbBTlNBFAbgr7ULeAECrWglxcbEhMTXoOAz6IoovIMPALJhoUbjC4iJJvoKgBvDxujCulCUuFI3QhRxcaZJQ+9tL3D/3Z3z339mzpzzz1QMxzRuYh7N9A2f8Qmv8AJf8gQqOeMN3MMtXMA7vMX3FJ/ADVzDXzxN/K8jFgwW8Qu/sYrWEO4s1nCQ/lkYJb6CI2zhcpHVJDSxnf5dziMtJsIzjJ1CvIcxbCaNgZ00xBa3zijewzh28BNT/YHHIuenSUserogzedgbmBaVsFqCeA/38UdkxgqORUWUhVbSvFPBa1zC9RInIHqnW02z7ZYsLmm2auK0szpwA+2CYh8M1v8eOlWRqzzLKIrjjLEq/tXwDfUMQm5HFkQde1V8xNw5xbIwhy7cFVu8WqL4bNJcgouiKdZKnGBdX6PBI9HezRLEZ3CIB/2DdWF2285vdm/wA5MngwvCajfPOMk4nieN+TzSciLsCFcsihmx8iNRNEPREX5+IA5rWHW1E+dQpGVg5XkdPCUu8duo4b249PdTfFJc+m1h9U8Sf/+EzkiLaIirtCNS1v9s6Ypny0vhO5n4D/ugYFLwBqzMAAAAAElFTkSuQmCC"},11615:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA1wAAANcBKydp6wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGbSURBVEiJtdU9axVBGMXx38SgtaIYXzCImMo6RZRAbFRQU/gVLLW4amNh4QeIEERLEdTeSlDEQlRIRNMIloIWRhDE0vgyFnOvbG7Gfe4WeWBhmHN2/jvPnp1NOWebWWOjGlNKvZTSROCZTSmdWjeZcw4vTCPjSOB7hAfr5kYELOBd4NmBNcx3AiDhI64FvvP4jm1dATP99kwFvie4t2F+BMAiVgLPLvzCmWEtDWKaUtqN65VwnMMqXrYEaBIncRc/msL40Hg4hnuxE68qWrNm8R7bNyjB1m9gOfDswW8cr+pBej7hSgC4iC/Y0hVwTEnPZAB4gdv/1VtuvImlYPH9+IO5TgDljPqMywHgkpKwsa6Auf6THQgAS7jV5kl4WIndFA7icUs0E87ibT8MzerlnD9Qsr86JI5jHk8rWrOO4iteV7Sf/0aVbZ9Q2rMvaM8bLLZ5qu8Ad/A8WPyQEuGZTgBsxTdcCABXlSM8dQWcVj77iQCwgoVo8RrgPp4Fix/ut2d6FEDzNB0A1lqSQ/lr9XLOy4GPQQ83s/4CubnR5aEuEtwAAAAASUVORK5CYII="},80528:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHOSURBVEiJrda/ThRRFAbwHyMFvoABN8SVgKgNiW+hyx8LXkAbE8V38AFQO+MajZ2xEBP/VRaWgI2hEDUqFioSK7URIkSLcyeusDOzyH7JZDL3fOe759577jnToxyDmEID9fQNH/EBT/AAn4oEegrGa7iEM9iHZbzA12Q/gBM4hk3cTvzVioDBJH7gJ2YxXMIdwWWsJ5+JKvGL2MI8DnUSTUIdC8l3pog0mQj30LcL8Rx9mEsaO1ZSE0ucrxCfTk8R9mMR3zHQargp9rxqW56lpwyHxZk084FBkQmzFY6dTgBX8Au1DKdFKjZLXXaHa+jFVIaTeIm3XZzgHV7hVCbyfKmL4jmWMNyLfnzZZpzGuTZOY+n9tI2tKVI8xyoa2R6jbMXvIsMb3OlQpNMsgrtYzvDe36V3E2NYyUTJPY4jXRQfwVE8zkQ939T+UP8X55Pmo3zghrje9QrHTs5gCBu43jp4UBS7BXsvds/xTaT/P5gQpXauYpIy8ftJo1FEmkmERVEVO8WQiHwLF6rI46Ker+Oq8uwaTZwNsS07Ii9q+gOiiZ8VVfG1aPpryd4vmv6oyJZbib+2Tadwghw10UrHxZa1/rasiDv0EJ+LBP4AGphm38Pwp9UAAAAASUVORK5CYII="},50087:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABdSURBVEiJY2AYBSSCowwMDP8pxIeRDWREs+A/lRwKN5eFkAIcDiAkDwdMxDuKPIDugyPYXEECoFQ/PCKJBjQPolELRi0YtWCQWIBcR8AA1rKfXAv+4ZGjVv0xkgEAaHMhoU7iewcAAAAASUVORK5CYII="},530:function(){},72615:function(){},84021:function(){},66247:function(){},82202:function(){},18641:function(){},97664:function(){}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var _=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(_.exports,_,_.exports,__webpack_require__),_.loaded=!0,_.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdO={}}(),function(){var e=[];__webpack_require__.O=function(t,_,n,i){if(!_){var s=1/0;for(l=0;l<e.length;l++){_=e[l][0],n=e[l][1],i=e[l][2];for(var a=!0,r=0;r<_.length;r++)(!1&i||s>=i)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](_[r])}))?_.splice(r--,1):(a=!1,i<s&&(s=i));if(a){e.splice(l--,1);var o=n();void 0!==o&&(t=o)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[_,n,i]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var _ in t)__webpack_require__.o(t,_)&&!__webpack_require__.o(e,_)&&Object.defineProperty(e,_,{enumerable:!0,get:t[_]})}}(),function(){__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,_){return __webpack_require__.f[_](e,t),t}),[]))}}(),function(){__webpack_require__.u=function(e){return"js/"+e+"."+{9:"f0d0ce5c",293:"6d8dd432",703:"0d1f9c9d",1034:"f6b3e245",1157:"2beaf0f8",1461:"fb0059e9",1477:"ffc266e5",1813:"6ef079f7",1915:"e21bd83b",2149:"158a201f",2365:"bc8f5817",2412:"58f99ca3",2501:"55fd872c",2591:"ff39a05e",2689:"688f7bd6",2709:"3469afb1",2799:"c63987be",2965:"29d2a306",2999:"d3f9dba9",3051:"77e50c86",3061:"482c606b",3071:"89465fe3",3445:"435e8a35",3473:"0bab0d67",3577:"6bef9c0d",3691:"484ae4ed",3717:"768e8e27",3753:"b0442b7b",3765:"d615a011",3775:"d917e1e1",3948:"345948b3",4205:"5e5ebbf5",4261:"169ed9f2",4341:"78a4ab37",4373:"ac90adaa",4485:"bef2dca3",4605:"266b8468",4621:"870c28e6",4805:"cf594d89",4977:"838037ee",5077:"c02ac641",5081:"14f2d800",5083:"27c26858",5093:"00755c35",5282:"c990c8e3",5285:"132b11de",5287:"283969a6",5303:"8f9f9293",5365:"dd4e4d8e",5521:"2a9a635c",5589:"2bda62e9",5609:"d5afb7e8",5653:"f8f91ca2",5749:"e6f60040",5841:"bd5e10f3",6059:"b1f436f9",6121:"dd2816d2",6181:"e7ca2241",6229:"3ac5fa3b",6309:"1ba0b728",6325:"abe102ec",6613:"370f0a13",6757:"689d8cb6",6821:"aa9a31f0",6845:"e880c126",7045:"25718108",7217:"f7f0263e",7219:"ba6a1f42",7449:"3864266f",7461:"69958a2b",7525:"5eb1403e",7623:"05ce3550",7641:"d0033e39",8175:"cc24a080",8285:"b5f431a8",8329:"2dbd08aa",8387:"a20b1f1d",8533:"bb0c91d4",8653:"866ac1be",8981:"57ed1260",9009:"cd2170ef",9437:"f09192df",9445:"0e4c637b",9626:"6f86ed1e",9717:"5d0c3836"}[e]+".js"}}(),function(){__webpack_require__.miniCssF=function(e){}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="TableCanoniser:";__webpack_require__.l=function(_,n,i,s){if(e[_])e[_].push(n);else{var a,r;if(void 0!==i)for(var o=document.getElementsByTagName("script"),l=0;l<o.length;l++){var c=o[l];if(c.getAttribute("src")==_||c.getAttribute("data-webpack")==t+i){a=c;break}}a||(r=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",t+i),a.src=_),e[_]=[n];var u=function(t,n){a.onerror=a.onload=null,clearTimeout(d);var i=e[_];if(delete e[_],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),r&&document.head.appendChild(a)}}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){__webpack_require__.p="/"}(),function(){var e={3524:0};__webpack_require__.f.j=function(t,_){var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)_.push(n[2]);else{var i=new Promise((function(_,i){n=e[t]=[_,i]}));_.push(n[2]=i);var s=__webpack_require__.p+__webpack_require__.u(t),a=new Error,r=function(_){if(__webpack_require__.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var i=_&&("load"===_.type?"missing":_.type),s=_&&_.target&&_.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,n[1](a)}};__webpack_require__.l(s,r,"chunk-"+t,t)}},__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,_){var n,i,s=_[0],a=_[1],r=_[2],o=0;if(s.some((function(t){return 0!==e[t]}))){for(n in a)__webpack_require__.o(a,n)&&(__webpack_require__.m[n]=a[n]);if(r)var l=r(__webpack_require__)}for(t&&t(_);o<s.length;o++)i=s[o],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(l)},_=self["webpackChunkTableCanoniser"]=self["webpackChunkTableCanoniser"]||[];_.forEach(t.bind(null,0)),_.push=t.bind(null,_.push.bind(_))}();var __webpack_exports__=__webpack_require__.O(void 0,[504],(function(){return __webpack_require__(96637)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.b48be4e5.js.map