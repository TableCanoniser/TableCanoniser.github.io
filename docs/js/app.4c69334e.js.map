{"version":3,"file":"js/app.4c69334e.js","mappings":"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","sources":["webpack://frontend/./node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://frontend/./src/App.vue?9c85","webpack://frontend/./src/App.vue","webpack://frontend/./src/grammar/grammar.ts","webpack://frontend/./src/grammar/handleSpec.ts","webpack://frontend/./src/store/table.ts","webpack://frontend/./src/components/InOutTable.vue?7f1b","webpack://frontend/./src/components/InOutTable.vue","webpack://frontend/./src/components/InOutTable.vue?cbe2","webpack://frontend/./src/components/CodeView.vue?243d","webpack://frontend/./src/components/CodeView.vue","webpack://frontend/./src/components/CodeView.vue?33e2","webpack://frontend/./src/components/Minimap.vue?557e","webpack://frontend/./src/components/Minimap.vue","webpack://frontend/./src/components/Minimap.vue?6362","webpack://frontend/./src/views/PanelView.vue?6324","webpack://frontend/./src/views/PanelView.vue","webpack://frontend/./src/views/PanelView.vue?f0ad","webpack://frontend/./src/App.vue?7ccd","webpack://frontend/./src/main.ts","webpack://frontend/./node_modules/typescript/lib/ sync","webpack://frontend/webpack/bootstrap","webpack://frontend/webpack/runtime/amd options","webpack://frontend/webpack/runtime/chunk loaded","webpack://frontend/webpack/runtime/compat get default export","webpack://frontend/webpack/runtime/define property getters","webpack://frontend/webpack/runtime/ensure chunk","webpack://frontend/webpack/runtime/get javascript chunk filename","webpack://frontend/webpack/runtime/get mini-css chunk filename","webpack://frontend/webpack/runtime/global","webpack://frontend/webpack/runtime/hasOwnProperty shorthand","webpack://frontend/webpack/runtime/load script","webpack://frontend/webpack/runtime/make namespace object","webpack://frontend/webpack/runtime/node module decorator","webpack://frontend/webpack/runtime/publicPath","webpack://frontend/webpack/runtime/jsonp chunk loading","webpack://frontend/webpack/startup"],"sourcesContent":["var map = {\n\t\"./af\": 22190,\n\t\"./af.js\": 22190,\n\t\"./ar\": 7218,\n\t\"./ar-dz\": 85785,\n\t\"./ar-dz.js\": 85785,\n\t\"./ar-kw\": 29417,\n\t\"./ar-kw.js\": 29417,\n\t\"./ar-ly\": 56904,\n\t\"./ar-ly.js\": 56904,\n\t\"./ar-ma\": 98617,\n\t\"./ar-ma.js\": 98617,\n\t\"./ar-ps\": 91318,\n\t\"./ar-ps.js\": 91318,\n\t\"./ar-sa\": 82699,\n\t\"./ar-sa.js\": 82699,\n\t\"./ar-tn\": 36789,\n\t\"./ar-tn.js\": 36789,\n\t\"./ar.js\": 7218,\n\t\"./az\": 23050,\n\t\"./az.js\": 23050,\n\t\"./be\": 8316,\n\t\"./be.js\": 8316,\n\t\"./bg\": 70310,\n\t\"./bg.js\": 70310,\n\t\"./bm\": 58884,\n\t\"./bm.js\": 58884,\n\t\"./bn\": 83469,\n\t\"./bn-bd\": 46672,\n\t\"./bn-bd.js\": 46672,\n\t\"./bn.js\": 83469,\n\t\"./bo\": 39118,\n\t\"./bo.js\": 39118,\n\t\"./br\": 13113,\n\t\"./br.js\": 13113,\n\t\"./bs\": 23626,\n\t\"./bs.js\": 23626,\n\t\"./ca\": 40921,\n\t\"./ca.js\": 40921,\n\t\"./cs\": 17799,\n\t\"./cs.js\": 17799,\n\t\"./cv\": 12828,\n\t\"./cv.js\": 12828,\n\t\"./cy\": 93521,\n\t\"./cy.js\": 93521,\n\t\"./da\": 56962,\n\t\"./da.js\": 56962,\n\t\"./de\": 93294,\n\t\"./de-at\": 16158,\n\t\"./de-at.js\": 16158,\n\t\"./de-ch\": 95960,\n\t\"./de-ch.js\": 95960,\n\t\"./de.js\": 93294,\n\t\"./dv\": 47963,\n\t\"./dv.js\": 47963,\n\t\"./el\": 3432,\n\t\"./el.js\": 3432,\n\t\"./en-au\": 20998,\n\t\"./en-au.js\": 20998,\n\t\"./en-ca\": 15931,\n\t\"./en-ca.js\": 15931,\n\t\"./en-gb\": 45930,\n\t\"./en-gb.js\": 45930,\n\t\"./en-ie\": 58081,\n\t\"./en-ie.js\": 58081,\n\t\"./en-il\": 71594,\n\t\"./en-il.js\": 71594,\n\t\"./en-in\": 23904,\n\t\"./en-in.js\": 23904,\n\t\"./en-nz\": 1507,\n\t\"./en-nz.js\": 1507,\n\t\"./en-sg\": 19409,\n\t\"./en-sg.js\": 19409,\n\t\"./eo\": 22177,\n\t\"./eo.js\": 22177,\n\t\"./es\": 84805,\n\t\"./es-do\": 39155,\n\t\"./es-do.js\": 39155,\n\t\"./es-mx\": 69791,\n\t\"./es-mx.js\": 69791,\n\t\"./es-us\": 76098,\n\t\"./es-us.js\": 76098,\n\t\"./es.js\": 84805,\n\t\"./et\": 96240,\n\t\"./et.js\": 96240,\n\t\"./eu\": 20391,\n\t\"./eu.js\": 20391,\n\t\"./fa\": 20612,\n\t\"./fa.js\": 20612,\n\t\"./fi\": 4220,\n\t\"./fi.js\": 4220,\n\t\"./fil\": 65570,\n\t\"./fil.js\": 65570,\n\t\"./fo\": 5466,\n\t\"./fo.js\": 5466,\n\t\"./fr\": 14461,\n\t\"./fr-ca\": 66306,\n\t\"./fr-ca.js\": 66306,\n\t\"./fr-ch\": 27081,\n\t\"./fr-ch.js\": 27081,\n\t\"./fr.js\": 14461,\n\t\"./fy\": 73484,\n\t\"./fy.js\": 73484,\n\t\"./ga\": 76957,\n\t\"./ga.js\": 76957,\n\t\"./gd\": 72978,\n\t\"./gd.js\": 72978,\n\t\"./gl\": 89866,\n\t\"./gl.js\": 89866,\n\t\"./gom-deva\": 65011,\n\t\"./gom-deva.js\": 65011,\n\t\"./gom-latn\": 84724,\n\t\"./gom-latn.js\": 84724,\n\t\"./gu\": 71601,\n\t\"./gu.js\": 71601,\n\t\"./he\": 79802,\n\t\"./he.js\": 79802,\n\t\"./hi\": 9358,\n\t\"./hi.js\": 9358,\n\t\"./hr\": 13907,\n\t\"./hr.js\": 13907,\n\t\"./hu\": 10218,\n\t\"./hu.js\": 10218,\n\t\"./hy-am\": 20533,\n\t\"./hy-am.js\": 20533,\n\t\"./id\": 52844,\n\t\"./id.js\": 52844,\n\t\"./is\": 97353,\n\t\"./is.js\": 97353,\n\t\"./it\": 6364,\n\t\"./it-ch\": 20774,\n\t\"./it-ch.js\": 20774,\n\t\"./it.js\": 6364,\n\t\"./ja\": 6008,\n\t\"./ja.js\": 6008,\n\t\"./jv\": 68221,\n\t\"./jv.js\": 68221,\n\t\"./ka\": 92417,\n\t\"./ka.js\": 92417,\n\t\"./kk\": 42071,\n\t\"./kk.js\": 42071,\n\t\"./km\": 76149,\n\t\"./km.js\": 76149,\n\t\"./kn\": 94572,\n\t\"./kn.js\": 94572,\n\t\"./ko\": 60659,\n\t\"./ko.js\": 60659,\n\t\"./ku\": 66285,\n\t\"./ku-kmr\": 59398,\n\t\"./ku-kmr.js\": 59398,\n\t\"./ku.js\": 66285,\n\t\"./ky\": 81609,\n\t\"./ky.js\": 81609,\n\t\"./lb\": 119,\n\t\"./lb.js\": 119,\n\t\"./lo\": 81748,\n\t\"./lo.js\": 81748,\n\t\"./lt\": 71973,\n\t\"./lt.js\": 71973,\n\t\"./lv\": 81347,\n\t\"./lv.js\": 81347,\n\t\"./me\": 53023,\n\t\"./me.js\": 53023,\n\t\"./mi\": 65747,\n\t\"./mi.js\": 65747,\n\t\"./mk\": 64341,\n\t\"./mk.js\": 64341,\n\t\"./ml\": 63840,\n\t\"./ml.js\": 63840,\n\t\"./mn\": 62058,\n\t\"./mn.js\": 62058,\n\t\"./mr\": 19182,\n\t\"./mr.js\": 19182,\n\t\"./ms\": 45197,\n\t\"./ms-my\": 89136,\n\t\"./ms-my.js\": 89136,\n\t\"./ms.js\": 45197,\n\t\"./mt\": 36408,\n\t\"./mt.js\": 36408,\n\t\"./my\": 51683,\n\t\"./my.js\": 51683,\n\t\"./nb\": 53141,\n\t\"./nb.js\": 53141,\n\t\"./ne\": 29344,\n\t\"./ne.js\": 29344,\n\t\"./nl\": 44703,\n\t\"./nl-be\": 84641,\n\t\"./nl-be.js\": 84641,\n\t\"./nl.js\": 44703,\n\t\"./nn\": 79873,\n\t\"./nn.js\": 79873,\n\t\"./oc-lnc\": 61217,\n\t\"./oc-lnc.js\": 61217,\n\t\"./pa-in\": 24612,\n\t\"./pa-in.js\": 24612,\n\t\"./pl\": 24457,\n\t\"./pl.js\": 24457,\n\t\"./pt\": 1089,\n\t\"./pt-br\": 79146,\n\t\"./pt-br.js\": 79146,\n\t\"./pt.js\": 1089,\n\t\"./ro\": 45950,\n\t\"./ro.js\": 45950,\n\t\"./ru\": 27292,\n\t\"./ru.js\": 27292,\n\t\"./sd\": 56774,\n\t\"./sd.js\": 56774,\n\t\"./se\": 87493,\n\t\"./se.js\": 87493,\n\t\"./si\": 3761,\n\t\"./si.js\": 3761,\n\t\"./sk\": 49711,\n\t\"./sk.js\": 49711,\n\t\"./sl\": 88558,\n\t\"./sl.js\": 88558,\n\t\"./sq\": 8633,\n\t\"./sq.js\": 8633,\n\t\"./sr\": 90688,\n\t\"./sr-cyrl\": 47903,\n\t\"./sr-cyrl.js\": 47903,\n\t\"./sr.js\": 90688,\n\t\"./ss\": 31991,\n\t\"./ss.js\": 31991,\n\t\"./sv\": 27020,\n\t\"./sv.js\": 27020,\n\t\"./sw\": 15891,\n\t\"./sw.js\": 15891,\n\t\"./ta\": 45714,\n\t\"./ta.js\": 45714,\n\t\"./te\": 30206,\n\t\"./te.js\": 30206,\n\t\"./tet\": 24768,\n\t\"./tet.js\": 24768,\n\t\"./tg\": 28276,\n\t\"./tg.js\": 28276,\n\t\"./th\": 57977,\n\t\"./th.js\": 57977,\n\t\"./tk\": 56928,\n\t\"./tk.js\": 56928,\n\t\"./tl-ph\": 8046,\n\t\"./tl-ph.js\": 8046,\n\t\"./tlh\": 41361,\n\t\"./tlh.js\": 41361,\n\t\"./tr\": 64367,\n\t\"./tr.js\": 64367,\n\t\"./tzl\": 10627,\n\t\"./tzl.js\": 10627,\n\t\"./tzm\": 12636,\n\t\"./tzm-latn\": 98148,\n\t\"./tzm-latn.js\": 98148,\n\t\"./tzm.js\": 12636,\n\t\"./ug-cn\": 68823,\n\t\"./ug-cn.js\": 68823,\n\t\"./uk\": 40461,\n\t\"./uk.js\": 40461,\n\t\"./ur\": 41366,\n\t\"./ur.js\": 41366,\n\t\"./uz\": 83454,\n\t\"./uz-latn\": 18374,\n\t\"./uz-latn.js\": 18374,\n\t\"./uz.js\": 83454,\n\t\"./vi\": 78572,\n\t\"./vi.js\": 78572,\n\t\"./x-pseudo\": 80464,\n\t\"./x-pseudo.js\": 80464,\n\t\"./yo\": 93709,\n\t\"./yo.js\": 93709,\n\t\"./zh-cn\": 65873,\n\t\"./zh-cn.js\": 65873,\n\t\"./zh-hk\": 17549,\n\t\"./zh-hk.js\": 17549,\n\t\"./zh-mo\": 52240,\n\t\"./zh-mo.js\": 52240,\n\t\"./zh-tw\": 90405,\n\t\"./zh-tw.js\": 90405\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 35358;","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"wrapper\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_panel_view = _resolveComponent(\"panel-view\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_panel_view)\n  ]))\n}","<template>\n  <div class=\"wrapper\">\n    <panel-view />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport PanelView from \"./views/PanelView.vue\";\n\nexport default defineComponent({\n  name: \"overView\",\n  components: {\n    PanelView,\n  },\n});\n</script>\n\n<style lang=\"less\">\n* {\n  margin: 0;\n  padding: 0;\n}\n\n.wrapper {\n  display: flex;\n  flex-flow: column;\n  background-color: #fffffe;\n  height: 100vh;\n  width: 100vw;\n  overflow-x: hidden;\n  overflow-y: hidden;\n}\n</style>\n","// The Declarative Grammar v0.3.1\n\ntype CellValueType = string | number;\n\nenum ValueType {\n    String = 'TableTidier.String',\n    Number = 'TableTidier.Number',\n    None = 'TableTidier.None',\n}\n\n/**\n * Represents the matched index of a matched area\n * - `templateRef`: The template reference that matches this area\n * - `instanceIndex`: The instance index of this area that matches the templateRef within the parent area\n * - `xIndex`: The x-axis index of this area within the parent area\n * - `yIndex`: The y-axis index of this area within the parent area\n */\ninterface MatchedIndex {\n    templateRef: number[];\n    instanceIndex: number;\n    xIndex: number;\n    yIndex: number;\n}\n\n/**\n * Represents a single cell within an area\n * - `xOffset`: The x-axis offset of the cell within the area\n * - `yOffset`: The y-axis offset of the cell within the area\n * - `value`: The value of the cell\n */\ninterface AreaCell {\n    xOffset: number;\n    yOffset: number;\n    value: CellValueType;\n}\n\ninterface CellPosi {\n    x: number;\n    y: number;\n}\n\ninterface CellInfo extends CellPosi {\n    value: CellValueType;\n}\n\ntype Table2D = CellValueType[][];\n\n// Function types\n\n/**\n * A function type that calculates an offset based on the current area information and the root area information.\n * @param currentArea - The current area information.\n * @param rootArea - The root area information.\n * @returns The calculated offset.\n */\ntype offsetFn = (currentArea: AreaInfo, rootArea: AreaInfo) => number;\n\n/**\n * A function type that checks if a cell value meets a custom condition.\n * @param value - The value of the cell.\n * @returns A boolean indicating whether the cell value meets the condition.\n */\ntype checkValueFn = (value: CellValueType) => boolean;\n\n/**\n * A function type that maps the cells in an area to their corresponding target columns.\n * @param currentAreaTbl - The current area table.\n * @returns An array of target column names or null values.\n */\ntype mapColsFn = (currentAreaTbl: Table2D) => (string | null)[];\n\n/**\n * A function type that maps a context value to a target column.\n * @param ctxCells - The info (position and value) of the context cells.\n * @returns The name of the target column or null.\n */\ntype mapColbyContextFn = (ctxCells: CellInfo[]) => string | null;\n\n/**\n * A function type that selects a range of cells based on the current area information and the root area information.\n * @param cell - The current cell relative to the current area.\n * @param currentArea - The current area information.\n * @param rootArea - The root area information.\n * @returns An array of cell selections.\n */\ntype contextPosiFn = (cell: AreaCell, currentArea: AreaInfo, rootArea: AreaInfo) => CellSelection[];\n\n/**\n * A function type that determines the layer of an area based on its current area information.\n * @param currentArea - The current area information.\n * @returns The layer number of the area.\n */\ntype areaLayerFn = (currentArea: AreaInfo) => number;\n\n/**\n * Represents the information of a selected area within the table\n * - `parent`: The parent area of this area\n * - `areaLayer`: The layer level of this area within the root area\n * - `templateRef`: The template reference that matches this area\n * - `instanceIndex`: The instance index of this area that matches the templateRef within the parent area\n * - `xIndex`: The x-axis index of this area within the parent area\n * - `yIndex`: The y-axis index of this area within the parent area\n * - `xOffset`: The x-axis offset of this area within the parent area\n * - `yOffset`: The y-axis offset of this area within the parent area\n * - `x`: The x-coordinate of this area within the entire table\n * - `y`: The y-coordinate of this area within the entire table\n * - `width`: The width of this area\n * - `height`: The height of this area\n * - `areaTbl`: All cells within this area\n * - `children`: The child areas of this area\n */\ninterface AreaInfo extends MatchedIndex {\n    parent: AreaInfo | null;\n    areaLayer: number;\n    xOffset: number;\n    yOffset: number;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    areaTbl: Table2D;\n    children: AreaInfo[];\n}\n\n/**\n * Represents the selection of a cell within the table\n * - `referenceAreaLayer`: The reference area layer for selection, default is 'current'\n * - `referenceAreaPosi`: The reference area position for selection, default is 'topLeft'\n * - `xOffset`: The x-axis offset relative to the reference area, default is 0\n * - `yOffset`: The y-axis offset relative to the reference area, default is 0\n */\ninterface CellSelection {\n    referenceAreaLayer?: 'current' | 'parent' | 'root' | areaLayerFn;\n    referenceAreaPosi?: 'topLeft' | 'bottomLeft' | 'topRight' | 'bottomRight';\n    xOffset?: number | offsetFn;\n    yOffset?: number | offsetFn;\n}\n\n/**\n * Represents a constraint on a cell's value\n * - `valueCstr`: The value constraint.\n *   - `CellValueType`: Specifies that the cell's value must be equal to the provided value.\n *   - `ValueType`: Specifies that the cell's value must be of the specified type (`String` or `Number`).\n *   - `checkValueFn`: Specifies a custom function to check if the cell's value meets certain conditions.\n */\ninterface CellConstraint extends CellSelection {\n    valueCstr: CellValueType | ValueType | checkValueFn;\n}\n\n/**\n * ContextTransform specifies how to derive the target column for a cell based on its context cell.\n * \n * - `position`: Defines the location of the context cell relative to the current cell.\n *   - 'top': The context cell is located directly above the current cell.\n *   - 'bottom': The context cell is located directly below the current cell.\n *   - 'left': The context cell is located directly to the left of the current cell.\n *   - 'right': The context cell is located directly to the right of the current cell.\n *   - `contextPosiFn`: A custom function to determine the position of the context cell.\n * \n * - `targetCol`: Determines how to derive the target column based on the context cell's value.\n *   - 'cellValue': Uses the context cell's value as the target column. If the context cell's value is null or empty, the target column will be null, and this cell will not be transformed to the output table.\n *   - `mapColbyContextFn`: A custom function to map the context cell's value to a specific target column. If the function returns null, the cell will not be transformed to the output table.\n */\ninterface ContextTransform {\n    position: 'top' | 'bottom' | 'left' | 'right' | contextPosiFn;\n    targetCol: 'cellValue' | mapColbyContextFn;\n}\n\n/**\n * The main template for defining the transformation rules\n * - `startCell`: The starting cell for the selection\n * - `size`: The size of the selection area\n *   - `width`: The width of the selection area, 'toParentX' means the distance from the startCell to the parent's x-axis end; null means no width constraint, default is 1\n *   - `height`: The height of the selection area, 'toParentY' means the distance from the startCell to the parent's y-axis end; null means no height constraint, default is 1\n * - `constraints`: Constraints to apply to the cells within the selection area\n * - `traverse`: The traversal direction for the selection area\n *   - `xDirection`: The x-axis traversal direction: 'after' means traversing after the startCell; 'before' means traversing before the startCell; 'whole' means traversing the entire area; default is null, meaning no traversal\n *   - `yDirection`: The y-axis traversal direction: 'after' means traversing after the startCell; 'before' means traversing before the startCell; 'whole' means traversing the entire area; default is null, meaning no traversal\n * - `transform`: The transformation rules for the selection area\n *   - `context`: The context-based transformation for the selection area\n *   - `targetCols`: The target columns for the transformation, which can be an array (position-based transformation), 'context' (context-based transformation), or a custom function (value-based transformation)\n * - `fill`: Fill value for the cells within the selection area to ensure all columns have the same number of cells\n * - `children`: The child templates for nested selections\n */\ninterface TableTidierTemplate {\n    startCell: CellSelection;\n    size?: {\n        width?: number | 'toParentX' | null;\n        height?: number | 'toParentY' | null;\n    };\n    constraints?: CellConstraint[];\n    traverse?: {\n        xDirection?: null | 'after' | 'before' | 'whole';\n        yDirection?: null | 'after' | 'before' | 'whole';\n    };\n    transform?: {\n        context?: ContextTransform | null;\n        targetCols: (string | null)[] | 'context' | mapColsFn;\n    } | null;\n    fill?: CellValueType | 'forward' | null;\n    children?: TableTidierTemplate[];\n}\n\n\n/********************************************************************************/\n\n// Ensure all properties are defined\ntype NonUndefined<T> = T extends undefined ? never : T;\ntype AllParams<T> = {\n    [K in keyof T]-?: NonUndefined<T[K]> extends object ? AllParams<NonUndefined<T[K]>> : NonUndefined<T[K]>;\n};\n\n/*\ninterface Test {\n    param1?: string;\n    param2?: number;\n    param3?: { \"P1\": boolean, \"P2\"?: number };\n}\nlet aInfo: Test = {\n    param1: 'value1',\n    param2: 42,\n    param3: {\n        P1: true\n    },\n};\nlet aa = aInfo as AllParams<Test>;\nconsole.log(aa.param3.P2);\n*/\n\n// Construct a specification with default values\n\n// default values\nconst DEFAULT_WIDTH = 1;\nconst DEFAULT_HEIGHT = 1;\nconst DEFAULT_REFERENCE_AREA_LAYER = 'current';\nconst DEFAULT_REFERENCE_AREA_POSI = 'topLeft';\nconst DEFAULT_X_OFFSET = 0;\nconst DEFAULT_Y_OFFSET = 0;\nconst DEFAULT_X_DIRECTION = null;\nconst DEFAULT_Y_DIRECTION = null;\nconst DEFAULT_CONTEXT_POSITION = 'top';\nconst DEFAULT_TARGET_COL = 'cellValue';\nconst DEFAULT_TARGET_COLS = [] as (string | null)[];\nconst DEFAULT_VALUE_CSTR = ValueType.String;\nconst DEFAULT_FILL = null;\n\nfunction completeCellSelection(selection: CellSelection): CellSelection {\n    return {\n        referenceAreaLayer: selection.referenceAreaLayer || DEFAULT_REFERENCE_AREA_LAYER,\n        referenceAreaPosi: selection.referenceAreaPosi || DEFAULT_REFERENCE_AREA_POSI,\n        xOffset: selection.xOffset || DEFAULT_X_OFFSET,\n        yOffset: selection.yOffset || DEFAULT_Y_OFFSET\n    };\n}\n\nfunction completeCellConstraint(constraint: CellConstraint): CellConstraint {\n    const completedSelection = completeCellSelection(constraint);\n    return {\n        ...completedSelection,\n        valueCstr: constraint.valueCstr || DEFAULT_VALUE_CSTR\n    };\n}\n\nfunction completeContextTransform(transform: ContextTransform): ContextTransform {\n    return {\n        position: transform.position || DEFAULT_CONTEXT_POSITION,\n        targetCol: transform.targetCol || DEFAULT_TARGET_COL\n    };\n}\n\nfunction completeTemplate(template: TableTidierTemplate): TableTidierTemplate {\n    return {\n        startCell: completeCellSelection(template.startCell),\n        size: {\n            width: template.size?.width === undefined ? DEFAULT_WIDTH : template.size.width,\n            height: template.size?.height === undefined ? DEFAULT_HEIGHT : template.size.height\n        },\n        constraints: template.constraints?.map(completeCellConstraint) || [],\n        traverse: {\n            xDirection: template.traverse?.xDirection === undefined ? DEFAULT_X_DIRECTION : template.traverse.xDirection,\n            yDirection: template.traverse?.yDirection === undefined ? DEFAULT_Y_DIRECTION : template.traverse.yDirection\n        },\n        transform: template.transform\n            ? {\n                context: template.transform.context ? completeContextTransform(template.transform.context) : null,\n                targetCols: template.transform.targetCols || DEFAULT_TARGET_COLS\n            }\n            : null,\n        fill: template.fill === undefined ? DEFAULT_FILL : template.fill,\n        children: template.children?.map(completeTemplate) || []\n    };\n}\n\n// Complete the specification with default values\nfunction completeSpecification(specification: TableTidierTemplate): AllParams<TableTidierTemplate> {\n    return completeTemplate(specification) as AllParams<TableTidierTemplate>;\n}\n\n\nexport {\n    Table2D, TableTidierTemplate, CellValueType, CellConstraint, CellPosi, ValueType, CellInfo, AllParams, AreaInfo, MatchedIndex, CellSelection, offsetFn, completeSpecification, completeCellSelection\n}","import { Table2D, TableTidierTemplate, CellValueType, CellConstraint, CellPosi, ValueType, CellInfo, AllParams, AreaInfo, MatchedIndex, CellSelection, offsetFn, completeSpecification, completeCellSelection } from \"./grammar\";\n\nexport function sortWithCorrespondingArray(A: any[], B: string[], sortOrder: 'asc' | 'desc'): string[] {\n    // 创建一个数组包含元素及其对应的索引\n    let indexedArray = A.map((value, index) => ({ value, index }));\n\n    // 按照A数组的值进行排序\n    indexedArray.sort((a, b) => {\n        if (sortOrder === 'asc') {\n            return a.value - b.value;\n        } else {\n            return b.value - a.value;\n        }\n    });\n\n    // 根据排序后的索引重新排列B数组\n    let sortedB = indexedArray.map(item => B[item.index]);\n\n    return sortedB;\n}\n\nexport function serialize(obj: any): string {\n    const seen = new WeakSet();\n\n    return JSON.stringify(obj, function (key, value) {\n        if (typeof value === 'object' && value !== null) {\n            if (seen.has(value)) {\n                // 如果之前见过这个对象，则返回一个标记字符串\n                return `[Circular reference: ${key}]`;\n            }\n            seen.add(value);\n        }\n        return value;\n    }, 2);\n}\n\n// Helper function to evaluate constraints\nconst evaluateConstraint = (cellValue: CellValueType, constraint: CellConstraint): boolean => {\n    if (typeof constraint.valueCstr === 'function') {\n        return constraint.valueCstr(cellValue);\n    }\n    if (constraint.valueCstr === ValueType.String) {\n        return typeof cellValue === 'string' && cellValue !== '' && isNaN(Number(cellValue));\n    }\n    if (constraint.valueCstr === ValueType.Number) {\n        return typeof cellValue === 'number' || (typeof cellValue === 'string' && cellValue !== '' && !isNaN(Number(cellValue)));\n    }\n    if (constraint.valueCstr === ValueType.None) {\n        return cellValue === null || cellValue === '';\n    }\n    return cellValue === constraint.valueCstr;\n};\n\nconst calculateOffset = (offset: number | offsetFn, currentArea: AreaInfo, rootArea: AreaInfo): number => {\n    return typeof offset === 'number' ? offset : offset(currentArea, rootArea);\n};\n\nconst getCellBySelect = (select: AllParams<CellSelection>, currentArea: AreaInfo, rootArea: AreaInfo): CellInfo | null => {\n    let area: AreaInfo = currentArea;\n    if (select.referenceAreaLayer === 'current') {\n        area = currentArea;\n    } else if (select.referenceAreaLayer === 'root') {\n        area = rootArea;\n    } else if (select.referenceAreaLayer === 'parent') {\n        area = currentArea.parent!;\n    } else {\n        const layer = currentArea.areaLayer - select.referenceAreaLayer(currentArea);\n        for (let li = 0; li < layer; li++) {\n            area = area.parent!;\n        }\n    }\n\n    let cellPosi: CellPosi = {\n        x: area.x + calculateOffset(select.xOffset, currentArea, rootArea),\n        y: area.y + calculateOffset(select.yOffset, currentArea, rootArea)\n    };  // topLeft\n\n    if (select.referenceAreaPosi === 'bottomLeft') {\n        cellPosi.y += area.height - 1\n    }\n    else if (select.referenceAreaPosi === 'topRight') {\n        cellPosi.x += area.width - 1\n    }\n    else if (select.referenceAreaPosi === 'bottomRight') {\n        cellPosi.x += area.width - 1\n        cellPosi.y += area.height - 1\n    }\n\n    // 判断是否越界\n    if (cellPosi.x < 0 || cellPosi.y < 0 || cellPosi.x >= rootArea.width || cellPosi.y >= rootArea.height) {\n        throw new Error(`Invalid cell selection:\\n Table size (${rootArea.width}, ${rootArea.height}), Position (${cellPosi.x}, ${cellPosi.y}) is out of bounds.`);\n    }\n\n    return {\n        ...cellPosi,\n        value: rootArea.areaTbl[cellPosi.y][cellPosi.x],\n    };\n\n};\n\nconst calculateSize = (size: number | 'toParentX' | 'toParentY' | null, startX: number, startY: number, currentArea: AreaInfo): number => {\n    if (typeof size === 'number') {\n        return size;\n    }\n    if (size === 'toParentX') {\n        return currentArea.width - startX;\n    }\n    if (size === 'toParentY') {\n        return currentArea.height - startY;\n    }\n    // 如果为 null，返回 1\n    return 1;\n};\n\nconst getSubArea = (table: Table2D, x: number, y: number, width: number, height: number): Table2D => {\n    const subArea: Table2D = [];\n    for (let i = y; i < y + height; i++) {\n        const row = table[i].slice(x, x + width);\n        subArea.push(row);\n    }\n    return subArea;\n}\n\n// 如果tidyData中的列长短不一样，则使用 template.fill 填充所有短的列，使每一列都有相同的长度\nconst fillColumns = (tidyData: { [key: string]: CellInfo[] }, fill: CellValueType | 'forward' | null) => {\n    if (fill === null) return;\n    // 获取所有列的最大长度\n    const maxLength = Math.max(...Object.values(tidyData).map(column => column.length));\n    // 对每一列进行填充处理\n    for (const key in tidyData) {\n        const column = tidyData[key];\n        const fillValue = fill === 'forward' ? column[column.length - 1] : {\n            x: -1,\n            y: -1,\n            value: fill\n        } as CellInfo;\n\n        // 如果列长度小于最大长度，则进行填充\n        while (column.length < maxLength) {\n            column.push(fillValue);\n        }\n    }\n}\n\nconst traverseArea = (template: AllParams<TableTidierTemplate>, startX: number, startY: number, endX: number, endY: number, width: number, height: number, index: MatchedIndex, currentArea: AreaInfo, rootArea: AreaInfo, tidyData: { [key: string]: CellInfo[] }) => {\n\n    let currentStartX = startX;\n    let currentEndX = startX + width - 1;\n    let currentStartY = startY;\n    let currentEndY = startY + height - 1;\n    let tmpArea: AreaInfo | null = null;\n\n    while (currentEndY <= endY) {\n        const areaHeight = currentEndY - currentStartY + 1;\n        while (currentEndX <= endX) {\n            const areaWidth = currentEndX - currentStartX + 1;\n            tmpArea = matchArea(template, currentStartX, currentStartY, areaWidth, areaHeight, index, currentArea, rootArea, tidyData);\n            // if (currentArea.templateRef.length === 0)\n            //     console.log(\"after match\", currentStartX, currentStartY, areaWidth, areaHeight, tmpArea != null);\n            if (tmpArea === null) {\n                // 如果没有找到，则移动到下一列\n                currentEndX += 1\n                if (template.size.width != null) {\n                    currentStartX += 1;\n                } else if (currentEndX === endX) {\n                    // 宽度可变且已经到了最后一列\n                    currentStartX += 1\n                    currentEndX = currentStartX\n                }\n            } else {\n                index.instanceIndex += 1;\n                if (template.traverse.xDirection === null) break;\n                index.xIndex += 1;\n                currentStartX += areaWidth\n                currentEndX = currentStartX + width - 1;\n            }\n        }\n        index.xIndex = 0;\n        // 换行，列从 0 开始\n        if (tmpArea === null) {\n            // 如果没有找到，则移动到下一行\n            currentEndY += 1\n            if (template.size.height != null) {\n                currentStartY += 1\n            } else if (currentEndY === endY) {\n                // 高度可变且已经到了最后一行\n                currentStartY += 1\n                currentEndY = currentStartY\n            }\n        } else {\n            if (template.traverse.yDirection === null) break;\n            index.yIndex += 1;\n            currentStartY += areaHeight\n            currentEndY = currentStartY + height - 1;\n        }\n        currentStartX = startX;\n        currentEndX = startX + width - 1;\n\n    }\n}\n\n\nconst matchArea = (template: AllParams<TableTidierTemplate>, xOffset: number, yOffset: number, width: number, height: number, index: MatchedIndex, currentArea: AreaInfo, rootArea: AreaInfo, tidyData: { [key: string]: CellInfo[] }): AreaInfo | null => {\n\n    let x = currentArea.x + xOffset, y = currentArea.y + yOffset;\n\n    if (template.startCell.referenceAreaLayer !== \"current\") {\n        const cellInfo = getCellBySelect(template.startCell, currentArea, rootArea);\n        if (cellInfo === null) {\n            return null;\n        };\n        x = cellInfo.x;\n        y = cellInfo.y;\n    }\n\n    const tmpArea: AreaInfo = {\n        parent: currentArea,\n        areaLayer: currentArea.areaLayer + 1,\n        templateRef: index.templateRef.slice(),\n        instanceIndex: index.instanceIndex,\n        xIndex: index.xIndex,\n        yIndex: index.yIndex,\n        xOffset,\n        yOffset,\n        x,\n        y,\n        width,\n        height,\n        areaTbl: getSubArea(rootArea.areaTbl, x, y, width, height),\n        children: []\n    }\n    for (let cstr of template.constraints) {\n        const cellInfo = getCellBySelect(cstr, tmpArea, rootArea);\n        if (cellInfo === null) {\n            return null;\n        }\n        if (!evaluateConstraint(cellInfo.value, cstr)) return null;\n    }\n    currentArea.children.push(tmpArea);\n\n    transformArea(template, tmpArea, rootArea, tidyData);\n    return tmpArea;\n};\n\n\nconst transformArea = (template: AllParams<TableTidierTemplate>, currentArea: AreaInfo, rootArea: AreaInfo, tidyData: { [key: string]: CellInfo[] }) => {\n\n    const cellArray = currentArea.areaTbl.flat();\n    if (template.transform) {\n        const context = template.transform.context;\n        const ctxCols: (string | null)[] = []\n        const ctxCellsInfo: CellInfo[][] = [];\n        if (context) {\n            const ctxSelections: CellSelection[][] = [];\n            if (context.position === 'top') {\n                currentArea.areaTbl.forEach((row, ri) => {\n                    row.forEach((cell, ci) => {\n                        ctxSelections.push([completeCellSelection({\n                            xOffset: ci,\n                            yOffset: ri - 1,\n                        })]);\n                    })\n                })\n            } else if (context.position === 'bottom') {\n                currentArea.areaTbl.forEach((row, ri) => {\n                    row.forEach((cell, ci) => {\n                        ctxSelections.push([completeCellSelection({\n                            xOffset: ci,\n                            yOffset: ri + 1,\n                        })]);\n                    })\n                })\n            } else if (context.position === 'left') {\n                currentArea.areaTbl.forEach((row, ri) => {\n                    row.forEach((cell, ci) => {\n                        ctxSelections.push([completeCellSelection({\n                            xOffset: ci - 1,\n                            yOffset: ri,\n                        })]);\n                    })\n                })\n            } else if (context.position === 'right') {\n                currentArea.areaTbl.forEach((row, ri) => {\n                    row.forEach((cell, ci) => {\n                        ctxSelections.push([completeCellSelection({\n                            xOffset: ci + 1,\n                            yOffset: ri,\n                        })]);\n                    })\n                })\n            } else {\n                const ctxPosiFn = context.position\n                currentArea.areaTbl.forEach((row, ri) => {\n                    row.forEach((cell, ci) => {\n                        const customSelections = ctxPosiFn({\n                            xOffset: ci,\n                            yOffset: ri,\n                            value: cell\n                        }, currentArea, rootArea);\n                        const customSelectionsWithDefaults = customSelections.map(selection => completeCellSelection(selection));\n                        ctxSelections.push(customSelectionsWithDefaults);\n                    })\n                })\n            }\n\n            if (ctxSelections.length > 0 && ctxSelections[0].length > 0) {\n                ctxSelections.forEach((cellCtxs) => {\n                    const cellCtxsInfo: CellInfo[] = [];\n                    cellCtxs.forEach((selection) => {\n                        const cell = getCellBySelect(selection as AllParams<CellSelection>, currentArea, rootArea);\n                        if (cell === null) {\n                            return null;\n                        }\n                        cellCtxsInfo.push(cell);\n                    })\n                    ctxCellsInfo.push(cellCtxsInfo);\n                });\n            } else {\n                console.log('No context cells found');\n            }\n\n            if (context.targetCol === 'cellValue') {\n                ctxCellsInfo.forEach((cellCtxsInfo) => {\n                    ctxCols.push(cellCtxsInfo[0].value.toString());\n                })\n            } else {\n                const customMapColbyCxt = context.targetCol\n                ctxCellsInfo.forEach((ctxCells) => {\n                    ctxCols.push(customMapColbyCxt(ctxCells));\n                })\n            }\n        }\n\n        let transformedCols: (string | null)[];\n        if (typeof template.transform.targetCols === 'object') {\n            transformedCols = template.transform.targetCols\n        } else if (template.transform.targetCols === 'context') {\n            transformedCols = ctxCols\n        } else {\n            transformedCols = template.transform.targetCols(currentArea.areaTbl);\n        }\n        transformedCols.forEach((targetCol, index) => {\n            if (targetCol) {\n                const cellInfo: CellInfo = {\n                    x: currentArea.x + index % currentArea.width,\n                    y: currentArea.y + Math.floor(index / currentArea.width),\n                    value: cellArray[index],\n                };\n                if (tidyData.hasOwnProperty(targetCol)) {\n                    tidyData[targetCol].push(cellInfo);\n                } else {\n                    tidyData[targetCol] = [cellInfo];\n                }\n            }\n        })\n    }\n}\n\n\n// Recursive function to process a template\nconst processTemplate = (template: AllParams<TableTidierTemplate>, currentArea: AreaInfo, rootArea: AreaInfo, tidyData: { [key: string]: CellInfo[] }, templateIndex: number = 0) => {\n\n    const index: MatchedIndex = {\n        templateRef: [...currentArea.templateRef, templateIndex],\n        instanceIndex: 0,\n        xIndex: 0,\n        yIndex: 0\n    };\n\n    const xDirection = template.traverse.xDirection;\n    const yDirection = template.traverse.yDirection;\n\n\n    const startCell = getCellBySelect(template.startCell, currentArea, rootArea);\n    if (startCell === null) {\n        return null;\n    };\n\n    const xOffset = startCell.x - currentArea.x;\n    const yOffset = startCell.y - currentArea.y;\n\n    // Calculate size\n    const width = calculateSize(template.size.width, xOffset, yOffset, currentArea);\n    const height = calculateSize(template.size.height, xOffset, yOffset, currentArea);\n\n    let startX, startY, endX, endY;\n\n    if (xDirection === 'before') {\n        startX = 0;\n        endX = xOffset;\n    } else if (xDirection === 'after') {\n        startX = xOffset;\n        endX = currentArea.width - 1;\n    } else if (xDirection === 'whole') {\n        startX = 0;\n        endX = currentArea.width - 1;\n    } else {\n        startX = xOffset;\n        if (template.size.width === null) endX = currentArea.width - 1;\n        else endX = startX + width - 1;\n    }\n    if (yDirection === 'before') {\n        startY = 0;\n        endY = yOffset;\n    } else if (yDirection === 'after') {\n        startY = yOffset;\n        endY = currentArea.height - 1;\n    } else if (yDirection === 'whole') {\n        startY = 0;\n        endY = currentArea.height - 1;\n    } else {\n        startY = yOffset;\n        if (template.size.height === null) endY = currentArea.height - 1;\n        else endY = startY + height - 1;\n    }\n\n    // console.log(startX, startY, endX, endY, width, height);\n\n    traverseArea(template, startX, startY, endX, endY, width, height, index, currentArea, rootArea, tidyData);\n\n    for (let areaChild of currentArea.children) {\n        template.children.forEach((templateChild, ti) => {\n            processTemplate(templateChild, areaChild, rootArea, tidyData, ti);\n        });\n        fillColumns(tidyData, template.fill);\n    }\n}\n\ninterface TidyResult {\n    tidyTbl: { [key: string]: CellValueType[] },\n    in2out: { [key: string]: string[] },\n    out2in: {\n        cells: { [key: string]: string },\n        cols: string[][],\n        rows: string[][]\n    }\n}\n\nexport function transformTable(table: Table2D, spec: TableTidierTemplate) {\n\n    const specWithDefaults = completeSpecification(spec);\n    // console.log(JSON.stringify(specWithDefaults, null, 2));\n\n    // Create initial AreaInfo for the root\n    const rootArea: AreaInfo = {\n        parent: null,\n        areaLayer: 0,\n        templateRef: [],\n        instanceIndex: 0,\n        xIndex: 0,\n        yIndex: 0,\n        xOffset: 0,\n        yOffset: 0,\n        x: 0,\n        y: 0,\n        width: table[0].length,\n        height: table.length,\n        areaTbl: table,\n        children: []\n    };\n\n    const tidyresul: TidyResult = {\n        tidyTbl: {},\n        in2out: {},\n        out2in: {\n            cells: {},\n            cols: [],\n            rows: []\n        }\n    };\n\n    const tidyData: { [key: string]: CellInfo[] } = {}\n\n    processTemplate(specWithDefaults, rootArea, rootArea, tidyData);\n\n    return { rootArea, tidyData };\n}","import { defineStore } from 'pinia'\nimport Handsontable from \"handsontable\";\nimport * as d3 from 'd3';\nimport { shallowRef } from 'vue';\n\nimport { Table2D, TableTidierTemplate, ValueType, CellInfo } from \"@/grammar/grammar\"\nimport { transformTable, sortWithCorrespondingArray } from \"@/grammar/handleSpec\"\n\nimport { message } from 'ant-design-vue';\n\nimport * as monaco from \"monaco-editor\";\nimport * as ts from \"typescript\";\n\n// import caseData from \"../../public/cases.json\";\n// import case1Data from \"../../public/case1/data.json\";\n\n// type Posi = [number, number];\n\n// const caseList = [\"case1\", \"case2\", \"case3\"]\n\nexport interface TblVisData {\n  input_tbl: string[][];\n  output_tbl: string[][];\n  output_col: string[];\n  in2out: { [key: string]: string[] }\n  out2in: {\n    cells: { [key: string]: string },\n    cols: string[][],\n    rows: string[][]\n  },\n  ambiguous_posi?: { [key: string]: number[][] },\n  [key: string]: any  // Index signature, allowing other fields\n}\n\nexport interface TblCell {\n  row: number;\n  col: number;\n  className?: string;\n}\n\nconst color_config: { [key: string]: { [key: string]: string } } = {\n  \"posi-mapping\": {\n    fill: '#37bc6c',\n    stroke: '#37bc6c',\n    text: '#fff',\n  },\n  \"ambiguous-cell\": {\n    fill: '#83e4aa',\n    stroke: '#83e4aa',\n    text: '#e91010',\n  },\n  \"determined-cell\": {\n    fill: '#37bc6c',\n    stroke: '#37bc6c',\n    text: '#e91010',\n    weight: 'bold',\n  },\n  \"default\": {\n    fill: '#f9f7ff',\n    stroke: '#cccccc',\n    text: '#000',\n  },\n}\n\n// define and expose a store\nexport const useTableStore = defineStore('table', {\n  // data\n  state() {\n    return {\n      // cases: caseData as { [key: string]: TblVisData },\n      caseList: [\"case1\", \"case2\", \"case3\", \"case4\", \"case5\"],\n      currentCase: '', // caseList[0],\n      caseData: {} as TblVisData, //case1Data as TblVisData,\n      editor: {\n        mapping_spec: {\n          code: '',\n          instance: shallowRef<monaco.editor.IStandaloneCodeEditor | null>(null)\n        },\n        transform_script: {\n          code: '',\n          instance: shallowRef<monaco.editor.IStandaloneCodeEditor | null>(null)\n        }\n      },\n      input_tbl: {\n        instance: {} as Handsontable,\n        cells: [] as [number, number][],  // highlighted cells\n        tbl: shallowRef<Table2D>([]),\n        in2out: shallowRef<{ [key: string]: string[] }>({}),\n      },\n      output_tbl: {\n        instance: {} as Handsontable,\n        cells: [] as [number, number][], // highlighted cells\n        tbl: shallowRef<Table2D>([]),\n        cols: shallowRef<string[]>([]),\n        out2in: shallowRef<{\n          cells: { [key: string]: string },\n          cols: string[][],\n          rows: string[][]\n        }>({\n          cells: {},\n          cols: [],\n          rows: [],\n        }),\n      },\n    }\n  },\n  // methods\n  actions: {\n    async loadCaseData(caseN: string) {\n      let prompt: string[] = [];\n      let case_path = `/${caseN}/`;\n      // const begin = Date.now();\n      try {\n        // Parallel processing of all fetch requests ==> faster: 0.678s vs 0.275s\n        const [data_res, spec_res, script_res] = await Promise.all([\n          fetch(case_path + 'data.json'),\n          fetch(case_path + 'spec.js'),\n          fetch(case_path + 'script.py')\n        ]);\n\n        // Parallel processing of all text extraction\n        const [dataText, specText, scriptText] = await Promise.all([\n          data_res.ok ? data_res.text() : Promise.resolve(null),\n          spec_res.ok ? spec_res.text() : Promise.resolve(null),\n          script_res.ok ? script_res.text() : Promise.resolve(null)\n        ]);\n        this.output_tbl.tbl = [];\n        this.output_tbl.cols = [];\n        this.output_tbl.instance.updateData(this.output_tbl.tbl);\n        this.output_tbl.instance.updateSettings({ colHeaders: this.output_tbl.cols });\n\n        if (dataText !== null) {\n          this.caseData = JSON.parse(dataText);\n          this.input_tbl.tbl = this.caseData.input_tbl;\n        } else {\n          prompt.push(`Failed to load data from ${caseN}`);\n        }\n\n        if (specText !== null) {\n          this.editor.mapping_spec.code = specText;\n        } else {\n          prompt.push(`Failed to load spec from ${caseN}`);\n        }\n\n        if (scriptText !== null) {\n          this.editor.transform_script.code = scriptText;\n        } else {\n          prompt.push(`Failed to load script from ${caseN}`);\n        }\n      } catch (error) {\n        prompt.push(`Error loading data: ${error}`);\n      }\n      // const end = Date.now();\n      // console.log(`Loaded case ${caseN} in seconds: ${(end - begin) / 1000}`);\n      this.currentCase = caseN;\n      return prompt;\n    },\n\n    async loadCaseSpec(caseN: string) {\n      let status = false;\n      let spec = '';\n      try {\n        const response = await fetch(`/caseSpecs/${caseN}.js`);\n        if (response.ok) {\n          status = true;\n          spec = await response.text();\n        } else {\n          status = false;\n          spec = `Failed to load script from ${caseN}`;\n        }\n      } catch (error) {\n        status = false;\n        spec = `Error loading script: ${error}`;\n      }\n      return { status, spec };\n    },\n\n    highlightTblCells(tbl: \"input_tbl\" | \"output_tbl\", cells: TblCell[]) {\n      this[tbl].instance.updateSettings({ cell: cells });\n      this[tbl].cells = cells!.map((c) => [c.row, c.col] as [number, number]);\n      if (this[tbl].cells.length) {\n        let start_point = this.startPoint(this[tbl].cells);\n        this[tbl].instance.scrollViewportTo({\n          row: start_point[0],\n          col: start_point[1],\n          verticalSnap: \"top\",\n          horizontalSnap: \"start\",\n        });\n      }\n    },\n\n    highlightMinimapCells(cells: TblCell[]) {\n      d3.selectAll('g.matrix rect.grid-cell').attr('fill', color_config.default.fill).attr('stroke', color_config.default.stroke);\n      d3.selectAll('g.matrix text.grid-text').attr('fill', color_config.default.text).attr('font-weight', 'normal');\n      cells.forEach((cell) => {\n        if (cell.className) {\n          d3.select(`g.matrix #grid-${cell.row}-${cell.col}`)\n            .attr('fill', color_config[cell.className].fill).attr('stroke', color_config[cell.className].stroke);\n          d3.select(`g.matrix #text-${cell.row}-${cell.col}`).attr('fill', color_config[cell.className].text).attr('font-weight', color_config[cell.className].weight || 'normal');\n        }\n\n      });\n\n    },\n\n    out2in_mapping(cell: TblCell) {\n      const caseData = this.caseData;\n      let cells: TblCell[] = [];\n      if (cell.row < 0) {\n        if (this.output_tbl.out2in.cols[cell.col]) {\n          this.output_tbl.out2in.cols[cell.col].forEach((posi) => {\n            if (posi.startsWith(\"[\") && posi.endsWith(\"]\")) {\n              let pi_n = JSON.parse(posi) as [number, number];\n              cells.push({\n                row: pi_n[0],\n                col: pi_n[1],\n                className: \"posi-mapping\",\n              });\n            }\n          });\n        }\n      } else if (cell.col < 0) {\n        this.output_tbl.out2in.rows[cell.row].forEach((posi) => {\n          if (posi.startsWith(\"[\") && posi.endsWith(\"]\")) {\n            let pi_n = JSON.parse(posi) as [number, number];\n            cells.push({\n              row: pi_n[0],\n              col: pi_n[1],\n              className: \"posi-mapping\",\n            });\n          }\n        });\n      } else {\n        let output_posi = `[${cell.row},${cell.col}]`;\n        let posi = this.output_tbl.out2in.cells[output_posi];\n        if (posi.startsWith(\"[\") && posi.endsWith(\"]\")) {\n          let pi_n = JSON.parse(posi) as [number, number];\n          cells.push({\n            row: pi_n[0],\n            col: pi_n[1],\n            className: \"posi-mapping\",\n          });\n          /*\n          if (caseData.ambiguous_posi && output_posi in caseData.ambiguous_posi) {\n            caseData.ambiguous_posi[output_posi].forEach((in_posi) => {\n              cells.push({\n                row: in_posi[0],\n                col: in_posi[1],\n                className: \"ambiguous-cell\",\n              });\n            });\n            cells.push({\n              row: pi_n[0],\n              col: pi_n[1],\n              className: \"determined-cell\",\n            });\n          } else {\n            cells.push({\n              row: pi_n[0],\n              col: pi_n[1],\n              className: \"posi-mapping\",\n            });\n          }*/\n        }\n      }\n      return cells;\n    },\n\n    in2out_mapping(cell: TblCell) {\n      let cells: TblCell[] = [];\n      // let posi = this.caseData.in2out[`[${cell.row},${cell.col}]`];\n      let posi = this.input_tbl.in2out[`[${cell.row},${cell.col}]`];\n      if (posi) {\n        posi.forEach((pi) => {\n          let pi_n = JSON.parse(pi) as [number, number];\n          cells.push({ row: pi_n[0], col: pi_n[1], className: \"posi-mapping\" });\n        });\n      }\n      return cells;\n    },\n\n    grid_cell_click(cell: TblCell) {\n      const tbl_cell = this.input_tbl.instance.getCell(cell.row, cell.col);\n      if (tbl_cell) {\n        let cells: TblCell[] = [{ ...cell, className: \"posi-mapping\" }];\n        this.highlightTblCells(\"input_tbl\", cells);\n        tbl_cell.dispatchEvent(new MouseEvent('mouseup', { bubbles: true }));\n      }\n    },\n\n    startPoint(points: [number, number][]) {\n      let topLeft = points[0];\n\n      for (let i = 1; i < points.length; i++) {\n        let current = points[i];\n        if (\n          current[0] < topLeft[0] ||\n          (current[0] === topLeft[0] && current[1] < topLeft[1])\n        ) {\n          topLeft = current;\n        }\n      }\n      return topLeft;\n    },\n\n    transformTablebyCode() {\n      let specification: TableTidierTemplate;\n      try {\n        let code = this.editor.mapping_spec.instance!.getValue() + '\\nreturn option;';\n        const result = ts.transpileModule(code, {\n          compilerOptions: {\n            target: ts.ScriptTarget.ES2015,\n            module: ts.ModuleKind.CommonJS\n          }\n        })\n        // console.log(result.outputText);\n        // const specification: TableTidierTemplate = eval(code);\n        const evalFunction = new Function('ValueType', 'sortWithCorrespondingArray', result.outputText);\n        specification = evalFunction(ValueType, sortWithCorrespondingArray);\n      } catch (e) {\n        message.error({\n          content: `Failed to parse the specification:\\n ${e}`,\n          style: { whiteSpace: 'pre-line' },\n        });\n      }\n      try {\n        // console.log(this.input_tbl.tbl);\n        const { rootArea, tidyData } = transformTable(this.input_tbl.tbl, specification!);\n        // console.log(tidyData);\n        // 将tidyData转换为output_tbl.tbl，注意数据格式\n        this.convertDictToArray(tidyData);\n        this.derivePosiMapping(tidyData);\n        // console.log(this.output_tbl.tbl, this.output_tbl.cols);\n        this.output_tbl.instance.updateData(this.output_tbl.tbl);\n        this.output_tbl.instance.updateSettings({ colHeaders: this.output_tbl.cols });\n      } catch (e) {\n        message.error({\n          content: `Failed to transform the table based on the specification:\\n ${e}`,\n          style: { whiteSpace: 'pre-line' },\n        });\n      }\n    },\n    convertDictToArray(dictTbl: { [key: string]: CellInfo[] }) {\n      // Get the headers from the keys of the dictionary\n      this.output_tbl.cols = Object.keys(dictTbl);\n\n      // Determine the number of rows (assuming all columns have the same length)\n      const numRows = dictTbl[this.output_tbl.cols[0]].length;\n\n      // Initialize the result array with the headers as the first row\n      this.output_tbl.tbl = []\n\n      // Create each row based on the dictionary values\n      for (let i = 0; i < numRows; i++) {\n        const row = this.output_tbl.cols.map(header => dictTbl[header][i]);\n        this.output_tbl.tbl.push(row.map(cell => cell.value));\n      }\n    },\n\n    derivePosiMapping(outTbl: { [key: string]: CellInfo[] }) {\n\n      // Initialize in2out and out2in mappings\n      this.input_tbl.in2out = {};\n      this.output_tbl.out2in = { cells: {}, cols: [], rows: [] };\n\n      const cols = Object.keys(outTbl);\n      this.output_tbl.cols = cols;\n      const numRows = outTbl[cols[0]].length;\n\n      // Create the out2in mapping\n      for (let i = 0; i < numRows; i++) {\n        const row = [];\n        this.output_tbl.out2in.rows.push([]);\n        for (let j = 0; j < cols.length; j++) {\n          const col = cols[j];\n          const cell = outTbl[col][i];\n          row.push(cell.value);\n          let inPosi = `[${cell.y},${cell.x}]`;\n          const outPosi = `[${i},${j}]`;\n          console.log(inPosi, outPosi);\n          if (cell.x < 0 || cell.y < 0) {\n            inPosi = '';\n          } else {\n            if (this.input_tbl.in2out.hasOwnProperty(inPosi)) {\n              this.input_tbl.in2out[inPosi].push(outPosi);\n            } else {\n              this.input_tbl.in2out[inPosi] = [outPosi];\n            }\n          }\n          this.output_tbl.out2in.cells[outPosi] = inPosi;\n          this.output_tbl.out2in.rows[i].push(inPosi);\n          if (this.output_tbl.out2in.cols.length <= j) {\n            this.output_tbl.out2in.cols.push([inPosi]);\n          } else {\n            this.output_tbl.out2in.cols[j].push(inPosi);\n          }\n        }\n      }\n      console.log(outTbl);\n      console.log(this.output_tbl.out2in, this.input_tbl.in2out);\n    }\n\n  },\n  // computed\n  getters: {}\n})","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"view\" }\nconst _hoisted_2 = { class: \"view-title\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"head-text\" }, \" Input Table \", -1)\nconst _hoisted_4 = {\n  class: \"toolbar\",\n  style: {\"float\":\"right\",\"margin-right\":\"50px\"}\n}\nconst _hoisted_5 = { class: \"controller\" }\nconst _hoisted_6 = { class: \"view-content\" }\nconst _hoisted_7 = { id: \"input-tbl\" }\nconst _hoisted_8 = { class: \"view\" }\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"view-title\" }, \"Output Table\", -1)\nconst _hoisted_10 = { class: \"view-content\" }\nconst _hoisted_11 = { id: \"output-tbl\" }\n\nimport {\n  getCurrentInstance,\n  ComponentPublicInstance,\n  ref,\n  onMounted,\n} from \"vue\";\nimport { HotTable } from \"@handsontable/vue3\";\nimport \"handsontable/dist/handsontable.full.css\";\nimport { registerAllModules } from \"handsontable/registry\";\nimport Handsontable from \"handsontable\";\nimport { useTableStore, TblVisData } from \"@/store/table\";\n\n// register Handsontable's modules\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'InOutTable',\n  setup(__props) {\n\nregisterAllModules();\n\nconst tableStore = useTableStore();\n// const tblCases: { [key: string]: TblVisData } = tableStore.cases;\nlet caseData: TblVisData = tableStore.caseData;\nlet output_col = ref(caseData.output_col);\n\n// let caseOption: Ref<{ value: string; label: string; }[]> = ref([]);\nlet caseOption = ref<{ value: string; label: string }[]>([]);\n\ncaseOption.value = tableStore.caseList.map((v) => {\n  return { value: v, label: v };\n});\n\nlet currentCase = ref(tableStore.caseList[0]);\n\n// let caseData = ref(tblCases[currentCase.value]);\n// let caseData = tblCases[currentCase.value];\n\nlet inHotInst: Handsontable;\nlet outHotInst: Handsontable;\n\nfunction renderTblCell(instance: Handsontable,\n  td: HTMLElement,\n  row: number,\n  col: number,\n  prop: any,\n  value: any,\n  cellProperties: any) {\n  // @ts-ignore\n  Handsontable.renderers.TextRenderer.apply(this, arguments);\n  td.innerHTML = `<div class=\"truncated\">${value}</div>`\n}\n\nonMounted(() => {\n\n  const proxy = getCurrentInstance()?.proxy as ComponentPublicInstance;\n  inHotInst = (proxy.$refs.inputTbl as any).hotInstance as Handsontable;\n  outHotInst = (proxy.$refs.outputTbl as any).hotInstance as Handsontable;\n\n  tableStore.input_tbl.instance = inHotInst;\n  tableStore.output_tbl.instance = outHotInst;\n\n  outHotInst.updateSettings({\n    outsideClickDeselects: (targetEle) => {\n      if (targetEle?.className === \"wtHolder\") {\n        return false;\n      } else {\n        inHotInst.updateSettings({ cell: [] });\n        tableStore.highlightMinimapCells([])\n        return true;\n      }\n    },\n  });\n  outHotInst.addHook(\"afterOnCellMouseDown\", () => {\n    inHotInst.updateSettings({ cell: [] });\n  });\n  outHotInst.addHook(\"afterOnCellMouseUp\", (event, coords, grid) => {\n    const cells = tableStore.out2in_mapping(coords);\n    tableStore.highlightTblCells(\"input_tbl\", cells);\n    tableStore.highlightMinimapCells(cells);\n  });\n\n  inHotInst.updateSettings({\n    outsideClickDeselects: (targetEle) => {\n      if (targetEle?.className === \"wtHolder\") {\n        return false;\n      } else {\n        outHotInst.updateSettings({ cell: [] });\n        return true;\n      }\n    },\n  });\n  inHotInst.addHook(\"afterOnCellMouseDown\", () => {\n    outHotInst.updateSettings({ cell: [] });\n  });\n  inHotInst.addHook(\"afterOnCellMouseUp\", (event, coords, TD) => {\n    const cells = tableStore.in2out_mapping(coords);\n    tableStore.highlightTblCells(\"output_tbl\", cells);\n    tableStore.highlightMinimapCells([{ ...coords, className: \"posi-mapping\" }]);\n  });\n  handleCaseChange(currentCase.value);\n\n});\n\nfunction showDropdown() {\n  //   isOpen = true;\n}\nfunction hideDropdown() {\n  //   isOpen = false;\n}\nasync function handleCaseChange(value: string) {\n  currentCase.value = value;\n  // tableStore.currentCase = value;\n  // caseData = tblCases[currentCase.value];\n  await tableStore.loadCaseData(value);\n  inHotInst.updateData(tableStore.input_tbl.tbl);\n  // outHotInst.updateData(tableStore.output_tbl.tbl);\n  // output_col.value = caseData.output_col;\n\n  // caseData.output_tbl && outHotInst.updateData(caseData.output_tbl);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_select = _resolveComponent(\"a-select\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _hoisted_3,\n        _createElementVNode(\"span\", _hoisted_4, [\n          _createElementVNode(\"span\", _hoisted_5, [\n            _createVNode(_component_a_select, {\n              ref: \"select\",\n              value: _unref(currentCase),\n              options: _unref(caseOption),\n              size: \"small\",\n              onChange: handleCaseChange,\n              onMouseenter: showDropdown,\n              onMouseleave: hideDropdown\n            }, null, 8, [\"value\", \"options\"])\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createVNode(_unref(HotTable), {\n            ref: \"inputTbl\",\n            data: _unref(caseData).input_tbl,\n            rowHeaders: true,\n            colHeaders: true,\n            manualColumnResize: true,\n            renderer: renderTblCell,\n            contextMenu: true,\n            licenseKey: \"non-commercial-and-evaluation\"\n          }, null, 8, [\"data\"])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_8, [\n      _hoisted_9,\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createElementVNode(\"div\", _hoisted_11, [\n          _createVNode(_unref(HotTable), {\n            ref: \"outputTbl\",\n            data: _unref(caseData).output_tbl,\n            rowHeaders: true,\n            colHeaders: _unref(output_col),\n            manualColumnResize: true,\n            renderer: renderTblCell,\n            contextMenu: true,\n            licenseKey: \"non-commercial-and-evaluation\"\n          }, null, 8, [\"data\", \"colHeaders\"])\n        ])\n      ])\n    ])\n  ], 64))\n}\n}\n\n})","<template>\n  <div class=\"view\">\n    <div class=\"view-title\">\n      <span class=\"head-text\"> Input Table </span>\n      <span class=\"toolbar\" style=\"float: right; margin-right: 50px\">\n        <span class=\"controller\">\n          <a-select ref=\"select\" :value=\"currentCase\" :options=\"caseOption\" size=\"small\" @change=\"handleCaseChange\"\n            @mouseenter=\"showDropdown\" @mouseleave=\"hideDropdown\"></a-select>\n        </span>\n      </span>\n    </div>\n    <div class=\"view-content\">\n      <div id=\"input-tbl\">\n        <hot-table ref=\"inputTbl\" :data=\"caseData.input_tbl\" :rowHeaders=\"true\" :colHeaders=\"true\"\n          :manualColumnResize=\"true\" :renderer=\"renderTblCell\" :contextMenu=\"true\"\n          licenseKey=\"non-commercial-and-evaluation\"></hot-table>\n      </div>\n    </div>\n  </div>\n  <div class=\"view\">\n    <div class=\"view-title\">Output Table</div>\n    <div class=\"view-content\">\n      <div id=\"output-tbl\">\n        <hot-table ref=\"outputTbl\" :data=\"caseData.output_tbl\" :rowHeaders=\"true\" :colHeaders=\"output_col\"\n          :manualColumnResize=\"true\" :renderer=\"renderTblCell\" :contextMenu=\"true\"\n          licenseKey=\"non-commercial-and-evaluation\"></hot-table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  getCurrentInstance,\n  ComponentPublicInstance,\n  ref,\n  onMounted,\n} from \"vue\";\nimport { HotTable } from \"@handsontable/vue3\";\nimport \"handsontable/dist/handsontable.full.css\";\nimport { registerAllModules } from \"handsontable/registry\";\nimport Handsontable from \"handsontable\";\nimport { useTableStore, TblVisData } from \"@/store/table\";\n\n// register Handsontable's modules\nregisterAllModules();\n\nconst tableStore = useTableStore();\n// const tblCases: { [key: string]: TblVisData } = tableStore.cases;\nlet caseData: TblVisData = tableStore.caseData;\nlet output_col = ref(caseData.output_col);\n\n// let caseOption: Ref<{ value: string; label: string; }[]> = ref([]);\nlet caseOption = ref<{ value: string; label: string }[]>([]);\n\ncaseOption.value = tableStore.caseList.map((v) => {\n  return { value: v, label: v };\n});\n\nlet currentCase = ref(tableStore.caseList[0]);\n\n// let caseData = ref(tblCases[currentCase.value]);\n// let caseData = tblCases[currentCase.value];\n\nlet inHotInst: Handsontable;\nlet outHotInst: Handsontable;\n\nfunction renderTblCell(instance: Handsontable,\n  td: HTMLElement,\n  row: number,\n  col: number,\n  prop: any,\n  value: any,\n  cellProperties: any) {\n  // @ts-ignore\n  Handsontable.renderers.TextRenderer.apply(this, arguments);\n  td.innerHTML = `<div class=\"truncated\">${value}</div>`\n}\n\nonMounted(() => {\n\n  const proxy = getCurrentInstance()?.proxy as ComponentPublicInstance;\n  inHotInst = (proxy.$refs.inputTbl as any).hotInstance as Handsontable;\n  outHotInst = (proxy.$refs.outputTbl as any).hotInstance as Handsontable;\n\n  tableStore.input_tbl.instance = inHotInst;\n  tableStore.output_tbl.instance = outHotInst;\n\n  outHotInst.updateSettings({\n    outsideClickDeselects: (targetEle) => {\n      if (targetEle?.className === \"wtHolder\") {\n        return false;\n      } else {\n        inHotInst.updateSettings({ cell: [] });\n        tableStore.highlightMinimapCells([])\n        return true;\n      }\n    },\n  });\n  outHotInst.addHook(\"afterOnCellMouseDown\", () => {\n    inHotInst.updateSettings({ cell: [] });\n  });\n  outHotInst.addHook(\"afterOnCellMouseUp\", (event, coords, grid) => {\n    const cells = tableStore.out2in_mapping(coords);\n    tableStore.highlightTblCells(\"input_tbl\", cells);\n    tableStore.highlightMinimapCells(cells);\n  });\n\n  inHotInst.updateSettings({\n    outsideClickDeselects: (targetEle) => {\n      if (targetEle?.className === \"wtHolder\") {\n        return false;\n      } else {\n        outHotInst.updateSettings({ cell: [] });\n        return true;\n      }\n    },\n  });\n  inHotInst.addHook(\"afterOnCellMouseDown\", () => {\n    outHotInst.updateSettings({ cell: [] });\n  });\n  inHotInst.addHook(\"afterOnCellMouseUp\", (event, coords, TD) => {\n    const cells = tableStore.in2out_mapping(coords);\n    tableStore.highlightTblCells(\"output_tbl\", cells);\n    tableStore.highlightMinimapCells([{ ...coords, className: \"posi-mapping\" }]);\n  });\n  handleCaseChange(currentCase.value);\n\n});\n\nfunction showDropdown() {\n  //   isOpen = true;\n}\nfunction hideDropdown() {\n  //   isOpen = false;\n}\nasync function handleCaseChange(value: string) {\n  currentCase.value = value;\n  // tableStore.currentCase = value;\n  // caseData = tblCases[currentCase.value];\n  await tableStore.loadCaseData(value);\n  inHotInst.updateData(tableStore.input_tbl.tbl);\n  // outHotInst.updateData(tableStore.output_tbl.tbl);\n  // output_col.value = caseData.output_col;\n\n  // caseData.output_tbl && outHotInst.updateData(caseData.output_tbl);\n}\n</script>\n\n<style lang=\"less\">\n.handsontable {\n  .truncated {\n    max-width: 140px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  td.htRight {\n    background-color: #3498db;\n  }\n\n  td.posi-mapping {\n    color: #fff !important;\n    background-color: #37bc6c;\n  }\n\n  td.ambiguous-cell {\n    color: #e91010 !important;\n    background-color: #83e4aa;\n  }\n\n  td.determined-cell {\n    color: #e91010 !important;\n    font-weight: bold;\n    background-color: #37bc6c;\n  }\n}\n</style>\n","import script from \"./InOutTable.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InOutTable.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./InOutTable.vue?vue&type=style&index=0&id=442a4f5e&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport * as monaco from \"monaco-editor\";\nimport { onMounted, onUnmounted, ref, watch } from \"vue\";\nimport { useTableStore } from \"@/store/table\";\n\n\nimport { debounce } from 'lodash';\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CodeView',\n  props: {\n    codeType: {}\n  },\n  setup(__props: any) {\n\nconst { codeType } = __props;\n\n// const props = defineProps(['codeType'])\n// const codeType: \"mapping_spec\" | \"transform_script\" = props.codeType;\n\n// const { codeType} = defineProps({\n//   codeType: {\n//     type: String as () => \"mapping_spec\" | \"transform_script\",\n//     required: true,\n//   },\n// });\n\n// const codeType = defineProps(['codeType']).codeType as \"mapping_spec\" | \"transform_script\"; // incorrect way to use defineProps\n\nconst tableStore = useTableStore();\n\nconst editorDefaultOptions = {\n    value: '',\n    language: codeType === \"mapping_spec\" ? 'typescript' : 'python',\n    theme: 'vs',\n    fontSize: 14,\n    glyphMargin: false,\n    automaticLayout: false, // Automatic layout may cause \"ResizeObserver loop completed with undelivered notifications.\" warning. To avoid this, set automaticLayout to false\n    autoIndent: 'advanced',\n    readOnly: false,\n    minimap: {\n        enabled: false,\n    },\n    lineNumbersMinChars: 1,\n    scrollBeyondLastLine: false, // Prevent scrolling beyond the last line\n    padding: {\n        bottom: 80, // Adjust the bottom padding to 80px\n    },\n};\n\nconst editorWrapper = ref<HTMLElement | null>(null);\n\nlet editor: monaco.editor.IStandaloneCodeEditor | null = null;\n\n// let mappingSpec: string = \"\"\n\nconst initEditor = () => {\n    if (editor) { // if editor is already initialized, dispose it first\n        editor.dispose();\n    }\n    const editorOptions = {\n        ...editorDefaultOptions,\n        value: tableStore.editor[codeType].code,\n    };\n    editor = monaco.editor.create(editorWrapper.value!, editorOptions as monaco.editor.IEditorConstructionOptions);  // ! means that editorWrapper.value is not null\n};\n\nwatch(() => tableStore.currentCase, (newVal) => {\n    // mappingSpec = (await tableStore.loadCaseSpec(newVal)).spec;\n    // mappingSpec = tableStore.mapping_spec;\n    // initEditor();\n    editor?.setValue(tableStore.editor[codeType].code);  // update editor content; ? means if editor is not null then call setValue, else do nothing\n});\n\nconst handleResize = debounce(() => {\n    if (editor) {\n        editor.layout();\n    }\n}, 100); // Adjust the delay time, in milliseconds\n\n// 监听整个窗口的大小变化，通常会引发更多不必要的回调执行，可能会影响性能。\n// window.addEventListener('resize', handleResize);\n\nconst resizeObserver = new ResizeObserver(() => {\n    // console.log(\"Resize observed\", entries);\n    handleResize();\n});\n\n\nif (codeType === \"mapping_spec\") {\n\n    // https://microsoft.github.io/monaco-editor/playground.html?source=v0.50.0#example-extending-language-services-configure-javascript-defaults\n\n    const libUri = \"ts:grammar.ts\";\n    // Check if model already exists\n    const existingModel = monaco.editor.getModels().find(model => model.uri.toString() === libUri);\n\n    if (!existingModel) {\n        fetch('/grammar.ts').then((response) => {\n            response.text().then((tsContent) => {\n\n                // validation settings\n                monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\n                    noSemanticValidation: true,\n                    noSyntaxValidation: false,\n                });\n\n                // compiler options\n                monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n                    target: monaco.languages.typescript.ScriptTarget.ES2015,\n                    allowNonTsExtensions: true,\n                });\n                monaco.languages.typescript.javascriptDefaults.addExtraLib(tsContent, libUri);\n\n                // When resolving definitions and references, the editor will try to use created models.\n                // Creating a model for the library allows \"peek definition/references\" commands to work with the library.\n                monaco.editor.createModel(tsContent, \"typescript\", monaco.Uri.parse(libUri));\n            });\n        });\n    }\n}\n\nonMounted(() => {\n    initEditor();\n    // 可以精确地监听元素大小变化，避免了全局 resize 事件可能带来的性能问题，尤其是当页面上有多个需要监听大小变化的元素时。\n    resizeObserver.observe(editorWrapper.value!);\n    if (editor) {\n        tableStore.editor[codeType].instance = editor;\n    }\n});\n\nonUnmounted(() => {\n    // 没有这段代码会导致Code Panel 中的const option 重复被声明\n    if (editor) {\n        editor.dispose();\n    }\n});\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref_key: \"editorWrapper\",\n    ref: editorWrapper,\n    class: \"editor-container\"\n  }, null, 512))\n}\n}\n\n})","<template>\n    <div ref=\"editorWrapper\" class=\"editor-container\"></div>\n</template>\n\n<!-- <script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n    name: \"CodeView\",\n});\n</script> -->\n\n<script setup lang=\"ts\">\nimport * as monaco from \"monaco-editor\";\nimport { onMounted, onUnmounted, ref, watch } from \"vue\";\nimport { useTableStore } from \"@/store/table\";\n\n\nconst { codeType } = defineProps<{ codeType: \"mapping_spec\" | \"transform_script\" }>();\n\n// const props = defineProps(['codeType'])\n// const codeType: \"mapping_spec\" | \"transform_script\" = props.codeType;\n\n// const { codeType} = defineProps({\n//   codeType: {\n//     type: String as () => \"mapping_spec\" | \"transform_script\",\n//     required: true,\n//   },\n// });\n\n// const codeType = defineProps(['codeType']).codeType as \"mapping_spec\" | \"transform_script\"; // incorrect way to use defineProps\n\nconst tableStore = useTableStore();\n\nconst editorDefaultOptions = {\n    value: '',\n    language: codeType === \"mapping_spec\" ? 'typescript' : 'python',\n    theme: 'vs',\n    fontSize: 14,\n    glyphMargin: false,\n    automaticLayout: false, // Automatic layout may cause \"ResizeObserver loop completed with undelivered notifications.\" warning. To avoid this, set automaticLayout to false\n    autoIndent: 'advanced',\n    readOnly: false,\n    minimap: {\n        enabled: false,\n    },\n    lineNumbersMinChars: 1,\n    scrollBeyondLastLine: false, // Prevent scrolling beyond the last line\n    padding: {\n        bottom: 80, // Adjust the bottom padding to 80px\n    },\n};\n\nconst editorWrapper = ref<HTMLElement | null>(null);\n\nlet editor: monaco.editor.IStandaloneCodeEditor | null = null;\n\n// let mappingSpec: string = \"\"\n\nconst initEditor = () => {\n    if (editor) { // if editor is already initialized, dispose it first\n        editor.dispose();\n    }\n    const editorOptions = {\n        ...editorDefaultOptions,\n        value: tableStore.editor[codeType].code,\n    };\n    editor = monaco.editor.create(editorWrapper.value!, editorOptions as monaco.editor.IEditorConstructionOptions);  // ! means that editorWrapper.value is not null\n};\n\nwatch(() => tableStore.currentCase, (newVal) => {\n    // mappingSpec = (await tableStore.loadCaseSpec(newVal)).spec;\n    // mappingSpec = tableStore.mapping_spec;\n    // initEditor();\n    editor?.setValue(tableStore.editor[codeType].code);  // update editor content; ? means if editor is not null then call setValue, else do nothing\n});\n\nimport { debounce } from 'lodash';\nconst handleResize = debounce(() => {\n    if (editor) {\n        editor.layout();\n    }\n}, 100); // Adjust the delay time, in milliseconds\n\n// 监听整个窗口的大小变化，通常会引发更多不必要的回调执行，可能会影响性能。\n// window.addEventListener('resize', handleResize);\n\nconst resizeObserver = new ResizeObserver(() => {\n    // console.log(\"Resize observed\", entries);\n    handleResize();\n});\n\n\nif (codeType === \"mapping_spec\") {\n\n    // https://microsoft.github.io/monaco-editor/playground.html?source=v0.50.0#example-extending-language-services-configure-javascript-defaults\n\n    const libUri = \"ts:grammar.ts\";\n    // Check if model already exists\n    const existingModel = monaco.editor.getModels().find(model => model.uri.toString() === libUri);\n\n    if (!existingModel) {\n        fetch('/grammar.ts').then((response) => {\n            response.text().then((tsContent) => {\n\n                // validation settings\n                monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\n                    noSemanticValidation: true,\n                    noSyntaxValidation: false,\n                });\n\n                // compiler options\n                monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n                    target: monaco.languages.typescript.ScriptTarget.ES2015,\n                    allowNonTsExtensions: true,\n                });\n                monaco.languages.typescript.javascriptDefaults.addExtraLib(tsContent, libUri);\n\n                // When resolving definitions and references, the editor will try to use created models.\n                // Creating a model for the library allows \"peek definition/references\" commands to work with the library.\n                monaco.editor.createModel(tsContent, \"typescript\", monaco.Uri.parse(libUri));\n            });\n        });\n    }\n}\n\nonMounted(() => {\n    initEditor();\n    // 可以精确地监听元素大小变化，避免了全局 resize 事件可能带来的性能问题，尤其是当页面上有多个需要监听大小变化的元素时。\n    resizeObserver.observe(editorWrapper.value!);\n    if (editor) {\n        tableStore.editor[codeType].instance = editor;\n    }\n});\n\nonUnmounted(() => {\n    // 没有这段代码会导致Code Panel 中的const option 重复被声明\n    if (editor) {\n        editor.dispose();\n    }\n});\n\n\n</script>\n\n\n<style scoped lang=\"less\">\n.editor-container {\n    width: 100%;\n    height: 100%;\n    /* You can adjust the height as needed */\n}\n</style>","import script from \"./CodeView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CodeView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CodeView.vue?vue&type=style&index=0&id=31ed6103&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-31ed6103\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"view\" }\nconst _hoisted_2 = { class: \"view-title\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", null, \"Mapping Minimap\", -1)\nconst _hoisted_4 = { class: \"view-content\" }\n\nimport { onMounted, ref, watch } from 'vue';\nimport * as d3 from 'd3';\nimport { useTableStore, TblCell } from \"@/store/table\";\n\nimport { debounce } from 'lodash';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Minimap',\n  setup(__props) {\n\nconst tableStore = useTableStore();\n\nconst container = ref<HTMLDivElement | null>(null);\n\nlet offsetX = 0;\nlet offsetY = 0;\nlet transformStatue: any;\nlet zoom: d3.ZoomBehavior<SVGSVGElement, unknown> | null = null;\n\nfunction resetZoom() {\n    if (zoom && container.value) {\n        // 不能对g.matrix元素进行transform操作，因为zoom事件监听器是添加在svg元素上的，所以需要对svg元素进行transform操作\n        d3.select(container.value).select('svg').transition().duration(750)\n            .call(zoom.transform as any, d3.zoomIdentity); // 重置缩放和平移状态\n    }\n}\n\nfunction generateGrid(rows: number, cols: number) {\n    const grid: TblCell[] = [];\n    for (let i = 0; i < rows; i++) {\n        for (let j = 0; j < cols; j++) {\n            grid.push({ row: i, col: j });\n        }\n    }\n    return grid;\n}\n\nconst drawGrid = (rows: number, cols: number) => {\n    if (!container.value) return;\n\n    // Clear any existing SVG\n    d3.select(container.value).selectAll('svg').remove();\n\n    const containerWidth = container.value.clientWidth;\n    const containerHeight = container.value.clientHeight;\n    let cellWidth = Math.max(5, Math.min(45, Math.floor(containerWidth / cols)));\n    let cellHeight = Math.max(5, Math.min(20, Math.floor(containerHeight / rows)));\n    cellWidth = cellHeight = Math.min(cellWidth, cellHeight)\n\n    zoom = d3.zoom<SVGSVGElement, unknown>()\n        // .scaleExtent([0.5, 3.5])  // set the zoom scale range\n        .on('zoom', function (event) {\n            // svg.attr('transform', event.transform);  // 直接设置svg的transform属性会导致缩放后的坐标系不正确（导致的问题是：用鼠标平移（pan）矩形的时候，矩形会抖动，导致矩形实际平移的距离小于鼠标平移的距离），因此需要在svg内部再添加一个g元素\n            // d3.select('g.matrix').attr('transform', event.transform);\n            d3.select('g.matrix').attr('transform', `translate(${offsetX + event.transform.x}, ${offsetY + event.transform.y}) scale(${event.transform.k})`); // Update the matrix transform based on the zoom event\n            updateCellTextVisibility(event.transform.k); // Update cell text visibility based on the current scale\n            // transformStatue = event.transform;\n        })\n\n    const svg = d3.select(container.value)\n        .append('svg')\n        .attr('width', containerWidth)\n        .attr('height', containerHeight)\n        .call(zoom)  // 注意，这里添加zoom的是svg元素，而不是g.matrix元素，所以当resetZoom时，需要对svg元素进行transform操作\n\n    const matrix = svg.append('g').classed(\"matrix\", true);  // Append a 'g' element for better transform management to avoid jittering\n    let texts: any = null;\n\n    const grids = generateGrid(rows, cols);\n\n    const cells = matrix.selectAll('rect')\n        .data(grids)\n        .enter().append('rect').classed('grid-cell', true)\n        .attr('x', d => d.col * cellWidth)\n        .attr('y', d => d.row * cellHeight)\n        .attr('id', d => `grid-${d.row}-${d.col}`)\n        .attr('width', cellWidth)\n        .attr('height', cellHeight)\n        .attr('fill', '#f9f7ff')\n        .attr('stroke', '#cccccc')\n        .on('mouseover', function () {\n            d3.select(this).raise() // Bring the cell to the front \n                // .attr('fill', '#ece9e6')\n                // .attr('stroke', '#4b8aff')\n                .attr('stroke-width', 2);\n            if (texts) {\n                texts.raise();\n            }\n        })\n        .on('mouseout', function () {\n            d3.select(this)\n                // .attr('fill', '#f9f7ff')\n                // .attr('stroke', '#cccccc')\n                .attr('stroke-width', 1);\n        })\n        .on('click', function (event, d) {\n            // console.log(`Clicked on cell: (${d.row}, ${d.col})`);\n            // const input_tbl_cell = d3.select('#input-tbl tbody').select(`tr:nth-child(${d.row + 1})`).select(`td:nth-child(${d.col + 2})`) as d3.Selection<HTMLElement, unknown, HTMLElement, any>;\n\n            // input_tbl_cell.node()!.dispatchEvent(new MouseEvent('mouseup', { bubbles: true })); // Dispatch a click event on the corresponding cell in the input table\n            // input_tbl_cell.dispatch('mouseup')\n            // console.log(d3.select(this).attr('width'), d3.select(this).attr('height'), d);\n            tableStore.grid_cell_click({ row: d.row, col: d.col })\n        });\n\n    // Calculate the offset to center the matrix in the SVG container\n    offsetX = Math.max((containerWidth - matrix.node()!.getBBox().width) / 2, 0);\n    offsetY = Math.max((containerHeight - matrix.node()!.getBBox().height) / 2, 0);\n    matrix.attr('transform', `translate(${offsetX}, ${offsetY})`); // Center the matrix\n    transformStatue = d3.zoomIdentity;\n\n\n\n    const updateCellTextVisibility = (scale: number) => {\n        const scaledCellWidth = cellWidth * scale;\n        const scaledCellHeight = cellHeight * scale;\n        // const cellArea = scaledCellWidth * scaledCellHeight;\n        if (scaledCellWidth >= 45 && scaledCellHeight >= 20) {\n            if (texts) {\n                texts.style('display', 'block');\n            } else {\n                texts = matrix.selectAll('text')\n                    .data(grids)\n                    .enter().append('text').classed('grid-text', true)\n                    .attr('x', d => d.col * cellWidth + cellWidth / 2)\n                    .attr('y', d => d.row * cellHeight + cellHeight / 2)\n                    .attr('id', d => `text-${d.row}-${d.col}`)\n                    .attr('dy', '.30em')\n                    .attr('font-size', 15 / scale)\n                    .attr('fill', '#000')\n                    .attr('text-anchor', 'middle')\n                    .text(d => `(${d.row}, ${d.col})`)\n                    .style('display', 'block')\n                    .style('pointer-events', 'none'); // Ensure text does not capture mouse events, in order to allow clicking on the cells\n            }\n        } else {\n            if (texts) {\n                texts.style('display', 'none');\n            }\n        }\n    };\n\n    updateCellTextVisibility(1); // Initial update for default scale 1\n\n\n};\n\nconst debouncedResize = debounce(() => {\n    // requestAnimationFrame(() => {\n    //     drawGrid();\n    // });\n    if (!tableStore.caseData.input_tbl) return;\n    drawGrid(tableStore.caseData.input_tbl.length, tableStore.caseData.input_tbl[0].length);\n}, 100); // 调整延迟时间，单位为毫秒\n\nconst resizeObserver = new ResizeObserver(() => {\n    debouncedResize();\n});\n\nonMounted(() => {\n    if (container.value) {\n        resizeObserver.observe(container.value);\n    }\n});\n\nwatch(() => tableStore.currentCase, (newVal) => {\n    drawGrid(tableStore.caseData.input_tbl.length, tableStore.caseData.input_tbl[0].length);\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_button = _resolveComponent(\"a-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createVNode(_component_a_button, {\n        size: \"small\",\n        style: {\"float\":\"right\",\"margin-right\":\"20px\"},\n        onClick: resetZoom\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Reset\")\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createElementVNode(\"div\", {\n        ref_key: \"container\",\n        ref: container,\n        class: \"grid-container\"\n      }, null, 512)\n    ])\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"view\">\n        <div class=\"view-title\">\n            <span>Mapping Minimap</span>\n            <a-button size=\"small\" style=\"float: right; margin-right: 20px\" @click=\"resetZoom\">Reset</a-button>\n        </div>\n        <div class=\"view-content\">\n            <div ref=\"container\" class=\"grid-container\"></div>\n        </div>\n    </div>\n\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, ref, watch } from 'vue';\nimport * as d3 from 'd3';\nimport { useTableStore, TblCell } from \"@/store/table\";\n\nconst tableStore = useTableStore();\n\nconst container = ref<HTMLDivElement | null>(null);\n\nlet offsetX = 0;\nlet offsetY = 0;\nlet transformStatue: any;\nlet zoom: d3.ZoomBehavior<SVGSVGElement, unknown> | null = null;\n\nfunction resetZoom() {\n    if (zoom && container.value) {\n        // 不能对g.matrix元素进行transform操作，因为zoom事件监听器是添加在svg元素上的，所以需要对svg元素进行transform操作\n        d3.select(container.value).select('svg').transition().duration(750)\n            .call(zoom.transform as any, d3.zoomIdentity); // 重置缩放和平移状态\n    }\n}\n\nfunction generateGrid(rows: number, cols: number) {\n    const grid: TblCell[] = [];\n    for (let i = 0; i < rows; i++) {\n        for (let j = 0; j < cols; j++) {\n            grid.push({ row: i, col: j });\n        }\n    }\n    return grid;\n}\n\nconst drawGrid = (rows: number, cols: number) => {\n    if (!container.value) return;\n\n    // Clear any existing SVG\n    d3.select(container.value).selectAll('svg').remove();\n\n    const containerWidth = container.value.clientWidth;\n    const containerHeight = container.value.clientHeight;\n    let cellWidth = Math.max(5, Math.min(45, Math.floor(containerWidth / cols)));\n    let cellHeight = Math.max(5, Math.min(20, Math.floor(containerHeight / rows)));\n    cellWidth = cellHeight = Math.min(cellWidth, cellHeight)\n\n    zoom = d3.zoom<SVGSVGElement, unknown>()\n        // .scaleExtent([0.5, 3.5])  // set the zoom scale range\n        .on('zoom', function (event) {\n            // svg.attr('transform', event.transform);  // 直接设置svg的transform属性会导致缩放后的坐标系不正确（导致的问题是：用鼠标平移（pan）矩形的时候，矩形会抖动，导致矩形实际平移的距离小于鼠标平移的距离），因此需要在svg内部再添加一个g元素\n            // d3.select('g.matrix').attr('transform', event.transform);\n            d3.select('g.matrix').attr('transform', `translate(${offsetX + event.transform.x}, ${offsetY + event.transform.y}) scale(${event.transform.k})`); // Update the matrix transform based on the zoom event\n            updateCellTextVisibility(event.transform.k); // Update cell text visibility based on the current scale\n            // transformStatue = event.transform;\n        })\n\n    const svg = d3.select(container.value)\n        .append('svg')\n        .attr('width', containerWidth)\n        .attr('height', containerHeight)\n        .call(zoom)  // 注意，这里添加zoom的是svg元素，而不是g.matrix元素，所以当resetZoom时，需要对svg元素进行transform操作\n\n    const matrix = svg.append('g').classed(\"matrix\", true);  // Append a 'g' element for better transform management to avoid jittering\n    let texts: any = null;\n\n    const grids = generateGrid(rows, cols);\n\n    const cells = matrix.selectAll('rect')\n        .data(grids)\n        .enter().append('rect').classed('grid-cell', true)\n        .attr('x', d => d.col * cellWidth)\n        .attr('y', d => d.row * cellHeight)\n        .attr('id', d => `grid-${d.row}-${d.col}`)\n        .attr('width', cellWidth)\n        .attr('height', cellHeight)\n        .attr('fill', '#f9f7ff')\n        .attr('stroke', '#cccccc')\n        .on('mouseover', function () {\n            d3.select(this).raise() // Bring the cell to the front \n                // .attr('fill', '#ece9e6')\n                // .attr('stroke', '#4b8aff')\n                .attr('stroke-width', 2);\n            if (texts) {\n                texts.raise();\n            }\n        })\n        .on('mouseout', function () {\n            d3.select(this)\n                // .attr('fill', '#f9f7ff')\n                // .attr('stroke', '#cccccc')\n                .attr('stroke-width', 1);\n        })\n        .on('click', function (event, d) {\n            // console.log(`Clicked on cell: (${d.row}, ${d.col})`);\n            // const input_tbl_cell = d3.select('#input-tbl tbody').select(`tr:nth-child(${d.row + 1})`).select(`td:nth-child(${d.col + 2})`) as d3.Selection<HTMLElement, unknown, HTMLElement, any>;\n\n            // input_tbl_cell.node()!.dispatchEvent(new MouseEvent('mouseup', { bubbles: true })); // Dispatch a click event on the corresponding cell in the input table\n            // input_tbl_cell.dispatch('mouseup')\n            // console.log(d3.select(this).attr('width'), d3.select(this).attr('height'), d);\n            tableStore.grid_cell_click({ row: d.row, col: d.col })\n        });\n\n    // Calculate the offset to center the matrix in the SVG container\n    offsetX = Math.max((containerWidth - matrix.node()!.getBBox().width) / 2, 0);\n    offsetY = Math.max((containerHeight - matrix.node()!.getBBox().height) / 2, 0);\n    matrix.attr('transform', `translate(${offsetX}, ${offsetY})`); // Center the matrix\n    transformStatue = d3.zoomIdentity;\n\n\n\n    const updateCellTextVisibility = (scale: number) => {\n        const scaledCellWidth = cellWidth * scale;\n        const scaledCellHeight = cellHeight * scale;\n        // const cellArea = scaledCellWidth * scaledCellHeight;\n        if (scaledCellWidth >= 45 && scaledCellHeight >= 20) {\n            if (texts) {\n                texts.style('display', 'block');\n            } else {\n                texts = matrix.selectAll('text')\n                    .data(grids)\n                    .enter().append('text').classed('grid-text', true)\n                    .attr('x', d => d.col * cellWidth + cellWidth / 2)\n                    .attr('y', d => d.row * cellHeight + cellHeight / 2)\n                    .attr('id', d => `text-${d.row}-${d.col}`)\n                    .attr('dy', '.30em')\n                    .attr('font-size', 15 / scale)\n                    .attr('fill', '#000')\n                    .attr('text-anchor', 'middle')\n                    .text(d => `(${d.row}, ${d.col})`)\n                    .style('display', 'block')\n                    .style('pointer-events', 'none'); // Ensure text does not capture mouse events, in order to allow clicking on the cells\n            }\n        } else {\n            if (texts) {\n                texts.style('display', 'none');\n            }\n        }\n    };\n\n    updateCellTextVisibility(1); // Initial update for default scale 1\n\n\n};\n\nimport { debounce } from 'lodash';\n\nconst debouncedResize = debounce(() => {\n    // requestAnimationFrame(() => {\n    //     drawGrid();\n    // });\n    if (!tableStore.caseData.input_tbl) return;\n    drawGrid(tableStore.caseData.input_tbl.length, tableStore.caseData.input_tbl[0].length);\n}, 100); // 调整延迟时间，单位为毫秒\n\nconst resizeObserver = new ResizeObserver(() => {\n    debouncedResize();\n});\n\nonMounted(() => {\n    if (container.value) {\n        resizeObserver.observe(container.value);\n    }\n});\n\nwatch(() => tableStore.currentCase, (newVal) => {\n    drawGrid(tableStore.caseData.input_tbl.length, tableStore.caseData.input_tbl[0].length);\n});\n</script>\n\n<style lang=\"less\">\n.grid-container {\n    width: 100%;\n    height: 100%;\n\n    /*\n    rect.cell-grid {\n        fill: #f9f7ff;\n        stroke: grey;\n        stroke-width: 1px;\n        transition: fill 0.2s, stroke 0.2s; //添加过渡效果，使颜色变化更平滑 \n    }\n\n    rect.cell-grid:hover {\n        fill: #ece9e6;\n        stroke: black;\n        stroke-width: 2px;\n        // outline: 2px solid black; // 确保边框宽度能够高亮显示\n    }\n    */\n}\n</style>","import script from \"./Minimap.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Minimap.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Minimap.vue?vue&type=style&index=0&id=3b92da4b&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"panel\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"system-name\" }, \"TableTidier\", -1)\nconst _hoisted_3 = { class: \"main-views\" }\nconst _hoisted_4 = { class: \"column left\" }\nconst _hoisted_5 = { class: \"column center\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"view\" }, [\n  /*#__PURE__*/_createElementVNode(\"h2\", { class: \"view-title\" }, \"Mapping Template Visualization\"),\n  /*#__PURE__*/_createElementVNode(\"div\", { class: \"view-content\" })\n], -1)\nconst _hoisted_7 = { class: \"column right\" }\nconst _hoisted_8 = { class: \"view\" }\nconst _hoisted_9 = { class: \"view-title\" }\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"span\", null, \"Code Panel\", -1)\nconst _hoisted_11 = { style: {\"float\":\"right\",\"margin-right\":\"50px\"} }\nconst _hoisted_12 = { class: \"view-content\" }\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"span\", null, \" Mapping Specification \", -1)\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"span\", null, \" Transformation Script \", -1)\n\nimport { ref } from \"vue\";\n\nimport InOutTable from \"@/components/InOutTable.vue\";\nimport CodeView from \"@/components/CodeView.vue\";\nimport Minimap from \"@/components/Minimap.vue\";\nimport ChatBot from \"@/components/ChatBot.vue\";\n\nimport { useTableStore } from \"@/store/table\";\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PanelView',\n  setup(__props) {\n\nconst tableStore = useTableStore();\n\nconst codePanel = ref(\"1\");\nconst loading = ref<boolean>(false);\n\nfunction transformTablebyCode() {\n  loading.value = true;\n  tableStore.transformTablebyCode();\n  loading.value = false;\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_tab_pane = _resolveComponent(\"a-tab-pane\")!\n  const _component_a_tabs = _resolveComponent(\"a-tabs\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(InOutTable)\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _hoisted_6,\n        _createVNode(Minimap)\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createElementVNode(\"div\", _hoisted_9, [\n            _hoisted_10,\n            _createElementVNode(\"span\", _hoisted_11, [\n              _createVNode(_component_a_button, {\n                size: \"small\",\n                loading: loading.value,\n                onClick: transformTablebyCode\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"Run\")\n                ]),\n                _: 1\n              }, 8, [\"loading\"])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_12, [\n            _createVNode(_component_a_tabs, {\n              activeKey: codePanel.value,\n              \"onUpdate:activeKey\": _cache[0] || (_cache[0] = ($event: any) => ((codePanel).value = $event)),\n              type: \"card\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_tab_pane, { key: \"1\" }, {\n                  tab: _withCtx(() => [\n                    _hoisted_13\n                  ]),\n                  default: _withCtx(() => [\n                    _createVNode(CodeView, { codeType: \"mapping_spec\" })\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_tab_pane, { key: \"2\" }, {\n                  tab: _withCtx(() => [\n                    _hoisted_14\n                  ]),\n                  default: _withCtx(() => [\n                    _createVNode(CodeView, { codeType: \"transform_script\" })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"activeKey\"])\n          ])\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div id=\"panel\">\n    <div class=\"system-name\">TableTidier</div>\n    <!-- <ChatBot /> -->\n    <div class=\"main-views\">\n      <!-- Column 1 -->\n      <div class=\"column left\">\n        <InOutTable />\n      </div>\n\n      <!-- Column 2 -->\n      <div class=\"column center\">\n        <div class=\"view\">\n          <h2 class=\"view-title\">Mapping Template Visualization</h2>\n          <div class=\"view-content\"></div>\n        </div>\n        <Minimap />\n      </div>\n\n      <!-- Column 3 -->\n      <div class=\"column right\">\n        <div class=\"view\">\n          <div class=\"view-title\">\n            <span>Code Panel</span>\n            <span style=\"float: right; margin-right: 50px\">\n              <a-button size=\"small\" :loading=\"loading\" @click=\"transformTablebyCode\">Run</a-button>\n            </span>\n          </div>\n          <div class=\"view-content\">\n            <a-tabs v-model:activeKey=\"codePanel\" type=\"card\">\n              <a-tab-pane key=\"1\">\n                <template #tab>\n                  <span>\n                    <!-- <apple-outlined /> -->\n                    Mapping Specification\n                  </span>\n                </template>\n                <CodeView codeType=\"mapping_spec\" />\n              </a-tab-pane>\n              <a-tab-pane key=\"2\">\n                <template #tab>\n                  <span>\n                    <!-- <android-outlined /> -->\n                    Transformation Script\n                  </span>\n                </template>\n                <CodeView codeType=\"transform_script\" />\n              </a-tab-pane>\n            </a-tabs>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\n\nimport InOutTable from \"@/components/InOutTable.vue\";\nimport CodeView from \"@/components/CodeView.vue\";\nimport Minimap from \"@/components/Minimap.vue\";\nimport ChatBot from \"@/components/ChatBot.vue\";\n\nimport { useTableStore } from \"@/store/table\";\nconst tableStore = useTableStore();\n\nconst codePanel = ref(\"1\");\nconst loading = ref<boolean>(false);\n\nfunction transformTablebyCode() {\n  loading.value = true;\n  tableStore.transformTablebyCode();\n  loading.value = false;\n}\n\n</script>\n\n<style lang=\"less\">\n#panel {\n  font-family: \"Arial\", sans-serif;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100vh;\n  margin: 0;\n  padding: 0;\n  background-color: #f0f0f0;\n  /* Background color for the whole panel */\n}\n\n.system-name {\n  font-size: 23px;\n  font-weight: bold;\n  width: calc(100vw - 50px);\n  margin-top: 3px;\n  //   margin: 20px 0;\n  padding: 10px 16px;\n  background-color: #3498db;\n  /* System name background color */\n  color: white;\n  /* System name text color */\n  //   border-radius: 8px;\n}\n\n.main-views {\n  display: flex;\n  justify-content: space-between;\n  width: calc(100vw - 15px);\n  padding: 1px;\n  box-sizing: border-box;\n\n  .column {\n    height: calc(100vh - 54px);\n  }\n\n  .left {\n    flex: 6;\n\n    .view {\n      flex: 1;\n    }\n  }\n\n  .center {\n    flex: 5;\n\n    .view {\n      flex: 1;\n    }\n  }\n\n  .right {\n    flex: 5;\n\n    .view {\n      flex: 1;\n\n      // // height: calc(100vh - 80px);\n      .ant-tabs {\n        height: 100%;\n\n        .ant-tabs-content {\n          height: 100%;\n        }\n      }\n    }\n  }\n}\n\n.column {\n  display: flex;\n  flex-direction: column;\n}\n\n.view {\n  //   margin: 8px 2px 2px 8px;\n  padding: 10px;\n  border: 1px solid #ccc;\n  //   border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  background-color: #ffffff;\n  /* View background color */\n}\n\n.view-title {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 10px;\n  color: #2c3e50;\n  /* View title text color */\n}\n\n.view-content {\n  // overflow-y: auto;\n  overflow: hidden;\n  height: calc(100% - 40px);\n}\n\n.mapping-details {\n  display: flex;\n  flex-direction: column;\n}\n\n.sub-view {\n  margin-bottom: 5px;\n  flex: 1;\n}\n\n.sub-view-title {\n  font-size: 16px;\n  font-weight: bold;\n  margin-bottom: 5px;\n  color: #e67e22;\n  /* Sub-view title text color */\n}\n</style>\n","import script from \"./PanelView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PanelView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PanelView.vue?vue&type=style&index=0&id=56ef4ba5&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=58dc7c9e&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=58dc7c9e&lang=less\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\nimport { createPinia } from 'pinia'\n\nconst pinia = createPinia()\nconst app = createApp(App)\n\nimport { Select, Upload, Button, Tabs, Tooltip, Popover, Input, Modal } from \"ant-design-vue\";\n// import 'ant-design-vue/dist/antd.css'\n\napp.use(pinia).use(Select).use(Tabs).use(Button).use(Upload)\n    .use(Tooltip).use(Popover).use(Input).use(Modal)\n\napp.mount('#app')\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 89387;\nmodule.exports = webpackEmptyContext;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"9\":\"0eb45d16\",\"293\":\"16888f42\",\"703\":\"dbf69444\",\"1034\":\"fd1ba391\",\"1157\":\"10c8f73c\",\"1461\":\"849cd3de\",\"1477\":\"bd607d38\",\"1813\":\"4d15f492\",\"1915\":\"4e1a5f91\",\"2149\":\"de48b7bc\",\"2365\":\"fce0cfa6\",\"2412\":\"d3741863\",\"2501\":\"609e1b41\",\"2591\":\"c50d8490\",\"2689\":\"e4b75d6d\",\"2709\":\"cac49c05\",\"2799\":\"e1dbe219\",\"2965\":\"d7dfd0e9\",\"2999\":\"df850aaf\",\"3051\":\"f14d6281\",\"3061\":\"d399cda5\",\"3071\":\"a303a28e\",\"3445\":\"0ff7e9b4\",\"3473\":\"a7537b09\",\"3577\":\"e2ca1d28\",\"3691\":\"33cf0d23\",\"3717\":\"79a36ece\",\"3753\":\"01925c0b\",\"3765\":\"759df618\",\"3775\":\"b3df24ad\",\"3948\":\"52b3e958\",\"4205\":\"24b198b8\",\"4261\":\"6956a853\",\"4341\":\"8f9322e5\",\"4373\":\"3b06e083\",\"4485\":\"7b59acba\",\"4605\":\"51ec011b\",\"4621\":\"31cd9af3\",\"4805\":\"a9f68a4a\",\"4977\":\"8288ffd6\",\"5077\":\"f39d5cf4\",\"5081\":\"a53416e4\",\"5083\":\"c394f624\",\"5093\":\"90618cb2\",\"5282\":\"08fc09bc\",\"5285\":\"773f587c\",\"5287\":\"aa8f3de9\",\"5303\":\"bd9e8dd0\",\"5365\":\"45daba38\",\"5521\":\"647b10a4\",\"5589\":\"57207c2d\",\"5609\":\"58111415\",\"5653\":\"50566b72\",\"5749\":\"8427442b\",\"5841\":\"31d174b0\",\"6059\":\"df92538a\",\"6121\":\"1a3a1618\",\"6181\":\"e36a77ec\",\"6229\":\"6291c48d\",\"6309\":\"430f1630\",\"6325\":\"3d043424\",\"6613\":\"2dfa5db1\",\"6757\":\"c5514908\",\"6821\":\"321025c8\",\"6845\":\"d2590b8e\",\"7045\":\"c844481a\",\"7217\":\"ff15130f\",\"7219\":\"e0c4a0ce\",\"7449\":\"379ad554\",\"7461\":\"260b935b\",\"7525\":\"24dc0392\",\"7623\":\"4e577647\",\"7641\":\"dd97b582\",\"8175\":\"35d86c7b\",\"8285\":\"c20339cc\",\"8329\":\"6bbe3b90\",\"8387\":\"6869ef81\",\"8533\":\"29375b9c\",\"8653\":\"07e5d352\",\"8981\":\"9c06e434\",\"9009\":\"49384fbf\",\"9437\":\"1f553a12\",\"9445\":\"bde299da\",\"9626\":\"e73f15dd\",\"9717\":\"547c11f4\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"frontend:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/TableTidier-Code/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t3524: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkfrontend\"] = self[\"webpackChunkfrontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(62280); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_panel_view","_resolveComponent","_openBlock","_createElementBlock","_createVNode","ValueType","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_REFERENCE_AREA_LAYER","DEFAULT_REFERENCE_AREA_POSI","DEFAULT_X_OFFSET","DEFAULT_Y_OFFSET","DEFAULT_X_DIRECTION","DEFAULT_Y_DIRECTION","DEFAULT_CONTEXT_POSITION","DEFAULT_TARGET_COL","DEFAULT_TARGET_COLS","DEFAULT_VALUE_CSTR","String","DEFAULT_FILL","completeCellSelection","selection","referenceAreaLayer","referenceAreaPosi","xOffset","yOffset","completeCellConstraint","constraint","completedSelection","valueCstr","completeContextTransform","transform","position","targetCol","completeTemplate","template","startCell","size","width","undefined","height","constraints","traverse","xDirection","yDirection","context","targetCols","fill","children","completeSpecification","specification","sortWithCorrespondingArray","A","B","sortOrder","indexedArray","value","index","sort","a","b","sortedB","item","evaluateConstraint","cellValue","isNaN","Number","None","calculateOffset","offset","currentArea","rootArea","getCellBySelect","select","area","parent","layer","areaLayer","li","cellPosi","x","y","areaTbl","calculateSize","startX","startY","getSubArea","table","subArea","i","row","slice","push","fillColumns","tidyData","maxLength","Math","max","values","column","length","key","fillValue","traverseArea","endX","endY","currentStartX","currentEndX","currentStartY","currentEndY","tmpArea","areaHeight","areaWidth","matchArea","instanceIndex","xIndex","yIndex","cellInfo","templateRef","cstr","transformArea","cellArray","flat","ctxCols","ctxCellsInfo","ctxSelections","forEach","ri","cell","ci","ctxPosiFn","customSelections","customSelectionsWithDefaults","cellCtxs","cellCtxsInfo","console","log","toString","customMapColbyCxt","ctxCells","transformedCols","floor","hasOwnProperty","processTemplate","templateIndex","areaChild","templateChild","ti","transformTable","spec","specWithDefaults","color_config","stroke","text","weight","useTableStore","defineStore","state","caseList","currentCase","caseData","editor","mapping_spec","instance","shallowRef","transform_script","input_tbl","cells","tbl","in2out","output_tbl","cols","out2in","rows","actions","loadCaseData","caseN","prompt","case_path","data_res","spec_res","script_res","Promise","all","fetch","dataText","specText","scriptText","ok","this","updateData","updateSettings","colHeaders","JSON","parse","error","loadCaseSpec","status","response","highlightTblCells","c","col","start_point","startPoint","scrollViewportTo","verticalSnap","horizontalSnap","highlightMinimapCells","d3","attr","default","className","out2in_mapping","posi","startsWith","endsWith","pi_n","output_posi","in2out_mapping","pi","grid_cell_click","tbl_cell","getCell","dispatchEvent","MouseEvent","bubbles","points","topLeft","current","transformTablebyCode","getValue","result","ts","compilerOptions","target","ES2015","CommonJS","evalFunction","Function","outputText","message","content","style","whiteSpace","convertDictToArray","derivePosiMapping","dictTbl","numRows","header","outTbl","j","inPosi","outPosi","getters","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_defineComponent","__name","setup","__props","registerAllModules","tableStore","output_col","ref","caseOption","v","label","inHotInst","outHotInst","renderTblCell","td","prop","cellProperties","Handsontable","renderers","TextRenderer","apply","arguments","innerHTML","showDropdown","hideDropdown","async","handleCaseChange","onMounted","proxy","getCurrentInstance","$refs","inputTbl","hotInstance","outputTbl","outsideClickDeselects","targetEle","addHook","event","coords","grid","TD","_component_a_select","_Fragment","_unref","options","onChange","onMouseenter","onMouseleave","HotTable","data","rowHeaders","manualColumnResize","renderer","contextMenu","licenseKey","__exports__","props","codeType","editorDefaultOptions","language","theme","fontSize","glyphMargin","automaticLayout","autoIndent","readOnly","minimap","enabled","lineNumbersMinChars","scrollBeyondLastLine","padding","bottom","editorWrapper","initEditor","dispose","editorOptions","monaco","create","watch","newVal","setValue","handleResize","debounce","layout","resizeObserver","ResizeObserver","libUri","existingModel","getModels","find","model","uri","then","tsContent","typescript","javascriptDefaults","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","setCompilerOptions","ScriptTarget","allowNonTsExtensions","addExtraLib","createModel","observe","onUnmounted","ref_key","container","transformStatue","offsetX","offsetY","zoom","resetZoom","transition","duration","call","generateGrid","drawGrid","selectAll","remove","containerWidth","clientWidth","containerHeight","clientHeight","cellWidth","min","cellHeight","on","k","updateCellTextVisibility","svg","append","matrix","classed","texts","grids","enter","d","raise","node","getBBox","scale","scaledCellWidth","scaledCellHeight","debouncedResize","_component_a_button","onClick","_withCtx","_createTextVNode","_","_hoisted_12","_hoisted_13","_hoisted_14","codePanel","loading","_component_a_tab_pane","_component_a_tabs","InOutTable","Minimap","activeKey","$event","type","tab","CodeView","defineComponent","name","components","PanelView","pinia","createPinia","app","createApp","App","use","Select","Tabs","Button","Upload","Tooltip","Popover","Input","Modal","mount","webpackEmptyContext","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","m","amdO","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","splice","r","n","getter","__esModule","definition","defineProperty","enumerable","get","f","chunkId","reduce","promises","u","miniCssF","g","globalThis","window","obj","prototype","inProgress","dataWebpackPrefix","l","url","done","script","needAttach","scripts","document","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","setTimeout","bind","head","appendChild","Symbol","toStringTag","nmd","paths","p","installedChunks","installedChunkData","promise","reject","loadingEnded","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}