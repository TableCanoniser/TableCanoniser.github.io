{"version":3,"file":"js/app.c2fa42b4.js","mappings":"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","sources":["webpack://TableCanoniser/./node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://TableCanoniser/./src/components/InOutTable.vue?7f1b","webpack://TableCanoniser/./src/components/InOutTable.vue","webpack://TableCanoniser/./src/components/PatternVis.vue?27d9","webpack://TableCanoniser/./src/components/PatternVis.vue","webpack://TableCanoniser/./src/App.vue?d8c0","webpack://TableCanoniser/./src/App.vue","webpack://TableCanoniser/./src/components/InOutTable.vue?cbe2","webpack://TableCanoniser/./src/components/CodeView.vue?243d","webpack://TableCanoniser/./src/components/CodeView.vue","webpack://TableCanoniser/./src/components/CodeView.vue?33e2","webpack://TableCanoniser/./src/components/PatternVis.vue?c92c","webpack://TableCanoniser/./src/views/PanelView.vue?6324","webpack://TableCanoniser/./src/views/PanelView.vue","webpack://TableCanoniser/./src/views/PanelView.vue?f0ad","webpack://TableCanoniser/./src/App.vue?7ccd","webpack://TableCanoniser/./src/main.ts","webpack://TableCanoniser/./src/store/table.ts","webpack://TableCanoniser/./src/utils/dragLayout.ts","webpack://TableCanoniser/./src/utils/drawTree.ts","webpack://TableCanoniser/./src/utils/lang.ts","webpack://TableCanoniser/./src/utils/minimap.ts","webpack://TableCanoniser/./src/utils/style.ts","webpack://TableCanoniser/./src/utils/template.ts","webpack://TableCanoniser/../src/grammar.ts","webpack://TableCanoniser/../src/parser.ts","webpack://TableCanoniser/./node_modules/typescript/lib/ sync","webpack://TableCanoniser/./src/components/ColType.vue?5dc4","webpack://TableCanoniser/./src/components/ColType.vue","webpack://TableCanoniser/./src/components/ColType.vue?edef","webpack://TableCanoniser/webpack/bootstrap","webpack://TableCanoniser/webpack/runtime/amd options","webpack://TableCanoniser/webpack/runtime/chunk loaded","webpack://TableCanoniser/webpack/runtime/compat get default export","webpack://TableCanoniser/webpack/runtime/define property getters","webpack://TableCanoniser/webpack/runtime/ensure chunk","webpack://TableCanoniser/webpack/runtime/get javascript chunk filename","webpack://TableCanoniser/webpack/runtime/get mini-css chunk filename","webpack://TableCanoniser/webpack/runtime/global","webpack://TableCanoniser/webpack/runtime/hasOwnProperty shorthand","webpack://TableCanoniser/webpack/runtime/load script","webpack://TableCanoniser/webpack/runtime/make namespace object","webpack://TableCanoniser/webpack/runtime/node module decorator","webpack://TableCanoniser/webpack/runtime/publicPath","webpack://TableCanoniser/webpack/runtime/jsonp chunk loading","webpack://TableCanoniser/webpack/startup"],"sourcesContent":["var map = {\n\t\"./af\": 22190,\n\t\"./af.js\": 22190,\n\t\"./ar\": 7218,\n\t\"./ar-dz\": 85785,\n\t\"./ar-dz.js\": 85785,\n\t\"./ar-kw\": 29417,\n\t\"./ar-kw.js\": 29417,\n\t\"./ar-ly\": 56904,\n\t\"./ar-ly.js\": 56904,\n\t\"./ar-ma\": 98617,\n\t\"./ar-ma.js\": 98617,\n\t\"./ar-ps\": 91318,\n\t\"./ar-ps.js\": 91318,\n\t\"./ar-sa\": 82699,\n\t\"./ar-sa.js\": 82699,\n\t\"./ar-tn\": 36789,\n\t\"./ar-tn.js\": 36789,\n\t\"./ar.js\": 7218,\n\t\"./az\": 23050,\n\t\"./az.js\": 23050,\n\t\"./be\": 8316,\n\t\"./be.js\": 8316,\n\t\"./bg\": 70310,\n\t\"./bg.js\": 70310,\n\t\"./bm\": 58884,\n\t\"./bm.js\": 58884,\n\t\"./bn\": 83469,\n\t\"./bn-bd\": 46672,\n\t\"./bn-bd.js\": 46672,\n\t\"./bn.js\": 83469,\n\t\"./bo\": 39118,\n\t\"./bo.js\": 39118,\n\t\"./br\": 13113,\n\t\"./br.js\": 13113,\n\t\"./bs\": 23626,\n\t\"./bs.js\": 23626,\n\t\"./ca\": 40921,\n\t\"./ca.js\": 40921,\n\t\"./cs\": 17799,\n\t\"./cs.js\": 17799,\n\t\"./cv\": 12828,\n\t\"./cv.js\": 12828,\n\t\"./cy\": 93521,\n\t\"./cy.js\": 93521,\n\t\"./da\": 56962,\n\t\"./da.js\": 56962,\n\t\"./de\": 93294,\n\t\"./de-at\": 16158,\n\t\"./de-at.js\": 16158,\n\t\"./de-ch\": 95960,\n\t\"./de-ch.js\": 95960,\n\t\"./de.js\": 93294,\n\t\"./dv\": 47963,\n\t\"./dv.js\": 47963,\n\t\"./el\": 3432,\n\t\"./el.js\": 3432,\n\t\"./en-au\": 20998,\n\t\"./en-au.js\": 20998,\n\t\"./en-ca\": 38312,\n\t\"./en-ca.js\": 38312,\n\t\"./en-gb\": 45930,\n\t\"./en-gb.js\": 45930,\n\t\"./en-ie\": 58081,\n\t\"./en-ie.js\": 58081,\n\t\"./en-il\": 71594,\n\t\"./en-il.js\": 71594,\n\t\"./en-in\": 23904,\n\t\"./en-in.js\": 23904,\n\t\"./en-nz\": 1507,\n\t\"./en-nz.js\": 1507,\n\t\"./en-sg\": 19409,\n\t\"./en-sg.js\": 19409,\n\t\"./eo\": 22177,\n\t\"./eo.js\": 22177,\n\t\"./es\": 84805,\n\t\"./es-do\": 39155,\n\t\"./es-do.js\": 39155,\n\t\"./es-mx\": 69791,\n\t\"./es-mx.js\": 69791,\n\t\"./es-us\": 76098,\n\t\"./es-us.js\": 76098,\n\t\"./es.js\": 84805,\n\t\"./et\": 96240,\n\t\"./et.js\": 96240,\n\t\"./eu\": 20391,\n\t\"./eu.js\": 20391,\n\t\"./fa\": 20612,\n\t\"./fa.js\": 20612,\n\t\"./fi\": 4220,\n\t\"./fi.js\": 4220,\n\t\"./fil\": 65570,\n\t\"./fil.js\": 65570,\n\t\"./fo\": 5466,\n\t\"./fo.js\": 5466,\n\t\"./fr\": 14461,\n\t\"./fr-ca\": 66306,\n\t\"./fr-ca.js\": 66306,\n\t\"./fr-ch\": 27081,\n\t\"./fr-ch.js\": 27081,\n\t\"./fr.js\": 14461,\n\t\"./fy\": 73484,\n\t\"./fy.js\": 73484,\n\t\"./ga\": 76957,\n\t\"./ga.js\": 76957,\n\t\"./gd\": 72978,\n\t\"./gd.js\": 72978,\n\t\"./gl\": 89866,\n\t\"./gl.js\": 89866,\n\t\"./gom-deva\": 65011,\n\t\"./gom-deva.js\": 65011,\n\t\"./gom-latn\": 84724,\n\t\"./gom-latn.js\": 84724,\n\t\"./gu\": 71601,\n\t\"./gu.js\": 71601,\n\t\"./he\": 79802,\n\t\"./he.js\": 79802,\n\t\"./hi\": 9358,\n\t\"./hi.js\": 9358,\n\t\"./hr\": 13907,\n\t\"./hr.js\": 13907,\n\t\"./hu\": 10218,\n\t\"./hu.js\": 10218,\n\t\"./hy-am\": 20533,\n\t\"./hy-am.js\": 20533,\n\t\"./id\": 52844,\n\t\"./id.js\": 52844,\n\t\"./is\": 97353,\n\t\"./is.js\": 97353,\n\t\"./it\": 6364,\n\t\"./it-ch\": 20774,\n\t\"./it-ch.js\": 20774,\n\t\"./it.js\": 6364,\n\t\"./ja\": 6008,\n\t\"./ja.js\": 6008,\n\t\"./jv\": 68221,\n\t\"./jv.js\": 68221,\n\t\"./ka\": 92417,\n\t\"./ka.js\": 92417,\n\t\"./kk\": 42071,\n\t\"./kk.js\": 42071,\n\t\"./km\": 76149,\n\t\"./km.js\": 76149,\n\t\"./kn\": 94572,\n\t\"./kn.js\": 94572,\n\t\"./ko\": 60659,\n\t\"./ko.js\": 60659,\n\t\"./ku\": 66285,\n\t\"./ku-kmr\": 59398,\n\t\"./ku-kmr.js\": 59398,\n\t\"./ku.js\": 66285,\n\t\"./ky\": 81609,\n\t\"./ky.js\": 81609,\n\t\"./lb\": 119,\n\t\"./lb.js\": 119,\n\t\"./lo\": 81748,\n\t\"./lo.js\": 81748,\n\t\"./lt\": 71973,\n\t\"./lt.js\": 71973,\n\t\"./lv\": 81347,\n\t\"./lv.js\": 81347,\n\t\"./me\": 53023,\n\t\"./me.js\": 53023,\n\t\"./mi\": 65747,\n\t\"./mi.js\": 65747,\n\t\"./mk\": 64341,\n\t\"./mk.js\": 64341,\n\t\"./ml\": 63840,\n\t\"./ml.js\": 63840,\n\t\"./mn\": 62058,\n\t\"./mn.js\": 62058,\n\t\"./mr\": 19182,\n\t\"./mr.js\": 19182,\n\t\"./ms\": 45197,\n\t\"./ms-my\": 89136,\n\t\"./ms-my.js\": 89136,\n\t\"./ms.js\": 45197,\n\t\"./mt\": 36408,\n\t\"./mt.js\": 36408,\n\t\"./my\": 51683,\n\t\"./my.js\": 51683,\n\t\"./nb\": 53141,\n\t\"./nb.js\": 53141,\n\t\"./ne\": 29344,\n\t\"./ne.js\": 29344,\n\t\"./nl\": 44703,\n\t\"./nl-be\": 84641,\n\t\"./nl-be.js\": 84641,\n\t\"./nl.js\": 44703,\n\t\"./nn\": 79873,\n\t\"./nn.js\": 79873,\n\t\"./oc-lnc\": 61217,\n\t\"./oc-lnc.js\": 61217,\n\t\"./pa-in\": 24612,\n\t\"./pa-in.js\": 24612,\n\t\"./pl\": 24457,\n\t\"./pl.js\": 24457,\n\t\"./pt\": 1089,\n\t\"./pt-br\": 79146,\n\t\"./pt-br.js\": 79146,\n\t\"./pt.js\": 1089,\n\t\"./ro\": 45950,\n\t\"./ro.js\": 45950,\n\t\"./ru\": 27292,\n\t\"./ru.js\": 27292,\n\t\"./sd\": 56774,\n\t\"./sd.js\": 56774,\n\t\"./se\": 87493,\n\t\"./se.js\": 87493,\n\t\"./si\": 3761,\n\t\"./si.js\": 3761,\n\t\"./sk\": 49711,\n\t\"./sk.js\": 49711,\n\t\"./sl\": 88558,\n\t\"./sl.js\": 88558,\n\t\"./sq\": 8633,\n\t\"./sq.js\": 8633,\n\t\"./sr\": 90688,\n\t\"./sr-cyrl\": 47903,\n\t\"./sr-cyrl.js\": 47903,\n\t\"./sr.js\": 90688,\n\t\"./ss\": 31991,\n\t\"./ss.js\": 31991,\n\t\"./sv\": 4639,\n\t\"./sv.js\": 4639,\n\t\"./sw\": 15891,\n\t\"./sw.js\": 15891,\n\t\"./ta\": 45714,\n\t\"./ta.js\": 45714,\n\t\"./te\": 30206,\n\t\"./te.js\": 30206,\n\t\"./tet\": 24768,\n\t\"./tet.js\": 24768,\n\t\"./tg\": 28276,\n\t\"./tg.js\": 28276,\n\t\"./th\": 57977,\n\t\"./th.js\": 57977,\n\t\"./tk\": 56928,\n\t\"./tk.js\": 56928,\n\t\"./tl-ph\": 8046,\n\t\"./tl-ph.js\": 8046,\n\t\"./tlh\": 41361,\n\t\"./tlh.js\": 41361,\n\t\"./tr\": 64367,\n\t\"./tr.js\": 64367,\n\t\"./tzl\": 10627,\n\t\"./tzl.js\": 10627,\n\t\"./tzm\": 12636,\n\t\"./tzm-latn\": 98148,\n\t\"./tzm-latn.js\": 98148,\n\t\"./tzm.js\": 12636,\n\t\"./ug-cn\": 68823,\n\t\"./ug-cn.js\": 68823,\n\t\"./uk\": 40461,\n\t\"./uk.js\": 40461,\n\t\"./ur\": 41366,\n\t\"./ur.js\": 41366,\n\t\"./uz\": 83454,\n\t\"./uz-latn\": 18374,\n\t\"./uz-latn.js\": 18374,\n\t\"./uz.js\": 83454,\n\t\"./vi\": 78572,\n\t\"./vi.js\": 78572,\n\t\"./x-pseudo\": 80464,\n\t\"./x-pseudo.js\": 80464,\n\t\"./yo\": 93709,\n\t\"./yo.js\": 93709,\n\t\"./zh-cn\": 65873,\n\t\"./zh-cn.js\": 65873,\n\t\"./zh-hk\": 17549,\n\t\"./zh-hk.js\": 17549,\n\t\"./zh-mo\": 52240,\n\t\"./zh-mo.js\": 52240,\n\t\"./zh-tw\": 90405,\n\t\"./zh-tw.js\": 90405\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 35358;","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"view\" }\nconst _hoisted_2 = { class: \"view-title\" }\nconst _hoisted_3 = { class: \"head-text\" }\nconst _hoisted_4 = { style: {\"float\":\"right\",\"margin-right\":\"10px\"} }\nconst _hoisted_5 = { class: \"view-content\" }\nconst _hoisted_6 = {\n  id: \"output-tbl\",\n  style: {\"height\":\"calc(100% - 28px)\",\"overflow\":\"hidden\"}\n}\nconst _hoisted_7 = { class: \"view\" }\nconst _hoisted_8 = { class: \"view-title\" }\nconst _hoisted_9 = { style: {\"float\":\"right\",\"margin-right\":\"10px\"} }\nconst _hoisted_10 = { class: \"view-content\" }\nconst _hoisted_11 = {\n  id: \"output-tbl\",\n  style: {\"height\":\"calc(100% - 28px)\",\"overflow\":\"hidden\"}\n}\n\nimport {\n  getCurrentInstance,\n  ComponentPublicInstance,\n  ref,\n  onMounted,\n  watch,\n} from \"vue\";\nimport ColType from \"@/components/ColType.vue\";\nimport { HotTable } from \"@handsontable/vue3\";\nimport \"handsontable/dist/handsontable.full.css\";\nimport { registerAllModules } from \"handsontable/registry\";\nimport Handsontable from \"handsontable\";\nimport { useTableStore, Selection } from \"@/store/table\";\n// import Papa from 'papaparse';  // parse csv data\nimport * as XLSX from 'xlsx';  // parse excel data\nimport { Table2D, TableCanoniserTemplate } from \"@/table-canoniser/dist/grammar\"\nimport { message } from \"ant-design-vue\";\nimport { getNeighborEls } from '@/utils/dragLayout';\n\nimport { lang, langConfig } from \"@/utils/lang\";\n\n// import { ArrowUpTrayIcon } from '@heroicons/vue/24/solid'\n\n// register Handsontable's modules\nimport { drawMinimap } from '@/utils/minimap';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'InOutTable',\n  setup(__props) {\n\nregisterAllModules();\n\nconst tableStore = useTableStore();\n// const tblCases: { [key: string]: TblVisData } = tableStore.cases;\n\nconst output_col = ref(tableStore.output_tbl.cols);\nconst output_tbl = ref(tableStore.output_tbl.tbl);\nconst input_tbl = ref(tableStore.input_tbl.tbl);\n\nlet inHotInst: Handsontable;\nlet outHotInst: Handsontable;\n\nfunction renderTblCell(instance: Handsontable,\n  td: HTMLElement,\n  row: number,\n  col: number,\n  prop: any,\n  value: any,\n  cellProperties: any) {\n  // @ts-ignore\n  Handsontable.renderers.TextRenderer.apply(this, arguments);\n  td.innerHTML = `<div class=\"truncated\">${value}</div>`\n}\n\nfunction updateColInfoFn(tbl: \"input_tbl\" | \"output_tbl\") {\n  if (tbl === \"input_tbl\") {\n    const tblData = tableStore.input_tbl.tbl;\n    drawMinimap(tblData.length, tblData[0].length, document.querySelector('svg.tbl-container') as SVGSVGElement, tableStore);\n    tableStore.optimizeMiniTempDistance();\n    // tableStore.clearStatus(\"miniHighlight\");\n    tableStore.initTblInfo(false);\n    // tableStore.computeColInfo(\"output_tbl\");\n    tableStore.output_tbl.colInfo = [];\n    tableStore.spec.matchedInstNum = 0;\n  }\n  tableStore.computeColInfo(tbl);\n}\n\nfunction resetData() {\n  tableStore.input_tbl.tbl = JSON.parse(JSON.stringify(tableStore.currentInitData));\n  tableStore.input_tbl.instance.updateData(tableStore.input_tbl.tbl);\n  tableStore.input_tbl.instance.render();\n  updateColInfoFn(\"input_tbl\");\n}\n\n// const handleUploadChange = (info: any) => {\n//   if (info.file.status === 'done') {\n//     message.success(`${info.file.name} file uploaded successfully`);\n//   } else if (info.file.status === 'error') {\n//     message.error(`${info.file.name} file upload failed.`);\n//   }\n// };\n\nconst fileList = ref([]);\n// const fileList = ref<UploadProps['fileList']>([{\n//     uid: '1',\n//     name: 'xxx.png',\n//     status: 'done',\n//     response: 'Server Error 500', // custom error message to show\n//     url: 'http://www.baidu.com/xxx.png',\n//   },]);\nlet fileTblData: Table2D = [];\n\nconst handleUpload = (request: any) => {\n  // console.log(request.file);\n  // setTimeout(() => {\n  //   request.onSuccess(\"ok\");\n  // }, 0);\n  try {\n    const reader = new FileReader();\n    // if (request.file.type === 'text/csv' || request.file.type === 'text/plain') {\n    //   reader.onload = (e) => {\n    //     console.log(e);\n    //     const data = e.target?.result;\n    //     parseCsvData(data as string);\n    //   }\n    //   reader.readAsText(request.file);\n    // } else if (request.file.type.endsWith('sheet') || request.file.type.endsWith('excel')) {\n\n    reader.onload = (e) => {\n      const arrayBuffer = e.target?.result;\n      const workbook = XLSX.read(arrayBuffer, { type: 'array' });\n      const firstSheetName = workbook.SheetNames[0];\n      const worksheet = workbook.Sheets[firstSheetName];\n      const rawData: Table2D = XLSX.utils.sheet_to_json(worksheet, { header: 1 });\n      // Determine the maximum number of columns\n      const maxColumns = Math.max(...rawData.map(row => row.length));\n\n      // Ensure all rows have the same number of columns\n      fileTblData = rawData.map(row => {\n        while (row.length < maxColumns) {\n          row.push(undefined); // Fill missing cells with an empty string or a placeholder\n        }\n        return row;\n      });\n      handlePreview()\n      request.onSuccess(\"ok\");\n      // message.success(`${request.file.name} file uploaded successfully`);\n    };\n    reader.readAsArrayBuffer(request.file);\n  } catch (error) {\n    message.error(`${request.file.name} file uploaded failed.\\n${error}`);\n  }\n};\n\nlet saveLastCase = \"\"\n\nconst handleRemove = () => {\n  tableStore.initTblInfo()\n  tableStore.transformTblUpdateRootArea();\n  tableStore.currentCase = saveLastCase ? saveLastCase : tableStore.caseList[0];\n  saveLastCase = \"\"\n  tableStore.caseList.pop();\n};\n\nconst handlePreview = () => {\n  // executed when file link or preview icon is clicked.\n  tableStore.initTblInfo()\n  tableStore.input_tbl.tbl = fileTblData;\n  tableStore.input_tbl.instance.updateData(fileTblData);\n  tableStore.input_tbl.instance.render();\n  tableStore.currentInitData = JSON.parse(JSON.stringify(fileTblData));\n  tableStore.transformTblUpdateRootArea();\n  if (!tableStore.currentCase.startsWith(\"Custom\")) {\n    saveLastCase = tableStore.currentCase\n  }\n  if (!tableStore.caseList.includes(\"Custom File\")) {\n    tableStore.caseList.push(\"Custom File\");\n  }\n  tableStore.currentCase = \"Custom File\";\n  // 清空映射规范\n  tableStore.editor.mappingSpec.code = tableStore.editor.mappingSpec.codePref + \"[\\n  // Please write the specification here\\n];\"\n};\n\nwatch(() => tableStore.currentCase, (newVal) => {\n  if (newVal.startsWith(\"Custom\")) handlePreview();\n  else tableStore.loadCaseData(newVal);\n});\n\n\n// 函数用于将二维数组转换为 CSV 格式\nfunction arrayToCSV(array: Table2D) {\n  return array.map(row => row.map(cell => `${cell === undefined ? '' : cell}`).join(',')).join('\\n');\n}\n\nconst handleDownload = () => {\n  if (tableStore.output_tbl.cols.length === 0) {\n    message.warning('The output table is empty.');\n    return;\n  }\n  const csv = arrayToCSV([tableStore.output_tbl.cols, ...tableStore.output_tbl.tbl]);\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = 'tidy table.csv'; // 下载文件的名称\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url); // 释放内存\n\n  message.success('The output table has been downloaded successfully.');\n};\n\nfunction normalizeSelection(selections: Selection[]): Selection[] {\n  return selections.map(([row1, col1, row2, col2]) => {\n    // 修正负数坐标为0\n    if (row1 < 0) row1 = 0;\n    if (col1 < 0) col1 = 0;\n    if (row2 < 0) row2 = 0;\n    if (col2 < 0) col2 = 0;\n\n    // 确保startRow <= endRow 和 startCol <= endCol\n    const startRow = Math.min(row1, row2);\n    const endRow = Math.max(row1, row2);\n    const startCol = Math.min(col1, col2);\n    const endCol = Math.max(col1, col2);\n\n    return [startRow, startCol, endRow, endCol];\n  });\n}\n\nfunction initEventsForTbl(tbl: \"input_tbl\" | \"output_tbl\") {\n  let tblInst1: Handsontable, tblInst2: Handsontable;\n  const tbl2 = tbl === \"input_tbl\" ? \"output_tbl\" : \"input_tbl\";\n  if (tbl === \"input_tbl\") {\n    tblInst1 = inHotInst;\n    tblInst2 = outHotInst;\n  } else {\n    tblInst1 = outHotInst;\n    tblInst2 = inHotInst;\n  }\n  tblInst1.updateSettings({\n    outsideClickDeselects: (targetEle) => {\n      const targetClassName = targetEle?.className;\n      // if ((targetEle.parentNode?.parentNode as HTMLElement).classList.contains(\"goToInstance\") || (targetEle.parentNode as HTMLElement).classList.contains(\"goToInstance\"))\n      if (targetEle.closest(\".goToInstance\") !== null) {\n        if (document.body.style.cursor === 'cell') {\n          tableStore.clearStatus(\"matchArea\");\n        }\n        return true;\n      };\n      if (targetClassName === \"wtHolder\") {\n        return true;\n      }\n      if (typeof targetClassName !== \"string\") {\n        tblInst2.updateSettings({ cell: [] });\n        return true;\n      }\n      if (tblInst1 === outHotInst && [\"relative\", \"rowHeader\", \"current\", \"truncated\"].some((c) => targetClassName.split(\" \").includes(c))) {\n        // 如果在 input 表格内点击：\n        if (document.body.style.cursor !== 'cell') {\n          tblInst2.updateSettings({ cell: [] });\n        }\n      } else {\n        tableStore.clearStatus(\"matchArea\");\n        tblInst2.updateSettings({ cell: [] });\n      }\n      tableStore.highlightMinimapCells([]);\n      tableStore.clearStatus(\"tree\");\n\n      if (tbl === \"input_tbl\") {\n        if (!(targetClassName.startsWith(\"mtk\") || targetClassName === \"view-line\"))\n          tableStore.editor.mappingSpec.decorations?.clear();\n      }\n\n      return true;\n    },\n  });\n\n  tblInst1.addHook(\"afterColumnResize\", (currentColumn, newSize, isDoubleClick) => {\n    // 修改单元格宽度后的回调\n    tableStore.computeColInfo(tbl);\n  });\n  // 因为添加了对tbl的修改监听，所以这些钩子函数可以不用定义\n  tblInst1.addHook(\"afterChange\", (changes, source) => {\n    // 修改单元格内容后的回调\n    if (changes && changes.some(ci => ci[2] !== ci[3])) {\n      if (tbl === \"input_tbl\") {\n        // tableStore.clearStatus(\"miniHighlight\");\n        tableStore.initTblInfo(false);\n        tableStore.computeColInfo(\"output_tbl\");\n        tableStore.spec.matchedInstNum = 0;\n      }\n      tableStore.computeColInfo(tbl);\n    }\n  });\n  tblInst1.addHook(\"afterCreateRow\", () => updateColInfoFn(tbl));\n  tblInst1.addHook(\"afterCreateCol\", () => updateColInfoFn(tbl));\n  tblInst1.addHook(\"afterRemoveRow\", () => updateColInfoFn(tbl));\n  tblInst1.addHook(\"afterRemoveCol\", () => updateColInfoFn(tbl));\n\n  tblInst1.addHook(\"afterOnCellMouseDown\", (e) => {\n    tblInst2.updateSettings({ cell: [] });\n  });\n  tblInst1.addHook(\"afterOnCellMouseUp\", (event, coords, TD) => {\n    const selected = normalizeSelection(tblInst1.getSelected() || []);\n    // key 表示所选区域，value 表示所选区域所有单元格的坐标\n    const { selectedCoords, hightedCells } = tableStore.getHightlightedCells(selected);\n\n    // 打印所有坐标\n    // console.log(selectedCoords);\n\n    const cells = tableStore.in_out_mapping(selectedCoords, tbl);\n    tableStore.highlightTblCells(tbl2, cells);\n    // tableStore.highlightMinimapCells([{ ...coords, className: \"posi-mapping\" }]);\n\n    if (tbl === \"input_tbl\") {\n      tableStore.highlightMinimapCells(hightedCells);\n      // console.log(document.body.style.cursor, tableStore.spec.selectAreaFromNode, tableStore.spec.selectAreaFromLegend.length);\n      if (document.body.style.cursor === 'cell') {\n        if (tableStore.spec.selectAreaFromNode) {\n          // 说明需要重新为某个节点选择区域\n          tableStore.tree.instanceIndex = 0;\n          tableStore.updateVisTreeAreaBox();\n          const selectType = tableStore.spec.selectAreaFromNode;\n          const visNode = tableStore.spec.selectNode!.data;\n          const nx = visNode.x, ny = visNode.y, nw = visNode.width, nh = visNode.height;\n          const [startRow, startCol, endRow, endCol] = selected[0];\n          const offsetX = startCol - nx, offsetY = startRow - ny;\n          if (selectType.startsWith(\"3\")) {\n            // Add Sub-Template Logic\n            const width = endCol - startCol + 1;\n            const height = endRow - startRow + 1;\n            const traverse = (visNode.children && visNode.children.length > 0) ? {} : {\n              xDirection: nw >= 2 * width ? 'after' as const : undefined,\n              yDirection: nh >= 2 * height ? 'after' as const : undefined\n            }\n            let extract: any = null, extractColor: string = '';\n            const maxCNum = tableStore.findMaxCNumber() + 1;\n\n            switch (selectType) {\n              case \"3-0\":\n                // Target Cols - Position Based Logic\n                extract = {\n                  byPositionToTargetCols: Array.from({ length: width * height }, (_, i) => `C${maxCNum + i}`)\n                }\n                extractColor = 'positionShallow';\n                break;\n              case \"3-1\":\n                // Target Cols - Context Based Logic\n                extract = {\n                  byContext: {\n                    position: 'above'\n                  }\n                }\n                extractColor = 'contextShallow';\n                break;\n              case \"3-2\":\n                // Target Cols - Value Based Logic\n                const createExtract = () => {\n                  return eval(`currentAreaTbl => {\n                  // Please replace the default code with the necessary implementation to complete the function.\n                  return currentAreaTbl.flat().map((cell, i) => 'C' + (${maxCNum} + i))\n                  }`)\n                }\n                extract = {\n                  byValue: createExtract()\n                }\n                extractColor = 'valueShallow';\n                break;\n              case \"3-3\":\n                // Target Cols - No Extract Logic\n                extract = undefined\n                extractColor = 'nullShallow';\n                break;\n            }\n\n            const childPattern: TableCanoniserTemplate = {\n              match: {\n                startCell: {\n                  // offsetLayer: \"current\",\n                  // offsetFrom: \"topLeft\",\n                  offsetX: offsetX,\n                  offsetY: offsetY\n                },\n                size: { width, height },\n                traverse\n              },\n              extract\n            }\n\n            tableStore.insertNodeOrPropertyIntoSpecs(childPattern, \"children\");\n            tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(childPattern), extractColor];\n\n          } else if (selectType === \"1\") {\n            // Add Constraints Logic\n            const cellValue = inHotInst.getDataAtCell(startRow, startCol);\n            const constraint = {\n              offsetFrom: \"topLeft\",\n              offsetX,\n              offsetY,\n              valueCstr: tableStore.getCellDataType(cellValue) // TableCanoniserKeyWords.String,\n            }\n            tableStore.insertNodeOrPropertyIntoSpecs(constraint, \"constraints\");\n            tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(constraint, tableStore.getNodebyPath(tableStore.spec.rawSpecs, visNode.path!)), 'selectionShallow']; // `${visNode.type}Shallow`\n          }\n\n          tableStore.spec.selectAreaFromNode = \"\";\n          tableStore.clearStatus(\"matchArea\");\n\n        } else if (tableStore.spec.selectAreaFromLegend.length) {\n          // 说明从legend处选择区域\n          inHotInst.updateSettings({ cell: [] });\n          const selectFromLegend = tableStore.spec.selectAreaFromLegend;\n          tableStore.spec.selectionsAreaFromLegend.push(selected[0]);\n          tableStore.spec.selectionsPath.push([]);\n          if (selectFromLegend.length < tableStore.spec.selectionsAreaFromLegend.length) {\n            selectFromLegend.push(selectFromLegend[selectFromLegend.length - 1])\n          }\n          const cells = tableStore.generateHighlightCells(tableStore.spec.selectionsAreaFromLegend, selectFromLegend);\n          tableStore.highlightTblCells(tbl, cells);\n          // document.body.style.cursor = 'default';\n          // document.documentElement.style.setProperty('--custom-cursor', 'default');\n\n          const { specs, newSpec } = tableStore.buildTree(tableStore.spec.selectionsAreaFromLegend, selectFromLegend, tableStore.spec.selectionsPath);\n\n          tableStore.stringifySpec(specs);\n          tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(newSpec, null, specs), `${selectFromLegend[selectFromLegend.length - 1]}Shallow`];\n        }\n      }\n      tableStore.highlightNodes(selected);\n    } else {\n      tableStore.highlightMinimapCells(cells);\n      const newSelections = cells.map(cell => [cell.row, cell.col, cell.row, cell.col] as Selection)\n      tableStore.highlightNodes(newSelections);\n    }\n  });\n}\n\nonMounted(() => {\n\n  const proxy = getCurrentInstance()?.proxy as ComponentPublicInstance;\n  inHotInst = (proxy.$refs.inputTbl as any).hotInstance as Handsontable;\n  outHotInst = (proxy.$refs.outputTbl as any).hotInstance as Handsontable;\n\n  tableStore.input_tbl.instance = inHotInst;\n  tableStore.output_tbl.instance = outHotInst;\n\n  initEventsForTbl(\"input_tbl\");\n  initEventsForTbl(\"output_tbl\");\n\n  // keepIconsSynchronizedWithTable() { },\n  const iconScrolls = document.querySelectorAll('.icons-container .icon-scroll');\n  const tblScrolls = document.querySelectorAll('.ht_master .wtHolder');\n\n  iconScrolls.forEach((iconScroll, index) => {\n    iconScroll.addEventListener('scroll', () => {\n      tblScrolls[index].scrollLeft = iconScroll.scrollLeft;\n    });\n\n    tblScrolls[index].addEventListener('scroll', () => {\n      iconScroll.scrollLeft = tblScrolls[index].scrollLeft;\n    });\n  })\n});\n\n// function showDropdown() {\n//   //   isOpen = true;\n// }\n// function hideDropdown() {\n//   //   isOpen = false;\n// }\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_upload = _resolveComponent(\"a-upload\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_unref(langConfig)[_unref(lang)].table.input), 1),\n        _createElementVNode(\"span\", _hoisted_4, [\n          _createVNode(_component_a_upload, {\n            \"file-list\": fileList.value,\n            \"onUpdate:fileList\": _cache[0] || (_cache[0] = ($event: any) => ((fileList).value = $event)),\n            \"max-count\": 1,\n            accept: \".csv, .txt, .xls, .xlsx\",\n            customRequest: handleUpload,\n            onRemove: handleRemove,\n            onPreview: handlePreview,\n            showUploadList: {\n            showRemoveIcon: true,\n          }\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_a_button, { size: \"small\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_icon, {\n                    name: \"bi-upload\",\n                    scale: \"0.85\"\n                  }),\n                  _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].table.upload), 1)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"file-list\"]),\n          _createVNode(_component_a_button, {\n            style: {\"margin-left\":\"5px\"},\n            size: \"small\",\n            onClick: resetData\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, {\n                name: \"bi-arrow-clockwise\",\n                scale: \"0.9\"\n              }),\n              _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].table.reset), 1)\n            ]),\n            _: 1\n          })\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createVNode(ColType, { tblType: \"input_tbl\" }),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createVNode(_unref(HotTable), {\n            ref: \"inputTbl\",\n            data: input_tbl.value,\n            rowHeaders: true,\n            colHeaders: true,\n            manualColumnResize: true,\n            autoWrapRow: true,\n            autoWrapCol: true,\n            contextMenu: true,\n            renderer: renderTblCell,\n            licenseKey: \"non-commercial-and-evaluation\"\n          }, null, 8, [\"data\"])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", {\n      class: \"divider-w\",\n      onMousedown: _cache[1] || (_cache[1] = ($event: any) => (_unref(getNeighborEls)($event, 'width'))),\n      title: \"Drag to resize\"\n    }, null, 32),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].table.output), 1),\n        _createElementVNode(\"span\", _hoisted_9, [\n          _createVNode(_component_a_button, {\n            size: \"small\",\n            onClick: handleDownload\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, {\n                name: \"bi-download\",\n                scale: \"0.85\"\n              }),\n              _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].table.download), 1)\n            ]),\n            _: 1\n          })\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createVNode(ColType, { tblType: \"output_tbl\" }),\n        _createElementVNode(\"div\", _hoisted_11, [\n          _createVNode(_unref(HotTable), {\n            ref: \"outputTbl\",\n            data: output_tbl.value,\n            rowHeaders: true,\n            colHeaders: output_col.value,\n            manualColumnResize: true,\n            renderer: renderTblCell,\n            contextMenu: true,\n            autoWrapRow: true,\n            autoWrapCol: true,\n            licenseKey: \"non-commercial-and-evaluation\"\n          }, null, 8, [\"data\", \"colHeaders\"])\n        ])\n      ])\n    ])\n  ], 64))\n}\n}\n\n})","<template>\n  <div class=\"view\">\n    <div class=\"view-title\">\n      <span class=\"head-text\">{{ langConfig[lang].table.input }}</span>\n      <span style=\"float: right; margin-right: 10px\">\n        <a-upload v-model:file-list=\"fileList\" :max-count=\"1\" accept=\".csv, .txt, .xls, .xlsx\"\n          :customRequest=\"handleUpload\" @remove=\"handleRemove\" @preview=\"handlePreview\" :showUploadList=\"{\n            showRemoveIcon: true,\n          }\">\n          <a-button size=\"small\">\n            <v-icon name=\"bi-upload\" scale=\"0.85\" />\n            <span>{{ langConfig[lang].table.upload }}</span>\n          </a-button>\n        </a-upload>\n        <a-button style=\"margin-left: 5px;\" size=\"small\" @click=\"resetData\">\n          <v-icon name=\"bi-arrow-clockwise\" scale=\"0.9\"></v-icon>\n          <span>{{ langConfig[lang].table.reset }}</span>\n        </a-button>\n      </span>\n    </div>\n    <div class=\"view-content\">\n      <ColType tblType=\"input_tbl\" />\n      <div id=\"output-tbl\" style=\"height: calc(100% - 28px); overflow: hidden;\">\n        <hot-table ref=\"inputTbl\" :data=\"input_tbl\" :rowHeaders=\"true\" :colHeaders=\"true\" :manualColumnResize=\"true\"\n          :autoWrapRow=\"true\" :autoWrapCol=\"true\" :contextMenu=\"true\" :renderer=\"renderTblCell\"\n          licenseKey=\"non-commercial-and-evaluation\"></hot-table>\n      </div>\n    </div>\n  </div>\n  <div class=\"divider-w\" @mousedown=\"getNeighborEls($event, 'width')\" title=\"Drag to resize\"></div>\n  <div class=\"view\">\n    <div class=\"view-title\">\n      <span>{{ langConfig[lang].table.output }}</span>\n      <span style=\"float: right; margin-right: 10px\">\n        <a-button size=\"small\" @click=\"handleDownload\">\n          <v-icon name=\"bi-download\" scale=\"0.85\"></v-icon>\n          <span>{{ langConfig[lang].table.download }}</span>\n        </a-button>\n      </span>\n    </div>\n    <div class=\"view-content\">\n      <ColType tblType=\"output_tbl\" />\n      <div id=\"output-tbl\" style=\"height: calc(100% - 28px); overflow: hidden;\">\n        <hot-table ref=\"outputTbl\" :data=\"output_tbl\" :rowHeaders=\"true\" :colHeaders=\"output_col\"\n          :manualColumnResize=\"true\" :renderer=\"renderTblCell\" :contextMenu=\"true\" :autoWrapRow=\"true\"\n          :autoWrapCol=\"true\" licenseKey=\"non-commercial-and-evaluation\"></hot-table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  getCurrentInstance,\n  ComponentPublicInstance,\n  ref,\n  onMounted,\n  watch,\n} from \"vue\";\nimport ColType from \"@/components/ColType.vue\";\nimport { HotTable } from \"@handsontable/vue3\";\nimport \"handsontable/dist/handsontable.full.css\";\nimport { registerAllModules } from \"handsontable/registry\";\nimport Handsontable from \"handsontable\";\nimport { useTableStore, Selection } from \"@/store/table\";\n// import Papa from 'papaparse';  // parse csv data\nimport * as XLSX from 'xlsx';  // parse excel data\nimport { Table2D, TableCanoniserTemplate } from \"@/table-canoniser/dist/grammar\"\nimport { message } from \"ant-design-vue\";\nimport { getNeighborEls } from '@/utils/dragLayout';\n\nimport { lang, langConfig } from \"@/utils/lang\";\n\n// import { ArrowUpTrayIcon } from '@heroicons/vue/24/solid'\n\n// register Handsontable's modules\nregisterAllModules();\n\nconst tableStore = useTableStore();\n// const tblCases: { [key: string]: TblVisData } = tableStore.cases;\n\nconst output_col = ref(tableStore.output_tbl.cols);\nconst output_tbl = ref(tableStore.output_tbl.tbl);\nconst input_tbl = ref(tableStore.input_tbl.tbl);\n\nlet inHotInst: Handsontable;\nlet outHotInst: Handsontable;\n\nfunction renderTblCell(instance: Handsontable,\n  td: HTMLElement,\n  row: number,\n  col: number,\n  prop: any,\n  value: any,\n  cellProperties: any) {\n  // @ts-ignore\n  Handsontable.renderers.TextRenderer.apply(this, arguments);\n  td.innerHTML = `<div class=\"truncated\">${value}</div>`\n}\n\nfunction updateColInfoFn(tbl: \"input_tbl\" | \"output_tbl\") {\n  if (tbl === \"input_tbl\") {\n    const tblData = tableStore.input_tbl.tbl;\n    drawMinimap(tblData.length, tblData[0].length, document.querySelector('svg.tbl-container') as SVGSVGElement, tableStore);\n    tableStore.optimizeMiniTempDistance();\n    // tableStore.clearStatus(\"miniHighlight\");\n    tableStore.initTblInfo(false);\n    // tableStore.computeColInfo(\"output_tbl\");\n    tableStore.output_tbl.colInfo = [];\n    tableStore.spec.matchedInstNum = 0;\n  }\n  tableStore.computeColInfo(tbl);\n}\n\nfunction resetData() {\n  tableStore.input_tbl.tbl = JSON.parse(JSON.stringify(tableStore.currentInitData));\n  tableStore.input_tbl.instance.updateData(tableStore.input_tbl.tbl);\n  tableStore.input_tbl.instance.render();\n  updateColInfoFn(\"input_tbl\");\n}\n\n// const handleUploadChange = (info: any) => {\n//   if (info.file.status === 'done') {\n//     message.success(`${info.file.name} file uploaded successfully`);\n//   } else if (info.file.status === 'error') {\n//     message.error(`${info.file.name} file upload failed.`);\n//   }\n// };\n\nconst fileList = ref([]);\n// const fileList = ref<UploadProps['fileList']>([{\n//     uid: '1',\n//     name: 'xxx.png',\n//     status: 'done',\n//     response: 'Server Error 500', // custom error message to show\n//     url: 'http://www.baidu.com/xxx.png',\n//   },]);\nlet fileTblData: Table2D = [];\n\nconst handleUpload = (request: any) => {\n  // console.log(request.file);\n  // setTimeout(() => {\n  //   request.onSuccess(\"ok\");\n  // }, 0);\n  try {\n    const reader = new FileReader();\n    // if (request.file.type === 'text/csv' || request.file.type === 'text/plain') {\n    //   reader.onload = (e) => {\n    //     console.log(e);\n    //     const data = e.target?.result;\n    //     parseCsvData(data as string);\n    //   }\n    //   reader.readAsText(request.file);\n    // } else if (request.file.type.endsWith('sheet') || request.file.type.endsWith('excel')) {\n\n    reader.onload = (e) => {\n      const arrayBuffer = e.target?.result;\n      const workbook = XLSX.read(arrayBuffer, { type: 'array' });\n      const firstSheetName = workbook.SheetNames[0];\n      const worksheet = workbook.Sheets[firstSheetName];\n      const rawData: Table2D = XLSX.utils.sheet_to_json(worksheet, { header: 1 });\n      // Determine the maximum number of columns\n      const maxColumns = Math.max(...rawData.map(row => row.length));\n\n      // Ensure all rows have the same number of columns\n      fileTblData = rawData.map(row => {\n        while (row.length < maxColumns) {\n          row.push(undefined); // Fill missing cells with an empty string or a placeholder\n        }\n        return row;\n      });\n      handlePreview()\n      request.onSuccess(\"ok\");\n      // message.success(`${request.file.name} file uploaded successfully`);\n    };\n    reader.readAsArrayBuffer(request.file);\n  } catch (error) {\n    message.error(`${request.file.name} file uploaded failed.\\n${error}`);\n  }\n};\n\nlet saveLastCase = \"\"\n\nconst handleRemove = () => {\n  tableStore.initTblInfo()\n  tableStore.transformTblUpdateRootArea();\n  tableStore.currentCase = saveLastCase ? saveLastCase : tableStore.caseList[0];\n  saveLastCase = \"\"\n  tableStore.caseList.pop();\n};\n\nconst handlePreview = () => {\n  // executed when file link or preview icon is clicked.\n  tableStore.initTblInfo()\n  tableStore.input_tbl.tbl = fileTblData;\n  tableStore.input_tbl.instance.updateData(fileTblData);\n  tableStore.input_tbl.instance.render();\n  tableStore.currentInitData = JSON.parse(JSON.stringify(fileTblData));\n  tableStore.transformTblUpdateRootArea();\n  if (!tableStore.currentCase.startsWith(\"Custom\")) {\n    saveLastCase = tableStore.currentCase\n  }\n  if (!tableStore.caseList.includes(\"Custom File\")) {\n    tableStore.caseList.push(\"Custom File\");\n  }\n  tableStore.currentCase = \"Custom File\";\n  // 清空映射规范\n  tableStore.editor.mappingSpec.code = tableStore.editor.mappingSpec.codePref + \"[\\n  // Please write the specification here\\n];\"\n};\n\nwatch(() => tableStore.currentCase, (newVal) => {\n  if (newVal.startsWith(\"Custom\")) handlePreview();\n  else tableStore.loadCaseData(newVal);\n});\n\n\n// 函数用于将二维数组转换为 CSV 格式\nfunction arrayToCSV(array: Table2D) {\n  return array.map(row => row.map(cell => `${cell === undefined ? '' : cell}`).join(',')).join('\\n');\n}\n\nconst handleDownload = () => {\n  if (tableStore.output_tbl.cols.length === 0) {\n    message.warning('The output table is empty.');\n    return;\n  }\n  const csv = arrayToCSV([tableStore.output_tbl.cols, ...tableStore.output_tbl.tbl]);\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = 'tidy table.csv'; // 下载文件的名称\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url); // 释放内存\n\n  message.success('The output table has been downloaded successfully.');\n};\n\nfunction normalizeSelection(selections: Selection[]): Selection[] {\n  return selections.map(([row1, col1, row2, col2]) => {\n    // 修正负数坐标为0\n    if (row1 < 0) row1 = 0;\n    if (col1 < 0) col1 = 0;\n    if (row2 < 0) row2 = 0;\n    if (col2 < 0) col2 = 0;\n\n    // 确保startRow <= endRow 和 startCol <= endCol\n    const startRow = Math.min(row1, row2);\n    const endRow = Math.max(row1, row2);\n    const startCol = Math.min(col1, col2);\n    const endCol = Math.max(col1, col2);\n\n    return [startRow, startCol, endRow, endCol];\n  });\n}\n\nimport { drawMinimap } from '@/utils/minimap';\n\nfunction initEventsForTbl(tbl: \"input_tbl\" | \"output_tbl\") {\n  let tblInst1: Handsontable, tblInst2: Handsontable;\n  const tbl2 = tbl === \"input_tbl\" ? \"output_tbl\" : \"input_tbl\";\n  if (tbl === \"input_tbl\") {\n    tblInst1 = inHotInst;\n    tblInst2 = outHotInst;\n  } else {\n    tblInst1 = outHotInst;\n    tblInst2 = inHotInst;\n  }\n  tblInst1.updateSettings({\n    outsideClickDeselects: (targetEle) => {\n      const targetClassName = targetEle?.className;\n      // if ((targetEle.parentNode?.parentNode as HTMLElement).classList.contains(\"goToInstance\") || (targetEle.parentNode as HTMLElement).classList.contains(\"goToInstance\"))\n      if (targetEle.closest(\".goToInstance\") !== null) {\n        if (document.body.style.cursor === 'cell') {\n          tableStore.clearStatus(\"matchArea\");\n        }\n        return true;\n      };\n      if (targetClassName === \"wtHolder\") {\n        return true;\n      }\n      if (typeof targetClassName !== \"string\") {\n        tblInst2.updateSettings({ cell: [] });\n        return true;\n      }\n      if (tblInst1 === outHotInst && [\"relative\", \"rowHeader\", \"current\", \"truncated\"].some((c) => targetClassName.split(\" \").includes(c))) {\n        // 如果在 input 表格内点击：\n        if (document.body.style.cursor !== 'cell') {\n          tblInst2.updateSettings({ cell: [] });\n        }\n      } else {\n        tableStore.clearStatus(\"matchArea\");\n        tblInst2.updateSettings({ cell: [] });\n      }\n      tableStore.highlightMinimapCells([]);\n      tableStore.clearStatus(\"tree\");\n\n      if (tbl === \"input_tbl\") {\n        if (!(targetClassName.startsWith(\"mtk\") || targetClassName === \"view-line\"))\n          tableStore.editor.mappingSpec.decorations?.clear();\n      }\n\n      return true;\n    },\n  });\n\n  tblInst1.addHook(\"afterColumnResize\", (currentColumn, newSize, isDoubleClick) => {\n    // 修改单元格宽度后的回调\n    tableStore.computeColInfo(tbl);\n  });\n  // 因为添加了对tbl的修改监听，所以这些钩子函数可以不用定义\n  tblInst1.addHook(\"afterChange\", (changes, source) => {\n    // 修改单元格内容后的回调\n    if (changes && changes.some(ci => ci[2] !== ci[3])) {\n      if (tbl === \"input_tbl\") {\n        // tableStore.clearStatus(\"miniHighlight\");\n        tableStore.initTblInfo(false);\n        tableStore.computeColInfo(\"output_tbl\");\n        tableStore.spec.matchedInstNum = 0;\n      }\n      tableStore.computeColInfo(tbl);\n    }\n  });\n  tblInst1.addHook(\"afterCreateRow\", () => updateColInfoFn(tbl));\n  tblInst1.addHook(\"afterCreateCol\", () => updateColInfoFn(tbl));\n  tblInst1.addHook(\"afterRemoveRow\", () => updateColInfoFn(tbl));\n  tblInst1.addHook(\"afterRemoveCol\", () => updateColInfoFn(tbl));\n\n  tblInst1.addHook(\"afterOnCellMouseDown\", (e) => {\n    tblInst2.updateSettings({ cell: [] });\n  });\n  tblInst1.addHook(\"afterOnCellMouseUp\", (event, coords, TD) => {\n    const selected = normalizeSelection(tblInst1.getSelected() || []);\n    // key 表示所选区域，value 表示所选区域所有单元格的坐标\n    const { selectedCoords, hightedCells } = tableStore.getHightlightedCells(selected);\n\n    // 打印所有坐标\n    // console.log(selectedCoords);\n\n    const cells = tableStore.in_out_mapping(selectedCoords, tbl);\n    tableStore.highlightTblCells(tbl2, cells);\n    // tableStore.highlightMinimapCells([{ ...coords, className: \"posi-mapping\" }]);\n\n    if (tbl === \"input_tbl\") {\n      tableStore.highlightMinimapCells(hightedCells);\n      // console.log(document.body.style.cursor, tableStore.spec.selectAreaFromNode, tableStore.spec.selectAreaFromLegend.length);\n      if (document.body.style.cursor === 'cell') {\n        if (tableStore.spec.selectAreaFromNode) {\n          // 说明需要重新为某个节点选择区域\n          tableStore.tree.instanceIndex = 0;\n          tableStore.updateVisTreeAreaBox();\n          const selectType = tableStore.spec.selectAreaFromNode;\n          const visNode = tableStore.spec.selectNode!.data;\n          const nx = visNode.x, ny = visNode.y, nw = visNode.width, nh = visNode.height;\n          const [startRow, startCol, endRow, endCol] = selected[0];\n          const offsetX = startCol - nx, offsetY = startRow - ny;\n          if (selectType.startsWith(\"3\")) {\n            // Add Sub-Template Logic\n            const width = endCol - startCol + 1;\n            const height = endRow - startRow + 1;\n            const traverse = (visNode.children && visNode.children.length > 0) ? {} : {\n              xDirection: nw >= 2 * width ? 'after' as const : undefined,\n              yDirection: nh >= 2 * height ? 'after' as const : undefined\n            }\n            let extract: any = null, extractColor: string = '';\n            const maxCNum = tableStore.findMaxCNumber() + 1;\n\n            switch (selectType) {\n              case \"3-0\":\n                // Target Cols - Position Based Logic\n                extract = {\n                  byPositionToTargetCols: Array.from({ length: width * height }, (_, i) => `C${maxCNum + i}`)\n                }\n                extractColor = 'positionShallow';\n                break;\n              case \"3-1\":\n                // Target Cols - Context Based Logic\n                extract = {\n                  byContext: {\n                    position: 'above'\n                  }\n                }\n                extractColor = 'contextShallow';\n                break;\n              case \"3-2\":\n                // Target Cols - Value Based Logic\n                const createExtract = () => {\n                  return eval(`currentAreaTbl => {\n                  // Please replace the default code with the necessary implementation to complete the function.\n                  return currentAreaTbl.flat().map((cell, i) => 'C' + (${maxCNum} + i))\n                  }`)\n                }\n                extract = {\n                  byValue: createExtract()\n                }\n                extractColor = 'valueShallow';\n                break;\n              case \"3-3\":\n                // Target Cols - No Extract Logic\n                extract = undefined\n                extractColor = 'nullShallow';\n                break;\n            }\n\n            const childPattern: TableCanoniserTemplate = {\n              match: {\n                startCell: {\n                  // offsetLayer: \"current\",\n                  // offsetFrom: \"topLeft\",\n                  offsetX: offsetX,\n                  offsetY: offsetY\n                },\n                size: { width, height },\n                traverse\n              },\n              extract\n            }\n\n            tableStore.insertNodeOrPropertyIntoSpecs(childPattern, \"children\");\n            tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(childPattern), extractColor];\n\n          } else if (selectType === \"1\") {\n            // Add Constraints Logic\n            const cellValue = inHotInst.getDataAtCell(startRow, startCol);\n            const constraint = {\n              offsetFrom: \"topLeft\",\n              offsetX,\n              offsetY,\n              valueCstr: tableStore.getCellDataType(cellValue) // TableCanoniserKeyWords.String,\n            }\n            tableStore.insertNodeOrPropertyIntoSpecs(constraint, \"constraints\");\n            tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(constraint, tableStore.getNodebyPath(tableStore.spec.rawSpecs, visNode.path!)), 'selectionShallow']; // `${visNode.type}Shallow`\n          }\n\n          tableStore.spec.selectAreaFromNode = \"\";\n          tableStore.clearStatus(\"matchArea\");\n\n        } else if (tableStore.spec.selectAreaFromLegend.length) {\n          // 说明从legend处选择区域\n          inHotInst.updateSettings({ cell: [] });\n          const selectFromLegend = tableStore.spec.selectAreaFromLegend;\n          tableStore.spec.selectionsAreaFromLegend.push(selected[0]);\n          tableStore.spec.selectionsPath.push([]);\n          if (selectFromLegend.length < tableStore.spec.selectionsAreaFromLegend.length) {\n            selectFromLegend.push(selectFromLegend[selectFromLegend.length - 1])\n          }\n          const cells = tableStore.generateHighlightCells(tableStore.spec.selectionsAreaFromLegend, selectFromLegend);\n          tableStore.highlightTblCells(tbl, cells);\n          // document.body.style.cursor = 'default';\n          // document.documentElement.style.setProperty('--custom-cursor', 'default');\n\n          const { specs, newSpec } = tableStore.buildTree(tableStore.spec.selectionsAreaFromLegend, selectFromLegend, tableStore.spec.selectionsPath);\n\n          tableStore.stringifySpec(specs);\n          tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(newSpec, null, specs), `${selectFromLegend[selectFromLegend.length - 1]}Shallow`];\n        }\n      }\n      tableStore.highlightNodes(selected);\n    } else {\n      tableStore.highlightMinimapCells(cells);\n      const newSelections = cells.map(cell => [cell.row, cell.col, cell.row, cell.col] as Selection)\n      tableStore.highlightNodes(newSelections);\n    }\n  });\n}\n\nonMounted(() => {\n\n  const proxy = getCurrentInstance()?.proxy as ComponentPublicInstance;\n  inHotInst = (proxy.$refs.inputTbl as any).hotInstance as Handsontable;\n  outHotInst = (proxy.$refs.outputTbl as any).hotInstance as Handsontable;\n\n  tableStore.input_tbl.instance = inHotInst;\n  tableStore.output_tbl.instance = outHotInst;\n\n  initEventsForTbl(\"input_tbl\");\n  initEventsForTbl(\"output_tbl\");\n\n  // keepIconsSynchronizedWithTable() { },\n  const iconScrolls = document.querySelectorAll('.icons-container .icon-scroll');\n  const tblScrolls = document.querySelectorAll('.ht_master .wtHolder');\n\n  iconScrolls.forEach((iconScroll, index) => {\n    iconScroll.addEventListener('scroll', () => {\n      tblScrolls[index].scrollLeft = iconScroll.scrollLeft;\n    });\n\n    tblScrolls[index].addEventListener('scroll', () => {\n      iconScroll.scrollLeft = tblScrolls[index].scrollLeft;\n    });\n  })\n});\n\n// function showDropdown() {\n//   //   isOpen = true;\n// }\n// function hideDropdown() {\n//   //   isOpen = false;\n// }\n</script>\n\n<style lang=\"less\">\n.ant-upload-wrapper {\n  position: relative;\n\n  .ant-upload {\n    display: inline-block;\n    // margin-right: 60px;\n  }\n\n  .ant-upload-list {\n    position: absolute;\n    top: -11px;\n    right: 81px;\n    cursor: pointer;\n  }\n\n  .ant-upload-list-item-name {\n    color: #1677ff;\n    padding: 0 0 0 2px !important;\n    max-width: 150px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n}\n\n.handsontable {\n  .truncated {\n    max-width: 140px; // 会再次基础上加上10px, 应该是有padding\n    min-width: 50px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  div.relative,\n  td {\n    cursor: var(--custom-cursor) !important;\n  }\n\n  td.htRight {\n    background-color: #3498db;\n  }\n\n  td.position {\n    color: #fff !important;\n    background-color: var(--color-position);\n  }\n\n  td.positionShallow {\n    color: #fff !important;\n    background-color: var(--color-positionShallow);\n  }\n\n  td.context {\n    color: #fff !important;\n    background-color: var(--color-context);\n  }\n\n  td.contextShallow {\n    color: #fff !important;\n    background-color: var(--color-contextShallow);\n  }\n\n  td.value {\n    color: #fff !important;\n    background-color: var(--color-value);\n  }\n\n  td.valueShallow {\n    color: #fff !important;\n    background-color: var(--color-valueShallow);\n  }\n\n  td.null {\n    color: #fff !important;\n    background-color: var(--color-null);\n  }\n\n  td.nullShallow {\n    color: #fff !important;\n    background-color: var(--color-nullShallow);\n  }\n\n  td.selection {\n    color: #fff !important;\n    background-color: var(--color-selection);\n  }\n\n  td.selectionShallow {\n    color: #fff !important;\n    background-color: var(--color-selectionShallow);\n  }\n}\n</style>\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"view\" }\nconst _hoisted_2 = { class: \"view-title\" }\nconst _hoisted_3 = { style: {\"font-size\":\"18px\",\"font-weight\":\"bold\"} }\nconst _hoisted_4 = [\"title\"]\nconst _hoisted_5 = { style: {\"font-size\":\"15px\",\"height\":\"25px\"} }\nconst _hoisted_6 = { style: {\"margin-right\":\"10px\"} }\nconst _hoisted_7 = {\n  class: \"view-content\",\n  style: {\"display\":\"flex\"}\n}\nconst _hoisted_8 = { style: {\"flex\":\"1.3\"} }\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"path\", { class: \"mini-temp-line top-line\" }, null, -1)\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"path\", { class: \"mini-temp-line bottom-line\" }, null, -1)\nconst _hoisted_11 = [\n  _hoisted_9,\n  _hoisted_10\n]\nconst _hoisted_12 = { style: {\"flex\":\"1\",\"margin-left\":\"5px\"} }\n\nimport { computed, onMounted, ref, watch } from 'vue';\n// import * as d3 from 'd3';\n// import { flextree, FlextreeNode } from 'd3-flextree';\nimport { TreeChart } from '@/utils/drawTree';\nimport { message } from 'ant-design-vue';\nimport { useTableStore } from \"@/store/table\";\nimport * as d3 from 'd3';\nimport { TypeColor } from '@/utils/style';\nimport { lang, langConfig } from \"@/utils/lang\";\n\n/*\ninterface TreeNode {\n    [key: string]: any;\n    children?: TreeNode[];\n}\n\nconst data: TreeNode = {\n    name: 'Root',\n    children: [\n        { name: 'Child 1' },\n        {\n            name: 'Child 2',\n            children: [\n                { name: 'Grandchild 1' },\n                { name: 'Grandchild 2' },\n                { name: 'Grandchild 3' },\n            ]\n        }\n    ]\n};\n*/\n\n// const currentInstFlag = ref(false);\n// const disableNextFlag = ref(false);\n// const disableGoToInstFlag = ref(false);\nimport { drawMinimap, miniZoom } from '@/utils/minimap';\nimport { drawTblTemplate, tempZoom } from '@/utils/template';\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PatternVis',\n  setup(__props, { expose: __expose }) {\n\nconst tableStore = useTableStore();\n\nconst instanceContent = ref(\"\");\nconst menuList = computed(() => tableStore.tree.menuList);\n// const contextMenuVisible = tableStore.tree.contextMenuVisible;\nconst contextMenuVisible = computed(() => tableStore.tree.contextMenuVisible && tableStore.tree.menuList.length > 0);\nconst contextMenuVisibleChange = (value: boolean) => {\n    // if (store.state.selectedNode.length === 0 && value === true) return;\n    // store.commit('setContextMenuVisibility', value);\n    tableStore.tree.contextMenuVisible = value;\n    tableStore.tree.menuList = [];\n    // setTimeout(() => {\n    //     tableStore.tree.menuList = [];\n    // }, 0)\n};\n\nconst closeContextMenu = (e: any) => {\n    // console.log(\"closeContextMenu\", e, e.key);\n    const visNode = tableStore.spec.selectNode!.data;\n    let extract: any = null, extractColor: string = '';\n    let triggerCellCursorFlag = false;\n    let messageInfo = \"\\n\" + langConfig[lang].pattern.selectionMode;\n    const maxCNum = tableStore.findMaxCNumber() + 1;\n    switch (e.key) {\n        case \"0\":\n            // Reset Area Logic\n            messageInfo = \"Please reselect the template's area in the input table.\" + messageInfo;\n            triggerCellCursorFlag = true;\n            break;\n        case \"1\":\n            // Add Constraints Logic\n            messageInfo = langConfig[lang].pattern.addConstr + messageInfo;\n            triggerCellCursorFlag = true;\n            break;\n        case \"2-0\":\n            // Target Cols - Position Based Logic\n            extract = {\n                byPositionToTargetCols: Array.from({ length: visNode.width * visNode.height }, (_, i) => `C${maxCNum + i}`)\n            }\n            extractColor = 'positionShallow';\n            break;\n        case \"2-1\":\n            // Target Cols - Context Based Logic\n            extract = {\n                byContext: {\n                    position: 'above'\n                }\n            }\n            extractColor = 'contextShallow';\n            break;\n        case \"2-2\":\n            // Target Cols - Value Based Logic\n            const createExtract = () => {\n                return eval(`currentAreaTbl => {\n                  // Please replace the default code with the necessary implementation to complete the function.\n                  return currentAreaTbl.flat().map((cell, i) => 'C' + (${maxCNum} + i))\n                  }`)\n            }\n            extract = {\n                byValue: createExtract()\n            }\n            extractColor = 'valueShallow';\n            break;\n        case \"2-3\":\n            // Target Cols - No Extract Logic\n            tableStore.insertNodeOrPropertyIntoSpecs(undefined, \"extract\")\n            break;\n        case \"3-0\":\n        case \"3-1\":\n        case \"3-2\":\n        case \"3-3\":\n            // Add Sub-Template Logic\n            messageInfo = langConfig[lang].pattern.addSubPattern + messageInfo;\n            triggerCellCursorFlag = true;\n            break;\n        case \"4\":\n            tableStore.deleteChildByPath(tableStore.spec.rawSpecs, visNode.path!);\n            tableStore.stringifySpec();\n            break;\n        case \"5\":\n            tableStore.deleteChildByPath(tableStore.spec.rawSpecs, visNode.path!, tableStore.spec.selectConstrIndex);\n            tableStore.stringifySpec();\n    }\n\n    if (extract !== null) {\n        tableStore.insertNodeOrPropertyIntoSpecs(extract, \"extract\")\n        tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(extract, tableStore.getNodebyPath(tableStore.spec.rawSpecs, visNode.path!)), extractColor];\n    }\n    if (triggerCellCursorFlag) {\n        message.info(messageInfo);\n        tableStore.spec.selectAreaFromNode = e.key;\n        document.body.style.cursor = 'cell';\n        document.documentElement.style.setProperty('--custom-cursor', 'cell');\n        const cells = tableStore.generateHighlightCells(tableStore.spec.selectionsAreaFromLegend, tableStore.spec.selectAreaFromLegend);\n        tableStore.highlightTblCells(\"input_tbl\", cells);\n    }\n    tableStore.tree.contextMenuVisible = false;\n}\n\nconst treeContainer = ref<HTMLDivElement | null>(null);\n\nfunction resetZoom() {\n    // drawTree(tableStore.spec.visTree);\n    // c.transition().duration(750)// .call(tableStore.tree.visInst!.zoomfunc as any, d3.zoomIdentity);\n    tableStore.tree.visInst!.resetZoom();\n    // 不能对g.matrix元素进行transform操作，因为zoom事件监听器是添加在svg元素上的，所以需要对svg元素进行transform操作\n    d3.select('svg.tbl-container g.left').transition().duration(750)\n        .call(miniZoom!.transform as any, d3.zoomIdentity); // 重置缩放和平移状态\n    d3.select('svg.tbl-container g.right').transition().duration(750)\n        .call(tempZoom!.transform as any, d3.zoomIdentity); // 重置缩放和平移状态\n\n}\n\nconst drawTree = (data: any) => {\n    const treeInstance = new TreeChart([2, 1], '.tree-container', data, tableStore, 1.0, 'h');\n    treeInstance.render();\n    tableStore.tree.visInst = treeInstance;\n};\n\nconst typeMap = {\n    \"null\": \"Region\",\n    \"position\": \"Position Based\",\n    \"context\": \"Context Based\",\n    \"value\": \"Value Based\",\n}\nconst selectMatchExtractArea = (type: TypeColor) => {\n    d3.selectAll('.legend').classed('legend-selection', false);\n    d3.select(`.legend.legend-${type}`).classed('legend-selection', true);\n    const selectionsFromLegend = tableStore.spec.selectionsAreaFromLegend;\n    const selectFromLegend = tableStore.spec.selectAreaFromLegend;\n    const cells = tableStore.generateHighlightCells(selectionsFromLegend, selectFromLegend);\n    tableStore.highlightTblCells(\"input_tbl\", cells);\n\n    if (selectFromLegend.length > selectionsFromLegend.length) {\n        selectFromLegend[selectFromLegend.length - 1] = type;\n    } else {\n        selectFromLegend.push(type);\n    }\n    // const cursorStyle = `url(${require('@/assets/cell.png')}), auto`;\n    document.body.style.cursor = 'cell';\n    document.documentElement.style.setProperty('--custom-cursor', 'cell');\n    // message.info(\"Now is in \" + typeMap[type as keyof typeof typeMap] + \" mode. Please select the starting area in the input table.\\n Press ESC to cancel the selection mode.\");\n    // @ts-ignore\n    message.info((lang === 'cn' ? (\"现在是\" + langConfig[lang].pattern[type]) : (\"Now is in \" + typeMap[type])) + langConfig[lang].pattern.afterClickMessage);\n    // tableStore.input_tbl.instance.rootElement.style.cursor = \"cell\";\n    // (document.querySelector('.truncated') as HTMLElement).style.cursor = \"cell\"\n}\n\n\n\nconst tblContainer = ref<SVGSVGElement | null>(null);\n\n/*\nimport { debounce } from 'lodash';\n\n// import { TableCanoniserTemplate } from '@/table-canoniser/dist/grammar';\n\nconst debouncedResize = debounce(() => {\n    drawTree(tableStore.spec.visTree);\n}, 100); // 调整延迟时间，单位为毫秒\n\nconst resizeObserver = new ResizeObserver(() => {\n    debouncedResize();\n});\n*/\n\nconst handleFormatter = (v: any) => {\n    // console.log(v, tableStore.output_tbl.tbl.length);\n    // return tableStore.output_tbl.tbl.length === 0 ? '' : isNaN(v) ? 0 : parseInt(v) + 1\n    return tableStore.spec.matchedInstNum === 0 ? '' : isNaN(v) ? 0 : parseInt(v) + 1\n}\n\nconst handleStep = (v: number, info: { offset: number, type: 'up' | 'down' }) => {\n    // :max=\" tableStore.output_tbl.tbl.length> 0 ? tableStore.spec.visTree.children![0].matchs!.length - 1 : 0\"\n    // :min=\"0\"\n    if (info.type === 'up') {\n        if (v <= 1) return;\n        tableStore.goToInstance(v - 2);\n    } else {\n        if (v >= tableStore.spec.visTree.children![0].matchs!.length - 2) return;\n        tableStore.goToInstance(v + 2);\n    }\n}\n\nfunction handleCodeChange(clickFlag = false) {\n    // console.log(\"handleCodeChange: start\", tableStore.editor.mappingSpec.codeUpdateFromEditor);\n    if (tableStore.editor.mappingSpec.codeUpdateFromEditor) {\n        setTimeout(() => {\n            tableStore.editor.mappingSpec.codeUpdateFromEditor = false;\n        }, 600)\n        if (clickFlag) return;\n    }\n    const setFlag = tableStore.prepareDataAfterCodeChange();\n    if (!setFlag) return;\n    if (document.body.style.cursor === 'default') {\n        drawMinimap(tableStore.input_tbl.tbl.length, tableStore.input_tbl.tbl[0].length, tblContainer.value, tableStore);\n    }\n    const transformRes = tableStore.transformTablebyCode();  // auto run\n\n    setTimeout(() => {\n        tableStore.editor.mappingSpec.triggerCodeChange = true;\n        if (tableStore.editor.mappingSpec.highlightCode) {\n            // console.log('handleCodeChange-highlightCode', tableStore.editor.mappingSpec.highlightCode);\n            tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode);\n            tableStore.editor.mappingSpec.highlightCode = null;\n        }\n    }, 600)\n\n    if (!transformRes) return;\n\n    if (tableStore.spec.matchedInstNum === 0) {\n        instanceContent.value = langConfig[lang].tree.noMatch;\n        tableStore.tree.instanceIndex = -1;\n    } else {\n        instanceContent.value = lang === 'en' ? 'Total ' + tableStore.spec.matchedInstNum + ' instance(s)' : '总共匹配了' + tableStore.spec.matchedInstNum + '个实例';\n    }\n    tableStore.computeColInfo(\"output_tbl\");\n    drawTree(tableStore.spec.visTree); // 会默认选择第一个节点\n    drawTblTemplate(tblContainer.value, tableStore);\n    tableStore.optimizeMiniTempDistance();\n    tableStore.updateCurve();\n}\n\n// const debouncedHandleCodeChange = tableStore.debounce(handleCodeChange, 200); // 200ms 的延迟\n\n\n// 在Vue 3的<script setup>模式下，不能像在Vue 2中那样直接通过 组件.methods 访问组件的方法。<script setup>模式的代码是模块化的，组件的methods不会自动暴露为一个对象供外部访问。使用 defineExpose 暴露方法\n__expose({ handleCodeChange });\n\nwatch(() => tableStore.editor.mappingSpec.code, (newVal) => {\n    // console.log('watch code changed start', tableStore.editor.mappingSpec.triggerCodeChange);\n    tableStore.editor.mappingSpec.instance?.setValue(newVal);\n    if (tableStore.editor.mappingSpec.triggerCodeChange) {\n        handleCodeChange()\n    }\n    else if (tableStore.editor.mappingSpec.highlightCode) {\n        // console.log('watch code-highlightCode', tableStore.editor.mappingSpec.highlightCode);\n        tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode);\n        tableStore.editor.mappingSpec.highlightCode = null;\n        tableStore.editor.mappingSpec.triggerCodeChange = true;\n    }\n});\n\nwatch(() => tableStore.tree.instanceIndex, () => {\n    drawTblTemplate(tblContainer.value, tableStore);\n    tableStore.updateCurve();\n    tableStore.highlightTblPatternConstr();\n});\n\nwatch(() => tableStore.input_tbl.tbl, (newVal) => {\n    // console.log('watch: input_tbl changed: start');\n    drawMinimap(newVal.length, newVal[0].length, tblContainer.value, tableStore);\n    tableStore.computeColInfo(\"input_tbl\");\n});  // , { deep: true }\n\n// watch(() => tableStore.output_tbl.tbl, () => {\n//     // console.log('watch: output_tbl changed: start');\n//     tableStore.computeColInfo(\"output_tbl\");\n// }, { deep: true });\n\n// watch(() => tableStore.spec.visTree.size.height, (newVal) => {\n//     console.log('watch tbl size changed: start');\n//     const setFlag = tableStore.prepareDataAfterCodeChange();\n//     if (!setFlag) return;\n//     drawTree(tableStore.spec.visTree);\n//     console.log('watch tbl size changed: end');\n// });\n\n\nonMounted(() => {\n    document.querySelector('span.ant-input-number-handler-up')!.setAttribute(\"title\", langConfig[lang].pattern.previousInst);\n    document.querySelector('span.ant-input-number-handler-down')!.setAttribute(\"title\", langConfig[lang].pattern.nextInst)\n});\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_input_number = _resolveComponent(\"a-input-number\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_button_group = _resolveComponent(\"a-button-group\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_a_flex = _resolveComponent(\"a-flex\")!\n  const _component_a_menu = _resolveComponent(\"a-menu\")!\n  const _component_a_dropdown = _resolveComponent(\"a-dropdown\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_a_flex, {\n        justify: \"space-between\",\n        align: \"center\"\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_unref(langConfig)[_unref(lang)].pattern.patterns), 1),\n          _createElementVNode(\"span\", null, [\n            _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].pattern.currentInst), 1),\n            _createVNode(_component_a_input_number, {\n              class: \"goToInstance\",\n              value: _unref(tableStore).tree.instanceIndex,\n              defaultValue: -1,\n              disabled: _unref(tableStore).spec.matchedInstNum === 0,\n              onPressEnter: _cache[0] || (_cache[0] = ($event: any) => (_unref(tableStore).goToInstance(+$event.target.value - 1))),\n              size: \"small\",\n              precision: 0,\n              formatter: handleFormatter,\n              onStep: handleStep,\n              onBlur: _cache[1] || (_cache[1] = ($event: any) => (_unref(tableStore).goToInstance(+$event.target.value - 1)))\n            }, null, 8, [\"value\", \"disabled\"]),\n            _createElementVNode(\"span\", {\n              style: {\"font-weight\":\"normal\"},\n              title: instanceContent.value\n            }, \"/ [\" + _toDisplayString(_unref(tableStore).spec.matchedInstNum) + \"]\", 9, _hoisted_4)\n          ]),\n          _createElementVNode(\"span\", _hoisted_5, [\n            _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].pattern.match), 1),\n            _createVNode(_component_a_button_group, { style: {\"margin\":\"0 15px 0 6px\"} }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_button, {\n                  class: \"legend legend-null\",\n                  size: \"small\",\n                  onClick: _cache[2] || (_cache[2] = ($event: any) => (selectMatchExtractArea('null'))),\n                  title: _unref(langConfig)[_unref(lang)].pattern.regionTitle\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_unref(langConfig)[_unref(lang)].pattern.region), 1)\n                  ]),\n                  _: 1\n                }, 8, [\"title\"])\n              ]),\n              _: 1\n            }),\n            _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].pattern.extract), 1),\n            _createVNode(_component_a_button_group, { style: {\"margin-left\":\"6px\"} }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_button, {\n                  class: \"legend legend-position\",\n                  size: \"small\",\n                  onClick: _cache[3] || (_cache[3] = ($event: any) => (selectMatchExtractArea('position'))),\n                  title: _unref(langConfig)[_unref(lang)].pattern.positionTitle\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_unref(langConfig)[_unref(lang)].pattern.position), 1)\n                  ]),\n                  _: 1\n                }, 8, [\"title\"]),\n                _createVNode(_component_a_button, {\n                  class: \"legend legend-context\",\n                  size: \"small\",\n                  onClick: _cache[4] || (_cache[4] = ($event: any) => (selectMatchExtractArea('context'))),\n                  title: _unref(langConfig)[_unref(lang)].pattern.contextTitle\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_unref(langConfig)[_unref(lang)].pattern.context), 1)\n                  ]),\n                  _: 1\n                }, 8, [\"title\"]),\n                _createVNode(_component_a_button, {\n                  class: \"legend legend-value\",\n                  size: \"small\",\n                  onClick: _cache[5] || (_cache[5] = ($event: any) => (selectMatchExtractArea('value'))),\n                  title: _unref(langConfig)[_unref(lang)].pattern.valueTitle\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_unref(langConfig)[_unref(lang)].pattern.value), 1)\n                  ]),\n                  _: 1\n                }, 8, [\"title\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _createElementVNode(\"span\", _hoisted_6, [\n            _createVNode(_component_a_button, {\n              id: \"draw_tree\",\n              size: \"small\",\n              onClick: resetZoom\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_icon, {\n                  name: \"bi-arrow-clockwise\",\n                  scale: \"0.9\"\n                }),\n                _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].pattern.reset), 1)\n              ]),\n              _: 1\n            })\n          ])\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createElementVNode(\"div\", _hoisted_8, [\n        (_openBlock(), _createElementBlock(\"svg\", {\n          ref_key: \"tblContainer\",\n          ref: tblContainer,\n          class: \"tbl-container\"\n        }, _hoisted_11, 512))\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createVNode(_component_a_dropdown, {\n          trigger: ['contextmenu'],\n          open: contextMenuVisible.value,\n          onOpenChange: contextMenuVisibleChange\n        }, {\n          overlay: _withCtx(() => [\n            _createVNode(_component_a_menu, {\n              onClick: closeContextMenu,\n              items: menuList.value\n            }, null, 8, [\"items\"])\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", {\n              ref_key: \"treeContainer\",\n              ref: treeContainer,\n              class: \"tree-container\"\n            }, null, 512)\n          ]),\n          _: 1\n        }, 8, [\"open\"])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"view\"> <!-- style=\"flex: 4.5\" -->\n        <div class=\"view-title\">\n            <a-flex justify=\"space-between\" align=\"center\">\n                <span style=\"font-size: 18px; font-weight: bold;\">{{ langConfig[lang].pattern.patterns }}</span>\n                <span>\n                    <span>{{ langConfig[lang].pattern.currentInst }}</span>\n                    <a-input-number class=\"goToInstance\" :value=\"tableStore.tree.instanceIndex\" :defaultValue=\"-1\"\n                        :disabled=\"tableStore.spec.matchedInstNum === 0\"\n                        @pressEnter=\"tableStore.goToInstance(+$event.target.value - 1)\" size=\"small\" :precision=\"0\"\n                        :formatter=\"handleFormatter\" @step=\"handleStep\"\n                        @blur=\"tableStore.goToInstance(+$event.target.value - 1)\"></a-input-number>\n                    <span style=\"font-weight: normal\" :title=\"instanceContent\">/ [{{ tableStore.spec.matchedInstNum\n                        }}]</span>\n                </span>\n                <span style=\"font-size: 15px; height: 25px\">\n                    <span>{{ langConfig[lang].pattern.match }}</span>\n                    <a-button-group style=\"margin: 0 15px 0 6px\">\n                        <a-button class=\"legend legend-null\" size=\"small\" @click=\"selectMatchExtractArea('null')\"\n                            :title=\"langConfig[lang].pattern.regionTitle\">{{ langConfig[lang].pattern.region\n                            }}</a-button>\n                    </a-button-group>\n                    <span>{{ langConfig[lang].pattern.extract }}</span>\n                    <a-button-group style=\"margin-left: 6px\">\n                        <a-button class=\"legend legend-position\" size=\"small\"\n                            @click=\"selectMatchExtractArea('position')\"\n                            :title=\"langConfig[lang].pattern.positionTitle\">{{ langConfig[lang].pattern.position\n                            }}</a-button>\n                        <a-button class=\"legend legend-context\" size=\"small\" @click=\"selectMatchExtractArea('context')\"\n                            :title=\"langConfig[lang].pattern.contextTitle\">{{ langConfig[lang].pattern.context\n                            }}</a-button>\n                        <a-button class=\"legend legend-value\" size=\"small\" @click=\"selectMatchExtractArea('value')\"\n                            :title=\"langConfig[lang].pattern.valueTitle\">{{ langConfig[lang].pattern.value\n                            }}</a-button>\n                    </a-button-group>\n                </span>\n                <span style=\"margin-right: 10px\">\n                    <a-button id=\"draw_tree\" size=\"small\" @click=\"resetZoom\">\n                        <v-icon name=\"bi-arrow-clockwise\" scale=\"0.9\"></v-icon>\n                        <span>{{ langConfig[lang].pattern.reset }}</span>\n                    </a-button>\n                </span>\n            </a-flex>\n        </div>\n        <div class=\"view-content\" style=\"display: flex;\">\n            <div style=\"flex: 1.3;\">\n                <svg ref=\"tblContainer\" class=\"tbl-container\">\n                    <path class=\"mini-temp-line top-line\"></path>\n                    <path class=\"mini-temp-line bottom-line\"></path>\n                </svg>\n            </div>\n            <div style=\"flex: 1; margin-left: 5px\">\n                <a-dropdown :trigger=\"['contextmenu']\" :open=\"contextMenuVisible\"\n                    @openChange=\"contextMenuVisibleChange\">\n                    <template #overlay>\n                        <a-menu @click=\"closeContextMenu\" :items=\"menuList\">\n                        </a-menu>\n                    </template>\n                    <div ref=\"treeContainer\" class=\"tree-container\"></div>\n                </a-dropdown>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue';\n// import * as d3 from 'd3';\n// import { flextree, FlextreeNode } from 'd3-flextree';\nimport { TreeChart } from '@/utils/drawTree';\nimport { message } from 'ant-design-vue';\nimport { useTableStore } from \"@/store/table\";\nimport * as d3 from 'd3';\nimport { TypeColor } from '@/utils/style';\nconst tableStore = useTableStore();\n\nimport { lang, langConfig } from \"@/utils/lang\";\n\n/*\ninterface TreeNode {\n    [key: string]: any;\n    children?: TreeNode[];\n}\n\nconst data: TreeNode = {\n    name: 'Root',\n    children: [\n        { name: 'Child 1' },\n        {\n            name: 'Child 2',\n            children: [\n                { name: 'Grandchild 1' },\n                { name: 'Grandchild 2' },\n                { name: 'Grandchild 3' },\n            ]\n        }\n    ]\n};\n*/\n\n// const currentInstFlag = ref(false);\n// const disableNextFlag = ref(false);\n// const disableGoToInstFlag = ref(false);\nconst instanceContent = ref(\"\");\nconst menuList = computed(() => tableStore.tree.menuList);\n// const contextMenuVisible = tableStore.tree.contextMenuVisible;\nconst contextMenuVisible = computed(() => tableStore.tree.contextMenuVisible && tableStore.tree.menuList.length > 0);\nconst contextMenuVisibleChange = (value: boolean) => {\n    // if (store.state.selectedNode.length === 0 && value === true) return;\n    // store.commit('setContextMenuVisibility', value);\n    tableStore.tree.contextMenuVisible = value;\n    tableStore.tree.menuList = [];\n    // setTimeout(() => {\n    //     tableStore.tree.menuList = [];\n    // }, 0)\n};\n\nconst closeContextMenu = (e: any) => {\n    // console.log(\"closeContextMenu\", e, e.key);\n    const visNode = tableStore.spec.selectNode!.data;\n    let extract: any = null, extractColor: string = '';\n    let triggerCellCursorFlag = false;\n    let messageInfo = \"\\n\" + langConfig[lang].pattern.selectionMode;\n    const maxCNum = tableStore.findMaxCNumber() + 1;\n    switch (e.key) {\n        case \"0\":\n            // Reset Area Logic\n            messageInfo = \"Please reselect the template's area in the input table.\" + messageInfo;\n            triggerCellCursorFlag = true;\n            break;\n        case \"1\":\n            // Add Constraints Logic\n            messageInfo = langConfig[lang].pattern.addConstr + messageInfo;\n            triggerCellCursorFlag = true;\n            break;\n        case \"2-0\":\n            // Target Cols - Position Based Logic\n            extract = {\n                byPositionToTargetCols: Array.from({ length: visNode.width * visNode.height }, (_, i) => `C${maxCNum + i}`)\n            }\n            extractColor = 'positionShallow';\n            break;\n        case \"2-1\":\n            // Target Cols - Context Based Logic\n            extract = {\n                byContext: {\n                    position: 'above'\n                }\n            }\n            extractColor = 'contextShallow';\n            break;\n        case \"2-2\":\n            // Target Cols - Value Based Logic\n            const createExtract = () => {\n                return eval(`currentAreaTbl => {\n                  // Please replace the default code with the necessary implementation to complete the function.\n                  return currentAreaTbl.flat().map((cell, i) => 'C' + (${maxCNum} + i))\n                  }`)\n            }\n            extract = {\n                byValue: createExtract()\n            }\n            extractColor = 'valueShallow';\n            break;\n        case \"2-3\":\n            // Target Cols - No Extract Logic\n            tableStore.insertNodeOrPropertyIntoSpecs(undefined, \"extract\")\n            break;\n        case \"3-0\":\n        case \"3-1\":\n        case \"3-2\":\n        case \"3-3\":\n            // Add Sub-Template Logic\n            messageInfo = langConfig[lang].pattern.addSubPattern + messageInfo;\n            triggerCellCursorFlag = true;\n            break;\n        case \"4\":\n            tableStore.deleteChildByPath(tableStore.spec.rawSpecs, visNode.path!);\n            tableStore.stringifySpec();\n            break;\n        case \"5\":\n            tableStore.deleteChildByPath(tableStore.spec.rawSpecs, visNode.path!, tableStore.spec.selectConstrIndex);\n            tableStore.stringifySpec();\n    }\n\n    if (extract !== null) {\n        tableStore.insertNodeOrPropertyIntoSpecs(extract, \"extract\")\n        tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(extract, tableStore.getNodebyPath(tableStore.spec.rawSpecs, visNode.path!)), extractColor];\n    }\n    if (triggerCellCursorFlag) {\n        message.info(messageInfo);\n        tableStore.spec.selectAreaFromNode = e.key;\n        document.body.style.cursor = 'cell';\n        document.documentElement.style.setProperty('--custom-cursor', 'cell');\n        const cells = tableStore.generateHighlightCells(tableStore.spec.selectionsAreaFromLegend, tableStore.spec.selectAreaFromLegend);\n        tableStore.highlightTblCells(\"input_tbl\", cells);\n    }\n    tableStore.tree.contextMenuVisible = false;\n}\n\nconst treeContainer = ref<HTMLDivElement | null>(null);\n\nfunction resetZoom() {\n    // drawTree(tableStore.spec.visTree);\n    // c.transition().duration(750)// .call(tableStore.tree.visInst!.zoomfunc as any, d3.zoomIdentity);\n    tableStore.tree.visInst!.resetZoom();\n    // 不能对g.matrix元素进行transform操作，因为zoom事件监听器是添加在svg元素上的，所以需要对svg元素进行transform操作\n    d3.select('svg.tbl-container g.left').transition().duration(750)\n        .call(miniZoom!.transform as any, d3.zoomIdentity); // 重置缩放和平移状态\n    d3.select('svg.tbl-container g.right').transition().duration(750)\n        .call(tempZoom!.transform as any, d3.zoomIdentity); // 重置缩放和平移状态\n\n}\n\nconst drawTree = (data: any) => {\n    const treeInstance = new TreeChart([2, 1], '.tree-container', data, tableStore, 1.0, 'h');\n    treeInstance.render();\n    tableStore.tree.visInst = treeInstance;\n};\n\nconst typeMap = {\n    \"null\": \"Region\",\n    \"position\": \"Position Based\",\n    \"context\": \"Context Based\",\n    \"value\": \"Value Based\",\n}\nconst selectMatchExtractArea = (type: TypeColor) => {\n    d3.selectAll('.legend').classed('legend-selection', false);\n    d3.select(`.legend.legend-${type}`).classed('legend-selection', true);\n    const selectionsFromLegend = tableStore.spec.selectionsAreaFromLegend;\n    const selectFromLegend = tableStore.spec.selectAreaFromLegend;\n    const cells = tableStore.generateHighlightCells(selectionsFromLegend, selectFromLegend);\n    tableStore.highlightTblCells(\"input_tbl\", cells);\n\n    if (selectFromLegend.length > selectionsFromLegend.length) {\n        selectFromLegend[selectFromLegend.length - 1] = type;\n    } else {\n        selectFromLegend.push(type);\n    }\n    // const cursorStyle = `url(${require('@/assets/cell.png')}), auto`;\n    document.body.style.cursor = 'cell';\n    document.documentElement.style.setProperty('--custom-cursor', 'cell');\n    // message.info(\"Now is in \" + typeMap[type as keyof typeof typeMap] + \" mode. Please select the starting area in the input table.\\n Press ESC to cancel the selection mode.\");\n    // @ts-ignore\n    message.info((lang === 'cn' ? (\"现在是\" + langConfig[lang].pattern[type]) : (\"Now is in \" + typeMap[type])) + langConfig[lang].pattern.afterClickMessage);\n    // tableStore.input_tbl.instance.rootElement.style.cursor = \"cell\";\n    // (document.querySelector('.truncated') as HTMLElement).style.cursor = \"cell\"\n}\n\n\n\nconst tblContainer = ref<SVGSVGElement | null>(null);\n\n/*\nimport { debounce } from 'lodash';\n\n// import { TableCanoniserTemplate } from '@/table-canoniser/dist/grammar';\n\nconst debouncedResize = debounce(() => {\n    drawTree(tableStore.spec.visTree);\n}, 100); // 调整延迟时间，单位为毫秒\n\nconst resizeObserver = new ResizeObserver(() => {\n    debouncedResize();\n});\n*/\n\nconst handleFormatter = (v: any) => {\n    // console.log(v, tableStore.output_tbl.tbl.length);\n    // return tableStore.output_tbl.tbl.length === 0 ? '' : isNaN(v) ? 0 : parseInt(v) + 1\n    return tableStore.spec.matchedInstNum === 0 ? '' : isNaN(v) ? 0 : parseInt(v) + 1\n}\n\nconst handleStep = (v: number, info: { offset: number, type: 'up' | 'down' }) => {\n    // :max=\" tableStore.output_tbl.tbl.length> 0 ? tableStore.spec.visTree.children![0].matchs!.length - 1 : 0\"\n    // :min=\"0\"\n    if (info.type === 'up') {\n        if (v <= 1) return;\n        tableStore.goToInstance(v - 2);\n    } else {\n        if (v >= tableStore.spec.visTree.children![0].matchs!.length - 2) return;\n        tableStore.goToInstance(v + 2);\n    }\n}\n\nfunction handleCodeChange(clickFlag = false) {\n    // console.log(\"handleCodeChange: start\", tableStore.editor.mappingSpec.codeUpdateFromEditor);\n    if (tableStore.editor.mappingSpec.codeUpdateFromEditor) {\n        setTimeout(() => {\n            tableStore.editor.mappingSpec.codeUpdateFromEditor = false;\n        }, 600)\n        if (clickFlag) return;\n    }\n    const setFlag = tableStore.prepareDataAfterCodeChange();\n    if (!setFlag) return;\n    if (document.body.style.cursor === 'default') {\n        drawMinimap(tableStore.input_tbl.tbl.length, tableStore.input_tbl.tbl[0].length, tblContainer.value, tableStore);\n    }\n    const transformRes = tableStore.transformTablebyCode();  // auto run\n\n    setTimeout(() => {\n        tableStore.editor.mappingSpec.triggerCodeChange = true;\n        if (tableStore.editor.mappingSpec.highlightCode) {\n            // console.log('handleCodeChange-highlightCode', tableStore.editor.mappingSpec.highlightCode);\n            tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode);\n            tableStore.editor.mappingSpec.highlightCode = null;\n        }\n    }, 600)\n\n    if (!transformRes) return;\n\n    if (tableStore.spec.matchedInstNum === 0) {\n        instanceContent.value = langConfig[lang].tree.noMatch;\n        tableStore.tree.instanceIndex = -1;\n    } else {\n        instanceContent.value = lang === 'en' ? 'Total ' + tableStore.spec.matchedInstNum + ' instance(s)' : '总共匹配了' + tableStore.spec.matchedInstNum + '个实例';\n    }\n    tableStore.computeColInfo(\"output_tbl\");\n    drawTree(tableStore.spec.visTree); // 会默认选择第一个节点\n    drawTblTemplate(tblContainer.value, tableStore);\n    tableStore.optimizeMiniTempDistance();\n    tableStore.updateCurve();\n}\n\n// const debouncedHandleCodeChange = tableStore.debounce(handleCodeChange, 200); // 200ms 的延迟\n\n\n// 在Vue 3的<script setup>模式下，不能像在Vue 2中那样直接通过 组件.methods 访问组件的方法。<script setup>模式的代码是模块化的，组件的methods不会自动暴露为一个对象供外部访问。使用 defineExpose 暴露方法\ndefineExpose({ handleCodeChange });\n\nwatch(() => tableStore.editor.mappingSpec.code, (newVal) => {\n    // console.log('watch code changed start', tableStore.editor.mappingSpec.triggerCodeChange);\n    tableStore.editor.mappingSpec.instance?.setValue(newVal);\n    if (tableStore.editor.mappingSpec.triggerCodeChange) {\n        handleCodeChange()\n    }\n    else if (tableStore.editor.mappingSpec.highlightCode) {\n        // console.log('watch code-highlightCode', tableStore.editor.mappingSpec.highlightCode);\n        tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode);\n        tableStore.editor.mappingSpec.highlightCode = null;\n        tableStore.editor.mappingSpec.triggerCodeChange = true;\n    }\n});\n\nwatch(() => tableStore.tree.instanceIndex, () => {\n    drawTblTemplate(tblContainer.value, tableStore);\n    tableStore.updateCurve();\n    tableStore.highlightTblPatternConstr();\n});\n\nimport { drawMinimap, miniZoom } from '@/utils/minimap';\nimport { drawTblTemplate, tempZoom } from '@/utils/template';\nwatch(() => tableStore.input_tbl.tbl, (newVal) => {\n    // console.log('watch: input_tbl changed: start');\n    drawMinimap(newVal.length, newVal[0].length, tblContainer.value, tableStore);\n    tableStore.computeColInfo(\"input_tbl\");\n});  // , { deep: true }\n\n// watch(() => tableStore.output_tbl.tbl, () => {\n//     // console.log('watch: output_tbl changed: start');\n//     tableStore.computeColInfo(\"output_tbl\");\n// }, { deep: true });\n\n// watch(() => tableStore.spec.visTree.size.height, (newVal) => {\n//     console.log('watch tbl size changed: start');\n//     const setFlag = tableStore.prepareDataAfterCodeChange();\n//     if (!setFlag) return;\n//     drawTree(tableStore.spec.visTree);\n//     console.log('watch tbl size changed: end');\n// });\n\n\nonMounted(() => {\n    document.querySelector('span.ant-input-number-handler-up')!.setAttribute(\"title\", langConfig[lang].pattern.previousInst);\n    document.querySelector('span.ant-input-number-handler-down')!.setAttribute(\"title\", langConfig[lang].pattern.nextInst)\n});\n\n\n\n</script>\n\n<style lang=\"less\">\n.goToInstance {\n    // margin-right: calc(40vw - 430px);\n    width: 59px;\n    margin: 0 6px;\n\n    /* 让数字输入框内的上下键直接可见 */\n    .ant-input-number-handler-wrap {\n        opacity: 1;\n    }\n}\n\n.tree-container {\n    width: 100%;\n    height: 100%;\n\n    .type-node:hover {\n        stroke: var(--color-selection);\n        stroke-width: 3px;\n    }\n\n    .type-node.selection {\n        stroke: var(--color-selection);\n        stroke-width: 3px;\n    }\n\n    .type-node:focus,\n    image:focus {\n        outline: none;\n    }\n}\n\n.tbl-container {\n    width: 100%;\n    height: 100%;\n\n    .mini-temp-line {\n        fill: none;\n        stroke: #0000004D; // var(--color-selectionShallow);\n        stroke-width: 2px;\n    }\n\n    rect.positionShallow {\n        fill: var(--color-positionShallow);\n        stroke: var(--color-positionShallow);\n    }\n\n    rect.position {\n        fill: var(--color-position);\n        stroke: var(--color-position);\n    }\n\n    rect.contextShallow {\n        fill: var(--color-contextShallow);\n        stroke: var(--color-contextShallow);\n    }\n\n    rect.context {\n        fill: var(--color-context);\n        stroke: var(--color-context);\n    }\n\n    rect.valueShallow {\n        fill: var(--color-valueShallow);\n        stroke: var(--color-valueShallow);\n    }\n\n    rect.value {\n        fill: var(--color-value);\n        stroke: var(--color-value);\n    }\n\n    rect.nullShallow {\n        fill: var(--color-nullShallow);\n        stroke: var(--color-nullShallow);\n    }\n\n    rect.null {\n        fill: var(--color-null);\n        stroke: var(--color-null);\n    }\n\n    rect.selectionShallow {\n        fill: var(--color-selectionShallow);\n        stroke: var(--color-selectionShallow);\n    }\n\n    rect.selection {\n        fill: var(--color-selection);\n        stroke: var(--color-selection);\n    }\n\n    .grid-cell {\n        // 不写 rect.grid-cell 是让此选择器的优先级低于 rect.selection 等选择器\n        fill: var(--color-cellFill);\n        stroke: var(--color-cellStroke);\n        stroke-width: 1px;\n    }\n\n    .grid-cell:hover {\n        stroke-width: 2px;\n    }\n\n    .tbl-template-cell:hover {\n        stroke: var(--color-selection);\n        stroke-width: 2px;\n    }\n}\n\n.legend-selection {\n    border-color: #0a58d9 !important; // var(--color-selection);\n}\n\n.legend-null {\n    background: var(--color-null);\n    border-color: var(--color-null);\n    // opacity: 0.5; /* 设置元素的透明度为 0.5 */\n}\n\n.legend-position {\n    background: var(--color-position);\n    border-color: var(--color-position);\n}\n\n// .legend-position:hover {\n//     background: var(--color-position) !important;\n// }\n\n.legend-context {\n    background: var(--color-context);\n    border-color: var(--color-context);\n}\n\n.legend-value {\n    background: var(--color-value);\n    border-color: var(--color-value);\n}\n\n.legend {\n    color: white !important;\n    border-width: 2.5px;\n\n    // 设置 span 标签内的文本水平和垂直居中\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    span {\n        text-align: center;\n        width: 100%;\n        /* 确保文本内容水平居中 */\n    }\n}\n\n.legend:hover {\n    color: white !important;\n    border-color: #0a58d9 !important;\n}\n</style>","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"wrapper\" }\nconst _hoisted_2 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"filing-container\\\" style=\\\"display:none;\\\"><span class=\\\"item\\\" id=\\\"busuanzi_container_site_pv\\\"> 本站总访问量<span id=\\\"busuanzi_value_site_pv\\\"></span>次 </span><span class=\\\"item\\\" id=\\\"busuanzi_container_site_uv\\\"> 本站访客数<span id=\\\"busuanzi_value_site_uv\\\"></span>人 </span><span class=\\\"item\\\" id=\\\"busuanzi_container_page_pv\\\"> 本文总阅读量<span id=\\\"busuanzi_value_page_pv\\\"></span>次 </span></div>\", 1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_panel_view = _resolveComponent(\"panel-view\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_panel_view)\n    ]),\n    _hoisted_2\n  ], 64))\n}","<template>\n  <div class=\"wrapper\">\n    <panel-view />\n  </div>\n  <div class=\"filing-container\" style=\"display: none;\">\n    <span class=\"item\" id=\"busuanzi_container_site_pv\">\n      本站总访问量<span id=\"busuanzi_value_site_pv\"></span>次\n    </span>\n    <span class=\"item\" id=\"busuanzi_container_site_uv\">\n      本站访客数<span id=\"busuanzi_value_site_uv\"></span>人\n    </span>\n    <span class=\"item\" id=\"busuanzi_container_page_pv\">\n      本文总阅读量<span id=\"busuanzi_value_page_pv\"></span>次\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport PanelView from \"./views/PanelView.vue\";\n\nexport default defineComponent({\n  name: \"overView\",\n  components: {\n    PanelView,\n  },\n});\n</script>\n\n<style lang=\"less\">\n* {\n  margin: 0;\n  padding: 0;\n}\n\n.wrapper {\n  display: flex;\n  flex-flow: column;\n  background-color: #fffffe;\n  height: 100vh;\n  width: 100vw;\n  overflow-x: hidden;\n  overflow-y: hidden;\n}\n</style>\n","import script from \"./InOutTable.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InOutTable.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./InOutTable.vue?vue&type=style&index=0&id=48247a9a&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport * as monaco from \"monaco-editor\";\nimport { onMounted, onUnmounted, ref } from \"vue\";\nimport { useTableStore } from \"@/store/table\";\n\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CodeView',\n  props: {\n    codeType: {}\n  },\n  setup(__props: any, { expose: __expose }) {\n\nconst { codeType } = __props;  // | \"transformScript\"\n\nconst tableStore = useTableStore();\n\nconst editorDefaultOptions = {\n    value: '',\n    language: 'typescript', // tableStore.editor[codeType].language,\n    theme: 'vs',\n    fontSize: 14,\n    glyphMargin: false,\n    automaticLayout: false, // Automatic layout may cause \"ResizeObserver loop completed with undelivered notifications.\" warning. To avoid this, set automaticLayout to false\n    autoIndent: 'advanced',\n    readOnly: codeType === \"rootArea\" ? true : false,\n    minimap: {\n        enabled: codeType === \"rootArea\" ? true : false,\n    },\n    lineNumbersMinChars: 1,\n    scrollBeyondLastLine: false, // Prevent scrolling beyond the last line\n    wordWrap: 'on', // 设置自动换行，这样就不会有左右滚动条了\n    // wordWrapColumn: 80, // 当一行代码超过 80 个字符时，编辑器将会在接近第 80 列的地方自动进行换行，而不是等到超出编辑器宽度才进行换行。\n    padding: {\n        bottom: 50, // Adjust the bottom padding to 50px\n    },\n};\n\nconst editorWrapper = ref<HTMLElement | null>(null);\n\nlet editor: monaco.editor.IStandaloneCodeEditor | null = null;\n\n// let mappingSpec: string = \"\"\n\nconst regex = /\\s+/g;\nconst areStringEqual = (str1: string, str2: string) => (str1.replace(regex, '') === str2.replace(regex, ''));\n\nconst updateCode = (newCode: string) => {\n    if (areStringEqual(tableStore.editor.mappingSpec.code, newCode)) return; // 忽略换行还有空格之后比较字符串是否相等\n    tableStore.spec.undoHistory.push(tableStore.editor.mappingSpec.code);\n    // 当执行新的操作时，重做历史应当清空\n    tableStore.spec.redoHistory = [];\n    tableStore.editor.mappingSpec.codeUpdateFromEditor = true;\n    tableStore.editor.mappingSpec.code = newCode;\n}\n\n__expose({ updateCode });\n\nconst initEditor = () => {\n    if (editor) { // if editor is already initialized, dispose it first\n        editor.dispose();\n    }\n    const editorOptions = {\n        ...editorDefaultOptions,\n        value: tableStore.editor[codeType].code,\n    };\n    editor = monaco.editor.create(editorWrapper.value!, editorOptions as monaco.editor.IEditorConstructionOptions);  // ! means that editorWrapper.value is not null\n\n    const debounceUpdateCode = tableStore.debounce(() => {\n        tableStore.checkGrammarError();\n        if (tableStore.editor.mappingSpec.errorMark !== null) return\n\n        if (tableStore.editor.mappingSpec.autoRun) {\n            updateCode(editor!.getValue());\n        }\n    }, 1000);\n\n    // editor.onDidBlurEditorText(updateCode);\n    // 失焦事件优先于别的按钮的点击事件\n    editor.onDidChangeModelContent(() => {\n        tableStore.editor.mappingSpec.decorations?.clear();\n        debounceUpdateCode();\n    });\n};\n\n/*\nwatch(() => tableStore.editor[codeType].code, (newVal) => {\n    // console.log(\"watch editor code\", codeType);\n    editor?.setValue(newVal);  // update editor content; ? means if editor is not null then call setValue, else do nothing\n});\n*/\n\n// import { debounce } from 'lodash';\nconst handleResize = tableStore.debounce(() => {\n    if (editor) {\n        editor.layout();\n    }\n}, 300); // Adjust the delay time, in milliseconds\n\n// 监听整个窗口的大小变化，通常会引发更多不必要的回调执行，可能会影响性能。\n// window.addEventListener('resize', handleResize);\n\n// const resizeObserver = new ResizeObserver(() => {\n//     // console.log(\"Resize observed\", entries);\n//     try { handleResize(); }\n//     catch (e) { console.log(e) }\n// });\nconst resizeObserver = new ResizeObserver(handleResize);\n\nif (codeType === \"mappingSpec\") {\n\n    // https://microsoft.github.io/monaco-editor/playground.html?source=v0.50.0#example-extending-language-services-configure-javascript-defaults\n\n    const libUri = \"ts:grammar.ts\";\n    // Check if model already exists\n    const existingModel = monaco.editor.getModels().find(model => model.uri.toString() === libUri);\n\n    if (!existingModel) {\n        fetch('./grammar.ts').then((response) => {\n            response.text().then((tsContent) => {\n\n                // validation settings\n                monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\n                    noSemanticValidation: true,\n                    noSyntaxValidation: false,\n                });\n\n                // compiler options\n                monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n                    target: monaco.languages.typescript.ScriptTarget.ES2015,\n                    allowNonTsExtensions: true,\n                });\n                monaco.languages.typescript.javascriptDefaults.addExtraLib(tsContent, libUri);\n\n                // When resolving definitions and references, the editor will try to use created models.\n                // Creating a model for the library allows \"peek definition/references\" commands to work with the library.\n                monaco.editor.createModel(tsContent, \"typescript\", monaco.Uri.parse(libUri));\n            });\n        });\n    }\n}\n\nonMounted(() => {\n    initEditor();\n    // 可以精确地监听元素大小变化，避免了全局 resize 事件可能带来的性能问题，尤其是当页面上有多个需要监听大小变化的元素时。\n    resizeObserver.observe(editorWrapper.value!);\n    if (editor) {\n        tableStore.editor[codeType].instance = editor;\n        if (codeType === \"mappingSpec\") {\n            tableStore.editor.mappingSpec.decorations = editor.createDecorationsCollection([]);\n        }\n    }\n});\n\nonUnmounted(() => {\n    // 没有这段代码会导致Code Panel 中的const option 重复被声明\n    if (editor) {\n        editor.dispose();\n    }\n});\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref_key: \"editorWrapper\",\n    ref: editorWrapper,\n    class: \"editor-container\"\n  }, null, 512))\n}\n}\n\n})","<template>\n    <div ref=\"editorWrapper\" class=\"editor-container\"></div>\n</template>\n\n<script setup lang=\"ts\">\nimport * as monaco from \"monaco-editor\";\nimport { onMounted, onUnmounted, ref } from \"vue\";\nimport { useTableStore } from \"@/store/table\";\n\n\nconst { codeType } = defineProps<{ codeType: \"mappingSpec\" | \"rootArea\" }>();  // | \"transformScript\"\n\nconst tableStore = useTableStore();\n\nconst editorDefaultOptions = {\n    value: '',\n    language: 'typescript', // tableStore.editor[codeType].language,\n    theme: 'vs',\n    fontSize: 14,\n    glyphMargin: false,\n    automaticLayout: false, // Automatic layout may cause \"ResizeObserver loop completed with undelivered notifications.\" warning. To avoid this, set automaticLayout to false\n    autoIndent: 'advanced',\n    readOnly: codeType === \"rootArea\" ? true : false,\n    minimap: {\n        enabled: codeType === \"rootArea\" ? true : false,\n    },\n    lineNumbersMinChars: 1,\n    scrollBeyondLastLine: false, // Prevent scrolling beyond the last line\n    wordWrap: 'on', // 设置自动换行，这样就不会有左右滚动条了\n    // wordWrapColumn: 80, // 当一行代码超过 80 个字符时，编辑器将会在接近第 80 列的地方自动进行换行，而不是等到超出编辑器宽度才进行换行。\n    padding: {\n        bottom: 50, // Adjust the bottom padding to 50px\n    },\n};\n\nconst editorWrapper = ref<HTMLElement | null>(null);\n\nlet editor: monaco.editor.IStandaloneCodeEditor | null = null;\n\n// let mappingSpec: string = \"\"\n\nconst regex = /\\s+/g;\nconst areStringEqual = (str1: string, str2: string) => (str1.replace(regex, '') === str2.replace(regex, ''));\n\nconst updateCode = (newCode: string) => {\n    if (areStringEqual(tableStore.editor.mappingSpec.code, newCode)) return; // 忽略换行还有空格之后比较字符串是否相等\n    tableStore.spec.undoHistory.push(tableStore.editor.mappingSpec.code);\n    // 当执行新的操作时，重做历史应当清空\n    tableStore.spec.redoHistory = [];\n    tableStore.editor.mappingSpec.codeUpdateFromEditor = true;\n    tableStore.editor.mappingSpec.code = newCode;\n}\n\ndefineExpose({ updateCode });\n\nconst initEditor = () => {\n    if (editor) { // if editor is already initialized, dispose it first\n        editor.dispose();\n    }\n    const editorOptions = {\n        ...editorDefaultOptions,\n        value: tableStore.editor[codeType].code,\n    };\n    editor = monaco.editor.create(editorWrapper.value!, editorOptions as monaco.editor.IEditorConstructionOptions);  // ! means that editorWrapper.value is not null\n\n    const debounceUpdateCode = tableStore.debounce(() => {\n        tableStore.checkGrammarError();\n        if (tableStore.editor.mappingSpec.errorMark !== null) return\n\n        if (tableStore.editor.mappingSpec.autoRun) {\n            updateCode(editor!.getValue());\n        }\n    }, 1000);\n\n    // editor.onDidBlurEditorText(updateCode);\n    // 失焦事件优先于别的按钮的点击事件\n    editor.onDidChangeModelContent(() => {\n        tableStore.editor.mappingSpec.decorations?.clear();\n        debounceUpdateCode();\n    });\n};\n\n/*\nwatch(() => tableStore.editor[codeType].code, (newVal) => {\n    // console.log(\"watch editor code\", codeType);\n    editor?.setValue(newVal);  // update editor content; ? means if editor is not null then call setValue, else do nothing\n});\n*/\n\n// import { debounce } from 'lodash';\nconst handleResize = tableStore.debounce(() => {\n    if (editor) {\n        editor.layout();\n    }\n}, 300); // Adjust the delay time, in milliseconds\n\n// 监听整个窗口的大小变化，通常会引发更多不必要的回调执行，可能会影响性能。\n// window.addEventListener('resize', handleResize);\n\n// const resizeObserver = new ResizeObserver(() => {\n//     // console.log(\"Resize observed\", entries);\n//     try { handleResize(); }\n//     catch (e) { console.log(e) }\n// });\nconst resizeObserver = new ResizeObserver(handleResize);\n\nif (codeType === \"mappingSpec\") {\n\n    // https://microsoft.github.io/monaco-editor/playground.html?source=v0.50.0#example-extending-language-services-configure-javascript-defaults\n\n    const libUri = \"ts:grammar.ts\";\n    // Check if model already exists\n    const existingModel = monaco.editor.getModels().find(model => model.uri.toString() === libUri);\n\n    if (!existingModel) {\n        fetch('./grammar.ts').then((response) => {\n            response.text().then((tsContent) => {\n\n                // validation settings\n                monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\n                    noSemanticValidation: true,\n                    noSyntaxValidation: false,\n                });\n\n                // compiler options\n                monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n                    target: monaco.languages.typescript.ScriptTarget.ES2015,\n                    allowNonTsExtensions: true,\n                });\n                monaco.languages.typescript.javascriptDefaults.addExtraLib(tsContent, libUri);\n\n                // When resolving definitions and references, the editor will try to use created models.\n                // Creating a model for the library allows \"peek definition/references\" commands to work with the library.\n                monaco.editor.createModel(tsContent, \"typescript\", monaco.Uri.parse(libUri));\n            });\n        });\n    }\n}\n\nonMounted(() => {\n    initEditor();\n    // 可以精确地监听元素大小变化，避免了全局 resize 事件可能带来的性能问题，尤其是当页面上有多个需要监听大小变化的元素时。\n    resizeObserver.observe(editorWrapper.value!);\n    if (editor) {\n        tableStore.editor[codeType].instance = editor;\n        if (codeType === \"mappingSpec\") {\n            tableStore.editor.mappingSpec.decorations = editor.createDecorationsCollection([]);\n        }\n    }\n});\n\nonUnmounted(() => {\n    // 没有这段代码会导致Code Panel 中的const option 重复被声明\n    if (editor) {\n        editor.dispose();\n    }\n});\n\n\n</script>\n\n\n<style lang=\"less\">\n.editor-container {\n    width: 100%;\n    height: 100%;\n    /* You can adjust the height as needed */\n\n    .nullShallow {\n        // background-color: var(--color-null);\n        background-color: var(--color-nullRGBA); // var(--color-nullShallow);\n    }\n\n    .positionShallow {\n        // background-color: var(--color-position);\n        background-color: var(--color-positionRGBA); // var(--color-positionShallow);\n    }\n\n    .valueShallow {\n        // background-color: var(--color-value);\n        background-color: var(--color-valueRGBA); // var(--color-valueShallow);\n    }\n\n    .contextShallow {\n        // background-color: var(--color-context);\n        background-color: var(--color-contextRGBA); // var(--color-contextShallow);\n    }\n\n    .selectionShallow {\n        // background-color: var(--color-selection);\n        background-color: var(--color-selectionRGBA); // var(--color-selectionShallow);\n    }\n\n}\n</style>","import script from \"./CodeView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CodeView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CodeView.vue?vue&type=style&index=0&id=0b1d3474&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./PatternVis.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PatternVis.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PatternVis.vue?vue&type=style&index=0&id=70147bea&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"panel\" }\nconst _hoisted_2 = { class: \"system-name\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", { id: \"system_name\" }, \"TableCanoniser\", -1)\nconst _hoisted_4 = { style: {\"left\":\"20px\",\"position\":\"absolute\"} }\nconst _hoisted_5 = { style: {\"font-size\":\"16px\",\"font-weight\":\"normal\",\"margin-right\":\"5px\"} }\nconst _hoisted_6 = { style: {\"right\":\"20px\",\"position\":\"absolute\"} }\nconst _hoisted_7 = { style: {\"margin-left\":\"5px\"} }\nconst _hoisted_8 = { style: {\"margin-left\":\"5px\"} }\nconst _hoisted_9 = { class: \"main-views\" }\nconst _hoisted_10 = {\n  class: \"column\",\n  style: {\"flex\":\"12\"}\n}\nconst _hoisted_11 = { style: {\"flex\":\"1\",\"display\":\"flex\",\"min-height\":\"0px\"} }\nconst _hoisted_12 = { style: {\"flex\":\"1\",\"display\":\"flex\",\"min-height\":\"0px\"} }\nconst _hoisted_13 = {\n  class: \"column\",\n  style: {\"flex\":\"5\"}\n}\nconst _hoisted_14 = { class: \"view\" }\nconst _hoisted_15 = { class: \"view-content\" }\nconst _hoisted_16 = [\"title\"]\nconst _hoisted_17 = [\"title\"]\nconst _hoisted_18 = [\"title\"]\n\nimport { computed, onMounted, ref } from \"vue\";\n\nimport InOutTable from \"@/components/InOutTable.vue\";\nimport CodeView from \"@/components/CodeView.vue\";\nimport PatternVis from \"@/components/PatternVis.vue\";\n// import ChatBot from \"@/components/ChatBot.vue\";\nimport { lang, langConfig } from \"@/utils/lang\";\n\nimport { typeMapColor, TypeColor } from '@/utils/style';\nimport { getNeighborEls, onDrag, endDrag } from '@/utils/dragLayout';\n\nimport { useTableStore } from \"@/store/table\";\nimport { message } from \"ant-design-vue\";\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PanelView',\n  setup(__props) {\n\nfor (const key in typeMapColor) {\n  document.documentElement.style.setProperty(`--color-${key}`, typeMapColor[key as TypeColor]);\n}\ndocument.documentElement.style.setProperty('--custom-cursor', 'default');\n\nconst tableStore = useTableStore();\n\nconst caseOption = computed(() => {\n  return tableStore.caseList.map((v) => {\n    return { value: v, label: v };\n  });\n})\n\nconst currentCase = computed(() => tableStore.currentCase);\n\nconst codePanel = ref(\"1\");\n// const loading = ref<boolean>(false);\n\nconst undoFlag = computed(() => tableStore.spec.undoHistory.length === 0);\nconst redoFlag = computed(() => tableStore.spec.redoHistory.length === 0);\n\n// 撤销操作\nfunction undo() {\n  tableStore.editor.mappingSpec.errorMark = null\n  const lastSpec = tableStore.spec.undoHistory.pop();\n  if (lastSpec !== undefined) {\n    tableStore.spec.redoHistory.push(tableStore.editor.mappingSpec.code);\n    tableStore.editor.mappingSpec.code = lastSpec;\n  }\n}\n\n// 重做操作\nfunction redo() {\n  tableStore.editor.mappingSpec.errorMark = null\n  const lastUndo = tableStore.spec.redoHistory.pop();\n  if (lastUndo !== undefined) {\n    tableStore.spec.undoHistory.push(tableStore.editor.mappingSpec.code);\n    tableStore.editor.mappingSpec.code = lastUndo;\n  }\n}\n\n// 获取组件 PatternVis 的实例引用\nconst patternVis = ref();\nconst specCode = ref();\nfunction transformTablebyCode() {\n  if (!tableStore.editor.mappingSpec.autoRun) {\n    if (tableStore.editor.mappingSpec.errorMark !== null) {\n      const marker = tableStore.editor.mappingSpec.errorMark;\n      message.error(`Invalid syntax at Line ${marker.startLineNumber}, Column ${marker.startColumn}:\\n ${marker.message}`);\n      return false;\n    }\n    const newCode = tableStore.editor.mappingSpec.instance!.getValue();\n    specCode.value.updateCode(newCode);\n  }\n\n  patternVis.value.handleCodeChange(true); // handleCodeChange();\n  // loading.value = false;\n  if (tableStore.editor.mappingSpec.highlightCode) {\n    tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode);\n    tableStore.editor.mappingSpec.highlightCode = null;\n    tableStore.editor.mappingSpec.triggerCodeChange = true;\n  }\n}\n\nfunction handleKeydown(event: KeyboardEvent) {\n  if (event.key === 'Escape') {\n    // 按下 ESC 键时清除所有高亮、选中等\n    tableStore.editor.mappingSpec.decorations?.clear();\n    tableStore.input_tbl.instance.deselectCell();\n    tableStore.output_tbl.instance.deselectCell();\n    tableStore.input_tbl.instance.updateSettings({ cell: [] });\n    tableStore.output_tbl.instance.updateSettings({ cell: [] });\n    tableStore.highlightMinimapCells([]);\n\n    tableStore.clearStatus(\"tree\");\n    tableStore.clearStatus(\"matchArea\");\n    // tableStore.clearStatus(\"miniHighlight\");\n\n  }\n}\n\nfunction handleCaseChange(value: string) {\n  tableStore.currentCase = value;\n  isDropdownOpen.value = false;\n}\n\nconst isDropdownOpen = ref(false);\nlet timeHandler: any = null;\nlet dropdownListEle: any = null;\n\nfunction selectEnter(e: any, v: any) {\n  isDropdownOpen.value = true;\n  if (dropdownListEle === null) {\n    setTimeout(() => {\n      dropdownListEle = document.querySelector(\".rc-virtual-list-holder-inner\");\n      dropdownListEle?.addEventListener('mouseenter', () => {\n        if (timeHandler !== null) {\n          clearTimeout(timeHandler);\n          timeHandler = null;\n        }\n        isDropdownOpen.value = true;\n      })\n      dropdownListEle?.addEventListener('mouseleave', () => {\n        isDropdownOpen.value = false;\n      })\n    }, 100)\n  }\n}\n\nfunction selectLeave(e: any, v: any) {\n  timeHandler = setTimeout(() => {\n    isDropdownOpen.value = false;\n  }, 200);\n}\n\nonMounted(() => {\n  tableStore.loadCaseData(tableStore.currentCase);\n  document.addEventListener('keydown', handleKeydown);\n  document.addEventListener(\"mousemove\", onDrag);\n  document.addEventListener(\"mouseup\", endDrag);\n});\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_select = _resolveComponent(\"a-select\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_button_group = _resolveComponent(\"a-button-group\")!\n  const _component_a_checkbox = _resolveComponent(\"a-checkbox\")!\n  const _component_a_tab_pane = _resolveComponent(\"a-tab-pane\")!\n  const _component_a_tabs = _resolveComponent(\"a-tabs\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"span\", _hoisted_4, [\n        _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_unref(langConfig)[_unref(lang)].panel.case), 1),\n        _createVNode(_component_a_select, {\n          value: currentCase.value,\n          options: caseOption.value,\n          size: \"small\",\n          onChange: handleCaseChange,\n          onMouseenter: selectEnter,\n          onMouseleave: selectLeave,\n          open: isDropdownOpen.value,\n          style: {\"width\":\"137px\"}\n        }, null, 8, [\"value\", \"options\", \"open\"])\n      ]),\n      _createElementVNode(\"span\", _hoisted_6, [\n        _createVNode(_component_a_button_group, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_a_button, {\n              size: \"small\",\n              onClick: undo,\n              disabled: undoFlag.value\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_icon, {\n                  name: \"io-arrow-undo-outline\",\n                  scale: \"0.9\"\n                }),\n                _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_unref(langConfig)[_unref(lang)].panel.undo), 1)\n              ]),\n              _: 1\n            }, 8, [\"disabled\"]),\n            _createVNode(_component_a_button, {\n              size: \"small\",\n              onClick: redo,\n              disabled: redoFlag.value\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_icon, {\n                  name: \"io-arrow-redo-outline\",\n                  scale: \"0.9\"\n                }),\n                _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_unref(langConfig)[_unref(lang)].panel.redo), 1)\n              ]),\n              _: 1\n            }, 8, [\"disabled\"])\n          ]),\n          _: 1\n        })\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_9, [\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createElementVNode(\"div\", _hoisted_11, [\n          _createVNode(InOutTable)\n        ]),\n        _createElementVNode(\"div\", {\n          class: \"divider-h\",\n          onMousedown: _cache[0] || (_cache[0] = ($event: any) => (_unref(getNeighborEls)($event, 'height'))),\n          title: \"Drag to resize\"\n        }, null, 32),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _createVNode(PatternVis, {\n            ref_key: \"patternVis\",\n            ref: patternVis\n          }, null, 512)\n        ])\n      ]),\n      _createElementVNode(\"div\", {\n        class: \"divider-w\",\n        onMousedown: _cache[1] || (_cache[1] = ($event: any) => (_unref(getNeighborEls)($event, 'width'))),\n        title: \"Drag to resize\"\n      }, null, 32),\n      _createElementVNode(\"div\", _hoisted_13, [\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createElementVNode(\"div\", _hoisted_15, [\n            _createVNode(_component_a_tabs, {\n              activeKey: codePanel.value,\n              \"onUpdate:activeKey\": _cache[3] || (_cache[3] = ($event: any) => ((codePanel).value = $event)),\n              type: \"card\"\n            }, {\n              rightExtra: _withCtx(() => [\n                _createElementVNode(\"span\", {\n                  title: _unref(langConfig)[_unref(lang)].panel.autoRunTitle\n                }, [\n                  _createVNode(_component_a_checkbox, {\n                    checked: _unref(tableStore).editor.mappingSpec.autoRun,\n                    \"onUpdate:checked\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(tableStore).editor.mappingSpec.autoRun) = $event))\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(_unref(langConfig)[_unref(lang)].panel.autoRun), 1)\n                    ]),\n                    _: 1\n                  }, 8, [\"checked\"])\n                ], 8, _hoisted_16),\n                _createVNode(_component_a_button, {\n                  size: \"small\",\n                  style: {\"margin\":\"1px 6px 5px\"},\n                  onClick: transformTablebyCode\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_icon, {\n                      name: \"la-rocket-solid\",\n                      scale: \"0.85\"\n                    }),\n                    _createElementVNode(\"span\", null, _toDisplayString(_unref(langConfig)[_unref(lang)].panel.run), 1)\n                  ]),\n                  _: 1\n                })\n              ]),\n              default: _withCtx(() => [\n                _createVNode(_component_a_tab_pane, { key: \"1\" }, {\n                  tab: _withCtx(() => [\n                    _createElementVNode(\"span\", {\n                      style: {\"font-size\":\"15px\"},\n                      title: _unref(langConfig)[_unref(lang)].panel.specTitle\n                    }, _toDisplayString(_unref(langConfig)[_unref(lang)].panel.spec), 9, _hoisted_17)\n                  ]),\n                  default: _withCtx(() => [\n                    _createVNode(CodeView, {\n                      codeType: \"mappingSpec\",\n                      ref_key: \"specCode\",\n                      ref: specCode\n                    }, null, 512)\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_tab_pane, { key: \"2\" }, {\n                  tab: _withCtx(() => [\n                    _createElementVNode(\"span\", {\n                      style: {\"font-size\":\"15px\"},\n                      title: _unref(langConfig)[_unref(lang)].panel.matchedInstTitle\n                    }, _toDisplayString(_unref(langConfig)[_unref(lang)].panel.matchedInst) + \" [\" + _toDisplayString(_unref(tableStore).spec.matchedInstNum) + \"] \", 9, _hoisted_18)\n                  ]),\n                  default: _withCtx(() => [\n                    _createVNode(CodeView, { codeType: \"rootArea\" })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"activeKey\"])\n          ])\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div id=\"panel\">\n    <div class=\"system-name\">\n      <span id=\"system_name\">TableCanoniser</span>\n      <span style=\"left: 20px; position: absolute;\">\n        <span style=\"font-size: 16px; font-weight: normal; margin-right: 5px\">{{ langConfig[lang].panel.case }}</span>\n        <a-select :value=\"currentCase\" :options=\"caseOption\" size=\"small\" @change=\"handleCaseChange\"\n          @mouseenter=\"selectEnter\" @mouseleave=\"selectLeave\" :open=\"isDropdownOpen\" style=\"width: 137px;\"></a-select>\n      </span>\n      <span style=\"right: 20px; position: absolute;\">\n        <a-button-group>\n          <a-button size=\"small\" @click=\"undo\" :disabled=\"undoFlag\">\n            <v-icon name=\"io-arrow-undo-outline\" scale=\"0.9\"></v-icon>\n            <span style=\"margin-left: 5px\">{{ langConfig[lang].panel.undo }}</span>\n          </a-button>\n          <a-button size=\"small\" @click=\"redo\" :disabled=\"redoFlag\">\n            <v-icon name=\"io-arrow-redo-outline\" scale=\"0.9\"></v-icon>\n            <span style=\"margin-left: 5px\">{{ langConfig[lang].panel.redo }}</span>\n          </a-button>\n        </a-button-group>\n      </span>\n    </div>\n    <!-- <ChatBot /> -->\n    <div class=\"main-views\">\n      <div class=\"column\" style=\"flex: 12\">\n        <div style=\"flex: 1; display: flex; min-height: 0px;\">\n          <InOutTable />\n        </div>\n        <div class=\"divider-h\" @mousedown=\"getNeighborEls($event, 'height')\" title=\"Drag to resize\"></div>\n        <div style=\"flex: 1; display: flex; min-height: 0px;\">\n          <PatternVis ref=\"patternVis\" />\n        </div>\n      </div>\n      <div class=\"divider-w\" @mousedown=\"getNeighborEls($event, 'width')\" title=\"Drag to resize\"></div>\n      <div class=\"column\" style=\"flex: 5;\">\n        <div class=\"view\">\n          <div class=\"view-content\">\n            <a-tabs v-model:activeKey=\"codePanel\" type=\"card\">\n              <template #rightExtra>\n                <!-- <a-switch v-model:checked=\"tableStore.editor.mappingSpec.autoRun\" size=\"small\" checked-children=\"On\"\n                  un-checked-children=\"Off\"\n                  title=\"Set whether to automatically run the mapping specification after changing code\" /> -->\n                <span :title=\"langConfig[lang].panel.autoRunTitle\">\n                  <a-checkbox v-model:checked=\"tableStore.editor.mappingSpec.autoRun\">{{ langConfig[lang].panel.autoRun\n                    }}</a-checkbox></span>\n                <a-button size=\"small\" style=\"margin: 1px 6px 5px;\" @click=\"transformTablebyCode\">\n                  <v-icon name=\"la-rocket-solid\" scale=\"0.85\"></v-icon>\n                  <span>{{ langConfig[lang].panel.run }}</span>\n                </a-button>\n              </template>\n\n              <a-tab-pane key=\"1\">\n                <template #tab>\n                  <span style=\"font-size: 15px\" :title=\"langConfig[lang].panel.specTitle\">\n                    {{ langConfig[lang].panel.spec }}\n                  </span>\n                </template>\n                <CodeView codeType=\"mappingSpec\" ref=\"specCode\" />\n              </a-tab-pane>\n              <a-tab-pane key=\"2\">\n                <template #tab>\n                  <span style=\"font-size: 15px\" :title=\"langConfig[lang].panel.matchedInstTitle\">\n                    {{ langConfig[lang].panel.matchedInst }} [{{ tableStore.spec.matchedInstNum }}]\n                  </span>\n                </template>\n                <CodeView codeType=\"rootArea\" />\n              </a-tab-pane>\n            </a-tabs>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref } from \"vue\";\n\nimport InOutTable from \"@/components/InOutTable.vue\";\nimport CodeView from \"@/components/CodeView.vue\";\nimport PatternVis from \"@/components/PatternVis.vue\";\n// import ChatBot from \"@/components/ChatBot.vue\";\nimport { lang, langConfig } from \"@/utils/lang\";\n\nimport { typeMapColor, TypeColor } from '@/utils/style';\nfor (const key in typeMapColor) {\n  document.documentElement.style.setProperty(`--color-${key}`, typeMapColor[key as TypeColor]);\n}\ndocument.documentElement.style.setProperty('--custom-cursor', 'default');\n\nimport { getNeighborEls, onDrag, endDrag } from '@/utils/dragLayout';\n\nimport { useTableStore } from \"@/store/table\";\nimport { message } from \"ant-design-vue\";\nconst tableStore = useTableStore();\n\nconst caseOption = computed(() => {\n  return tableStore.caseList.map((v) => {\n    return { value: v, label: v };\n  });\n})\n\nconst currentCase = computed(() => tableStore.currentCase);\n\nconst codePanel = ref(\"1\");\n// const loading = ref<boolean>(false);\n\nconst undoFlag = computed(() => tableStore.spec.undoHistory.length === 0);\nconst redoFlag = computed(() => tableStore.spec.redoHistory.length === 0);\n\n// 撤销操作\nfunction undo() {\n  tableStore.editor.mappingSpec.errorMark = null\n  const lastSpec = tableStore.spec.undoHistory.pop();\n  if (lastSpec !== undefined) {\n    tableStore.spec.redoHistory.push(tableStore.editor.mappingSpec.code);\n    tableStore.editor.mappingSpec.code = lastSpec;\n  }\n}\n\n// 重做操作\nfunction redo() {\n  tableStore.editor.mappingSpec.errorMark = null\n  const lastUndo = tableStore.spec.redoHistory.pop();\n  if (lastUndo !== undefined) {\n    tableStore.spec.undoHistory.push(tableStore.editor.mappingSpec.code);\n    tableStore.editor.mappingSpec.code = lastUndo;\n  }\n}\n\n// 获取组件 PatternVis 的实例引用\nconst patternVis = ref();\nconst specCode = ref();\nfunction transformTablebyCode() {\n  if (!tableStore.editor.mappingSpec.autoRun) {\n    if (tableStore.editor.mappingSpec.errorMark !== null) {\n      const marker = tableStore.editor.mappingSpec.errorMark;\n      message.error(`Invalid syntax at Line ${marker.startLineNumber}, Column ${marker.startColumn}:\\n ${marker.message}`);\n      return false;\n    }\n    const newCode = tableStore.editor.mappingSpec.instance!.getValue();\n    specCode.value.updateCode(newCode);\n  }\n\n  patternVis.value.handleCodeChange(true); // handleCodeChange();\n  // loading.value = false;\n  if (tableStore.editor.mappingSpec.highlightCode) {\n    tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode);\n    tableStore.editor.mappingSpec.highlightCode = null;\n    tableStore.editor.mappingSpec.triggerCodeChange = true;\n  }\n}\n\nfunction handleKeydown(event: KeyboardEvent) {\n  if (event.key === 'Escape') {\n    // 按下 ESC 键时清除所有高亮、选中等\n    tableStore.editor.mappingSpec.decorations?.clear();\n    tableStore.input_tbl.instance.deselectCell();\n    tableStore.output_tbl.instance.deselectCell();\n    tableStore.input_tbl.instance.updateSettings({ cell: [] });\n    tableStore.output_tbl.instance.updateSettings({ cell: [] });\n    tableStore.highlightMinimapCells([]);\n\n    tableStore.clearStatus(\"tree\");\n    tableStore.clearStatus(\"matchArea\");\n    // tableStore.clearStatus(\"miniHighlight\");\n\n  }\n}\n\nfunction handleCaseChange(value: string) {\n  tableStore.currentCase = value;\n  isDropdownOpen.value = false;\n}\n\nconst isDropdownOpen = ref(false);\nlet timeHandler: any = null;\nlet dropdownListEle: any = null;\n\nfunction selectEnter(e: any, v: any) {\n  isDropdownOpen.value = true;\n  if (dropdownListEle === null) {\n    setTimeout(() => {\n      dropdownListEle = document.querySelector(\".rc-virtual-list-holder-inner\");\n      dropdownListEle?.addEventListener('mouseenter', () => {\n        if (timeHandler !== null) {\n          clearTimeout(timeHandler);\n          timeHandler = null;\n        }\n        isDropdownOpen.value = true;\n      })\n      dropdownListEle?.addEventListener('mouseleave', () => {\n        isDropdownOpen.value = false;\n      })\n    }, 100)\n  }\n}\n\nfunction selectLeave(e: any, v: any) {\n  timeHandler = setTimeout(() => {\n    isDropdownOpen.value = false;\n  }, 200);\n}\n\nonMounted(() => {\n  tableStore.loadCaseData(tableStore.currentCase);\n  document.addEventListener('keydown', handleKeydown);\n  document.addEventListener(\"mousemove\", onDrag);\n  document.addEventListener(\"mouseup\", endDrag);\n});\n\n</script>\n\n<style lang=\"less\">\n#panel {\n  font-family: \"Arial\", sans-serif;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100vh;\n  margin: 0;\n  padding: 0;\n  background-color: #f0f0f0;\n  /* Background color for the whole panel */\n}\n\n.system-name {\n  font-size: 23px;\n  font-weight: bold;\n  width: calc(100vw - 40px);\n  margin-top: 2px;\n  //   margin: 20px 0;\n  padding: 10px 15px;\n  background-color: #3498db;\n  /* System name background color */\n  color: white;\n  /* System name text color */\n  //   border-radius: 8px;\n  text-align: center;\n\n  .el-switch__label {\n    color: #fff;\n    // font-size: 30px;\n  }\n\n  .el-switch__label.is-active {\n    color: #7bed9f;\n  }\n}\n\n.main-views {\n  display: flex;\n  justify-content: space-between;\n  width: calc(100vw - 10px);\n  padding: 1px;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n\n  // 这是用来让图标和文字有一定间距\n  svg.ov-icon+span {\n    margin-left: 5px;\n  }\n\n  .column {\n    height: calc(100vh - 56px);\n  }\n\n  .view {\n\n    // // height: calc(100vh - 80px);\n    .ant-tabs {\n      height: 100%;\n\n      .ant-tabs-content {\n        height: 100%;\n      }\n    }\n  }\n\n}\n\n.column {\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n}\n\n.view {\n  //   margin: 8px 2px 2px 8px;\n  padding: 10px 8px 5px 8px;\n  // border: 1px solid #ccc;\n  //   border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  background-color: #ffffff;\n  /* View background color */\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n\n.view-title {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 10px;\n  color: #2c3e50;\n  overflow: auto;\n  /* View title text color */\n}\n\n.view-content {\n  // overflow-y: auto;\n  // overflow: hidden;\n  // height: calc(100% - 40px);\n  min-height: 0px;\n  flex: auto;\n}\n\n.mapping-details {\n  display: flex;\n  flex-direction: column;\n}\n\n\n.ant-message-notice-content {\n  white-space: pre-wrap;\n  /* 使 \\n 换行符生效 */\n  text-align: left;\n  /* 左对齐 */\n  max-width: 700px;\n}\n\n.ant-btn-default {\n  transition: 0s;\n}\n\n.ant-checkbox+span {\n  padding-inline-start: 5px;\n  padding-inline-end: 4px;\n}\n\n.ant-btn-default:hover {\n  svg path {\n    stroke: #4494fc;\n  }\n}\n\n.ant-btn-default:disabled {\n  background-color: #ffffff;\n  border-color: #d9d9d9;\n  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.02);\n  cursor: not-allowed;\n  color: rgba(0, 0, 0, 0.25);\n\n  svg path {\n    stroke: rgba(0, 0, 0, 0.25);\n  }\n}\n\n.divider-w {\n  width: 2px;\n  cursor: col-resize;\n  background-color: #ccc;\n}\n\n.divider-h {\n  height: 2px;\n  cursor: row-resize;\n  background-color: #ccc;\n}\n</style>\n","import script from \"./PanelView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PanelView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PanelView.vue?vue&type=style&index=0&id=70b8f004&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=771c1db7&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=771c1db7&lang=less\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\nimport { createPinia } from 'pinia'\n\nconst pinia = createPinia()\nconst app = createApp(App)\n\nimport { Select, Upload, Button, Tabs, Tooltip, Popover, Input, Modal, Space, Dropdown, Menu, Form, Row, Col, Radio, Divider, Flex, InputNumber, Checkbox } from \"ant-design-vue\";\n// import 'ant-design-vue/dist/reset.css';\n\napp.use(pinia).use(Select).use(Tabs).use(Button).use(Upload)\n    .use(Tooltip).use(Popover).use(Input).use(Modal).use(Space).use(Dropdown).use(Menu).use(Form).use(Row).use(Col).use(Radio).use(Divider).use(Flex).use(InputNumber).use(Checkbox);\n\n// A Vue component for including inline SVG icons from different popular iconpacks easily.\n// https://oh-vue-icons.js.org/docs   // MdFitscreenOutlined\nimport { OhVueIcon, addIcons } from \"oh-vue-icons\";\nimport { BiUpload, BiDownload, LaRocketSolid, BiArrowClockwise, IoArrowUndoOutline, IoArrowRedoOutline, BiChevronLeft, BiChevronRight } from \"oh-vue-icons/icons\";\n\naddIcons(BiUpload, BiDownload, LaRocketSolid, BiArrowClockwise, IoArrowUndoOutline, IoArrowRedoOutline, BiChevronLeft, BiChevronRight);\n\n// app.config.globalProperties.$basePath = process.env.BASE_URL;\n\napp.component(\"v-icon\", OhVueIcon);\n\n// import ElementPlus from 'element-plus'\n// app.use(ElementPlus)\n// import { ElButton, ElDropdown, ElSwitch } from 'element-plus'\n// app.use(ElButton).use(ElDropdown).use(ElSwitch)\n\n// import 'element-plus/dist/index.css'\n\napp.mount('#app')","import { defineStore } from 'pinia'\nimport Handsontable from \"handsontable\";\nimport * as d3 from 'd3';\nimport { shallowRef } from 'vue';\n\nimport { Table2D, TableCanoniserTemplate, TableCanoniserKeyWords, CellInfo, CellValueType, AreaInfo, completeCellConstraint, CustomError } from \"@/table-canoniser/dist/grammar\"\nimport { transformTable, serialize, getCellBySelect, getNodebyPath } from \"@/table-canoniser/dist/parser\"\nimport { TreeChart, NodeData } from '@/utils/drawTree';\n\nimport { message } from 'ant-design-vue';\n\nimport * as monaco from \"monaco-editor\";\nimport * as ts from \"typescript\";\nimport { typeMapColor, TypeColor } from '@/utils/style';\n\nimport { lang, langConfig } from \"@/utils/lang\";\n\nfunction replaceEvenSpaces(str: string) {\n  // 使用正则表达式匹配连续的空格\n  return str.replace(/ {2,}/g, (match) => {\n    // 获取连续空格的数量\n    const length = match.length;\n\n    // 计算一半的空格数量\n    const halfLength = length / 2;\n\n    // 返回一半数量的空格\n    return ' '.repeat(halfLength);\n  });\n}\n\n// 去除所有空格\nfunction removeWhitespace(str: string) {\n  return str.replace(/ /g, '') // .replace(/\\s+/g, '');  这个会把换行符也去掉\n}\n\nfunction csvToMatrix(csvText: string) {\n  // 首先将文本按行分割\n  const rows = csvText.trim().split('\\n');\n\n  // 然后将每行按逗号分割成数组\n  const matrix: Table2D = rows.map(row => row.split(','));\n\n  return matrix;\n}\n\nconst removeSpaceType = {\n  even: replaceEvenSpaces,\n  all: removeWhitespace,\n}\n\nexport interface TblCell {\n  row: number;\n  col: number;\n  className?: string;\n}\n\nexport interface TblPatternGrid {\n  row: number;\n  col: number;\n  text?: any; // string\n  textColor?: string;\n  bgColor?: string;\n}\n\n/** startRow, startCol, endRow, endCol */\nexport type Selection = [number, number, number, number];\n\ninterface TreeNode {\n  [key: string]: any,\n  children?: TreeNode[];\n}\n\nexport interface AreaBox {\n  width: number,\n  height: number,\n  x: number,\n  y: number,\n  instIndex?: number,\n  isDefinedFromSpec?: boolean\n}\n\n// type CoordinateMap = Map<number, Map<number, any>>;  // 根据坐标获取某值\n\nexport interface VisTreeNode extends TableCanoniserTemplate, AreaBox {\n  id?: number,\n  type?: \"position\" | \"value\" | \"context\" | \"null\",\n  path?: number[],\n  matchs?: AreaBox[],\n  currentMatchs?: AreaBox[],\n  // currentAreas?: AreaInfo[],\n  constrsInfo?: { x: number, y: number, isDefinedFromSpec: boolean, instIndex: number }[][],\n  children?: VisTreeNode[]\n}\n\nexport interface AreaForm {\n  offsetLayer: any,\n  offsetFrom: any,\n  position: {\n    x: any,\n    y: any\n  },\n  traverse: {\n    xDirection: any,\n    yDirection: any\n  },\n  size: {\n    width: any,\n    height: any\n  }\n}\n\nexport type ColInfo = {\n  width: number,  // column width\n  index: number, // column index\n  string: number[],\n  number: number[],\n  none: number[]\n}\n\n// define and expose a store\nexport const useTableStore = defineStore('table', {\n  // data\n  state() {\n    return {\n      caseList: shallowRef<string[]>([\"1a. university\", \"1b. university_v\", \"2. model\", \"3. phone\", \"4. bank\", \"5. payroll\", \"6. York\"]),\n      currentCase: \"1a. university\", // caseList[0],\n      currentInitData: shallowRef<Table2D>([]),\n      spec: {\n        undoHistory: [] as string[],  // 这里不能是 shallowRef，要不然 computed 计算不会被更新\n        redoHistory: [] as string[],\n        rawSpecs: shallowRef<TableCanoniserTemplate[]>([]),\n        visTree: shallowRef<VisTreeNode>({ id: 0, width: 0, height: 0, x: 0, y: 0, type: \"null\", path: [], children: [] }),\n        visTreeMatchPath: shallowRef<{ [key: string]: VisTreeNode }>({}),\n        selectNode: shallowRef<NodeData | null>(null),\n        selectConstrIndex: -1,\n        constrNodeRectClickId: \"\",\n        selectAreaFromNode: \"\" as \"\" | \"0\" | \"1\" | \"2-0\" | \"2-1\" | \"2-2\" | \"2-3\" | \"3-0\" | \"3-1\" | \"3-2\" | \"3-3\" | \"4\",\n        selectAreaFromLegend: shallowRef<TypeColor[]>([]),\n        selectionsAreaFromLegend: shallowRef<Selection[]>([]),\n        selectionsPath: shallowRef<number[][]>([]),  // 每一个selection在rawSpecs中对应的path\n        dragConfigOpen: false,\n        // disableGoToInstFlag: true,\n        matchedInstNum: 0,\n        areaConfig: shallowRef<TableCanoniserTemplate>({\n          match: {\n            startCell: {},\n            size: {},\n            traverse: {},\n            constraints: [],\n          },\n          extract: null,\n          fill: '',\n          children: [],\n        }),\n        areaFormData: shallowRef<AreaForm>({\n          offsetLayer: null,\n          offsetFrom: null,\n          position: {\n            x: null,\n            y: null\n          },\n          traverse: {\n            xDirection: null,\n            yDirection: null\n          },\n          size: {\n            width: null,\n            height: null\n          }\n        }),\n      },\n      editor: {\n        mappingSpec: {\n          code: '',\n          codePref: 'const option: TableCanoniserTemplate[] = ',\n          codeSuff: '\\nreturn option;',\n          errorMark: null as monaco.editor.IMarker | null,\n          decorations: shallowRef<monaco.editor.IEditorDecorationsCollection | null>(null),\n          highlightCode: null as [number, number, string] | null,  // [startLine, endLine, color]\n          // language: 'typescript',\n          instance: shallowRef<monaco.editor.IStandaloneCodeEditor | null>(null),\n          triggerCodeChange: true,\n          codeUpdateFromEditor: false,\n          autoRun: true\n        },\n        rootArea: {\n          code: '',\n          codePref: 'const matchedResult: AreaInfo = ',\n          object: shallowRef<AreaInfo | null>(null),\n          // language: 'json',\n          instance: shallowRef<monaco.editor.IStandaloneCodeEditor | null>(null)\n        },\n      },\n      input_tbl: {\n        instance: {} as Handsontable,\n        // cells: [] as [number, number][],  // highlighted cells\n        tbl: shallowRef<Table2D>([]),  // 使用 shallowRef 会导致 watch时只对引用本身的变化做出响应，而不会追踪引用对象内部的深层变化。这意味着，当你改变 tbl 的某个单元格的值时，watch 并不会被触发，因为 tbl 引用本身并没有发生变化。但是，ref 性能开销很大\n        in2out: shallowRef<{ [key: string]: string[] }>({}),\n        in2nodes: shallowRef<{ [key: string]: Set<number> }>({}),  // 'x-y-width-height' -> {node.id} 的映射\n        colInfo: shallowRef<ColInfo[]>([]),\n      },\n      output_tbl: {\n        instance: {} as Handsontable,\n        // cells: [] as [number, number][], // highlighted cells\n        tbl: shallowRef<Table2D>([]),\n        cols: shallowRef<string[]>([]),\n        out2in: shallowRef<{ [key: string]: string[] }>({}),\n        colInfo: shallowRef<ColInfo[]>([]),\n      },\n      tree: {\n        contextMenuVisible: false,\n        instanceIndex: -1,\n        clickNode: shallowRef<NodeData | null>(null),\n        clickConstrIndex: -1,\n        offset: {\n          left: { x: 0, y: 0 },\n          right: { x: 0, y: 0 }\n        },\n        visInst: shallowRef<TreeChart | null>(null),\n        tblVisHighlight: null as d3.Selection<SVGGElement, unknown, null, undefined> | null,\n        tblVisInfo: shallowRef<AreaBox | null>(null),  // tblTemplate中起始单元格在input tbl中的坐标位置(x, y)，以及单元格的宽高(width, height)\n        minimapInstHighlight: null as d3.Selection<SVGGElement, unknown, null, undefined> | null,\n        minimapVisInfo: {\n          width: 0,\n          height: 0\n        },\n        menuAllList: [\n          //   {\n          //   key: \"0\",\n          //   label: \"Reset Area\",\n          //   title: \"Reset Area\",\n          //   // icon: () => h(MailOutlined),\n          // }, \n          {\n            key: \"3\",\n            label: langConfig[lang].store.menu.addPattern,\n            title: langConfig[lang].store.menu.addPattern,\n            children: [{\n              key: \"3-0\",\n              label: langConfig[lang].store.menu.position,\n              title: langConfig[lang].store.menu.positionTitle,\n              // class: \"legend-position\",\n              style: { color: typeMapColor['position'] },  // 使用 style 设置样式\n            }, {\n              key: \"3-1\",\n              label: langConfig[lang].store.menu.context,\n              title: langConfig[lang].store.menu.contextTitle,\n              style: { color: typeMapColor['context'] },\n            }, {\n              key: \"3-2\",\n              label: langConfig[lang].store.menu.value,\n              title: langConfig[lang].store.menu.valueTitle,\n              style: { color: typeMapColor['value'] },\n            }, {\n              key: \"3-3\",\n              label: langConfig[lang].store.menu.region,\n              title: langConfig[lang].store.menu.regionTitle,\n              style: { color: typeMapColor['null'] },\n            }],\n          }, {\n            key: \"1\",\n            label: langConfig[lang].store.menu.addConstr,\n            title: langConfig[lang].store.menu.addConstr,\n            // icon: () => h(MailOutlined),\n            // disabled: true\n          }, {\n            key: \"2\",\n            label: langConfig[lang].store.menu.resetCol,\n            title: langConfig[lang].store.menu.resetColTitle,\n            children: [{\n              key: \"2-0\",\n              label: langConfig[lang].store.menu.position,\n              title: langConfig[lang].store.menu.positionTitle,\n              // class: \"legend-position\",\n              style: { color: typeMapColor['position'] },  // 使用 style 设置样式\n            }, {\n              key: \"2-1\",\n              label: langConfig[lang].store.menu.context,\n              title: langConfig[lang].store.menu.contextTitle,\n              style: { color: typeMapColor['context'] },\n            }, {\n              key: \"2-2\",\n              label: langConfig[lang].store.menu.value,\n              title: langConfig[lang].store.menu.valueTitle,\n              style: { color: typeMapColor['value'] },\n            }, {\n              key: \"2-3\",\n              label: langConfig[lang].store.menu.region,\n              title: langConfig[lang].store.menu.regionTitle,\n              style: { color: typeMapColor['null'] },\n            }],\n          }, {\n            key: \"4\",\n            label: langConfig[lang].store.menu.deletePattern,\n            title: langConfig[lang].store.menu.deletePatternTitle,\n            // disabled: true\n            // icon: () => h(MailOutlined),\n          }, {\n            key: \"5\",\n            label: langConfig[lang].store.menu.deleteConstr,\n            title: langConfig[lang].store.menu.deleteConstrTitle,\n          }],\n        menuList: [] as Array<{ [key: string]: any }>,\n      }\n    }\n  },\n  // methods\n  actions: {\n    async loadCaseData(caseN: string) {\n      let prompt: string[] = [];\n      let case_path = `./${caseN}/`;\n      // const begin = Date.now();\n      try {\n        // Parallel processing of all fetch requests ==> faster: 0.678s vs 0.275s\n        const [data_res, spec_res] = await Promise.all([   // , script_res\n          fetch(case_path + 'data.csv'),  // 'data.json'\n          fetch(case_path + 'spec.js'),\n          // fetch(case_path + 'script.py')\n        ]);\n\n        // Parallel processing of all text extraction\n        const [dataText, specText] = await Promise.all([    // , scriptText\n          data_res.ok ? data_res.text() : Promise.resolve(null),\n          spec_res.ok ? spec_res.text() : Promise.resolve(null),\n          // script_res.ok ? script_res.text() : Promise.resolve(null)\n        ]);\n\n        this.initTblInfo();\n        this.clearStatus(\"matchArea\");\n        this.editor.mappingSpec.errorMark = null;\n        this.tree.instanceIndex = -1; // 0;\n        this.spec.selectNode = null;\n        this.editor.mappingSpec.highlightCode = null;\n\n        if (dataText !== null) {\n          this.input_tbl.tbl = csvToMatrix(dataText) // JSON.parse(dataText).input_tbl;\n          this.input_tbl.instance.updateData(this.input_tbl.tbl);\n          this.currentInitData = csvToMatrix(dataText);\n          // 每次都是页面刷新后，所有单元格/列的宽度为50，只有点击一下界面之后，才会突然自动列大小，变成有的列width大一点，有的列width小一点，这是为什么呢\n          // 通常是由于Handsontable在初始化时还没有正确计算出表格容器的尺寸，或者在Vue组件生命周期的某个阶段，Handsontable的重新渲染没有正确触发。这个问题可能与表格渲染的时机有关。\n          this.input_tbl.instance.render();\n          // document.getElementById('system_name')?.click();\n        } else {\n          prompt.push(`Failed to load data from ${caseN}`);\n        }\n\n        if (specText !== null) {\n          this.spec.undoHistory = [];\n          this.spec.redoHistory = [];\n          this.editor.mappingSpec.code = specText;\n          // this.transformTblUpdateRootArea();\n        } else {\n          prompt.push(`Failed to load spec from ${caseN}`);\n        }\n\n        // if (scriptText !== null) {\n        //   this.editor.transformScript.code = scriptText;\n        // } else {\n        //   prompt.push(`Failed to load script from ${caseN}`);\n        // }\n      } catch (error) {\n        prompt.push(`Error loading data: ${error}`);\n      }\n      // const end = Date.now();\n      // console.log(`Loaded case ${caseN} in seconds: ${(end - begin) / 1000}`);\n      this.currentCase = caseN;\n      prompt.forEach((msg) => {\n        message.error(msg);\n      })\n    },\n\n    /**\n     * Update visTree's matchs\n     */\n    traverseTree4UpdateMatchs(nodes: AreaInfo[], instIndex: number = -1) {\n      let visNode: VisTreeNode | null = null;\n      nodes.forEach((node, index) => {\n        const path = node.templateRef.toString()\n        const firstLayerFlag = node.templateRef.length === 1;\n        const isDefinedFromSpec = firstLayerFlag || node.isDefinedFromSpec\n        if (firstLayerFlag) instIndex = index;\n        if (!this.spec.visTreeMatchPath.hasOwnProperty(path)) {\n          visNode = this.getNodebyPath(this.spec.visTree.children!, node.templateRef) as VisTreeNode;\n          if (visNode === null) return;\n          this.spec.visTreeMatchPath[path] = visNode;\n          visNode.matchs = [{\n            x: node.x,\n            y: node.y,\n            width: node.width,\n            height: node.height,\n            instIndex,\n            isDefinedFromSpec\n          }];\n          // visNode.currentAreas = [node];\n          visNode.constrsInfo = [];\n          visNode.match?.constraints?.forEach((constraint) => {\n            const cellInfoSelections = [];\n            const allConstr = completeCellConstraint(constraint);\n            const cellInfo = getCellBySelect(allConstr, node, this.editor.rootArea.object!, true);\n            if (cellInfo) {\n              cellInfoSelections.push({ x: cellInfo.x, y: cellInfo.y, isDefinedFromSpec, instIndex });\n            }\n            visNode!.constrsInfo!.push(cellInfoSelections);\n          })\n        } else {\n          this.spec.visTreeMatchPath[path].matchs!.push({\n            x: node.x,\n            y: node.y,\n            width: node.width,\n            height: node.height,\n            instIndex,\n            isDefinedFromSpec\n          });\n          // this.spec.visTreeMatchPath[path].currentAreas!.push(node);\n          visNode = this.spec.visTreeMatchPath[path];\n          visNode.match?.constraints?.forEach((constraint, ci) => {\n            const cellInfoSelections = visNode!.constrsInfo![ci];\n            const allConstr = completeCellConstraint(constraint);\n            const cellInfo = getCellBySelect(allConstr, node, this.editor.rootArea.object!, true);\n            if (cellInfo) {\n              cellInfoSelections.push({ x: cellInfo.x, y: cellInfo.y, isDefinedFromSpec, instIndex });\n            }\n          })\n        }\n        this.traverseTree4UpdateMatchs(node.children, instIndex);\n      })\n    },\n\n    /**\n     * Update visTree's AreaBox properties\n     */\n    updateVisTreeAreaBox(node: VisTreeNode | null = null) {\n      if (node === null) {\n        if (this.spec.visTree.children!.length === 0) return;\n        node = this.spec.visTree.children![0];\n      }\n      if (node.matchs === undefined) return;\n      const matchedInsts = node.matchs.filter((match) => match.instIndex === this.tree.instanceIndex);\n      node.currentMatchs = [];\n      let isDefinedFromSpecInst: any = null;\n      matchedInsts.forEach((match) => {\n        if (node!.currentMatchs!.some((cm) => cm.x === match.x && cm.y === match.y)) return;\n        const newMatch: AreaBox = { ...match };\n        if (match.isDefinedFromSpec) {\n          if (isDefinedFromSpecInst === null) {\n            isDefinedFromSpecInst = newMatch;\n          } else {\n            newMatch.isDefinedFromSpec = false;\n          }\n        }\n        node!.currentMatchs!.push(newMatch);\n      })\n\n      if (isDefinedFromSpecInst !== null) {\n        node.x = isDefinedFromSpecInst.x;\n        node.y = isDefinedFromSpecInst.y;\n        node.width = isDefinedFromSpecInst.width;\n        node.height = isDefinedFromSpecInst.height;\n      } else if (node.currentMatchs.length > 0) {\n        const areaBox = node.currentMatchs[0];\n        node.x = areaBox.x;\n        node.y = areaBox.y;\n        node.width = areaBox.width;\n        node.height = areaBox.height;\n      }\n\n      if (node.children) {\n        node.children.forEach((child) => {\n          this.updateVisTreeAreaBox(child);\n        })\n      }\n    },\n\n    goToInstance(instance: number) {\n      if (this.spec.matchedInstNum === 0) {\n        // message.error(\"No matched instance!\");\n        return;\n      }\n      if (isNaN(instance)) {\n        message.error(\"The input number is invalid!\");\n        return;\n      }\n      instance = Math.round(instance);\n      const maxInst = this.spec.visTree.children![0].matchs!.length;\n      if (instance < 0 || instance >= maxInst) {\n        message.error(`The input number is out of range: [1, ${maxInst}]`);\n        return;\n      }\n      // instanceIndex 的变化会触发drawTblTemplate等事件\n      this.tree.instanceIndex = instance;\n      this.updateVisTreeAreaBox();\n      this.highlightViewsAfterClickNode();\n\n      if (this.tree.minimapInstHighlight && this.tree.minimapInstHighlight.selectAll('rect').size() === 0) {\n        this.highlightMinimapInsts();\n      };\n\n      const highlight = this.tree.minimapInstHighlight!;\n      highlight.selectAll('rect').attr('stroke', 'none');\n      highlight.select(`rect:nth-child(${this.tree.instanceIndex + 1})`).attr('stroke', typeMapColor.selection);\n\n      // this.updateCurve();\n    },\n    highlightMinimapInsts() {\n      const highlight = this.tree.minimapInstHighlight!;\n      const visInfo = this.tree.minimapVisInfo!;\n      const tableStore = this;\n\n      highlight.selectAll('rect').remove();\n      if (this.spec.visTree.children!.length === 0 || this.spec.visTree.children![0].matchs === undefined) return;\n      highlight.raise().selectAll('rect').data(this.spec.visTree.children![0].matchs!.map((d, i) => ({ x: d.x, y: d.y, width: d.width, height: d.height, index: i })))\n        .enter().append('rect') // .classed('grid-inst', true)\n        .attr('x', d => d.x * visInfo.width)\n        .attr('y', d => d.y * visInfo.height)\n        .attr('width', d => d.width * visInfo.width)\n        .attr('height', d => d.height * visInfo.height)\n        .attr('fill', 'rgba(0, 0, 0, 0)')  // 设置透明，如果为 none，则不会有交互事件\n        .attr('stroke', (d, i) => {\n          if (i === this.tree.instanceIndex) {\n            return typeMapColor.selection;\n          } else {\n            return 'none';\n          }\n        })\n        .attr('stroke-width', 1.5)\n        .on('mouseover', function (event: any, d) {\n          d3.select(this).attr('stroke', typeMapColor.selection);\n        })\n        .on('mouseout', function (event, d) {\n          if (d.index !== tableStore.tree.instanceIndex)\n            d3.select(this).attr('stroke', 'none');\n        })\n        .on('click', function (event: any, d) {\n          // tableStore.goToInstance(d.index - tableStore.tree.instanceIndex);\n          tableStore.goToInstance(d.index);\n        })\n        .append('svg:title').text((d, i) => lang === 'en' ? `The ${tableStore.numberToOrdinal(i + 1)} instance.\\nArea Box:\\n · x: ${d.x}\\n · y: ${d.y}\\n · width: ${d.width}\\n · height: ${d.height}` : `第${i + 1}个实例。\\n区域网格信息：\\n · x：${d.x}\\n · y：${d.y}\\n · 宽：${d.width}\\n · 高：${d.height}`);\n    },\n\n    optimizeMiniTempDistance(maxDistance: number = 120) {\n      try {\n        const miniG = d3.select('g.left g.matrix')\n        const miniWidth = (miniG.node() as SVGGraphicsElement).getBBox().width\n        const distanceGap = this.tree.offset.right.x - this.tree.offset.left.x - miniWidth - maxDistance;\n\n        if (distanceGap > 0) {\n          this.tree.offset.left.x += distanceGap;\n          miniG.attr('transform', `translate(${this.tree.offset.left.x}, ${this.tree.offset.left.y})`);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n\n    updateCurve() {\n      try {\n        const currentInstRect = this.tree.minimapInstHighlight!.select(`rect:nth-child(${this.tree.instanceIndex + 1})`);\n        const instRightX = +currentInstRect.attr('x') + +currentInstRect.attr('width');\n\n        const instTopY = +currentInstRect.attr('y');\n        const instBottomY = +currentInstRect.attr('y') + +currentInstRect.attr('height');\n\n\n        const tempRect = d3.select('rect.tbl-template-cell')\n        const tempLeftX = +tempRect.attr('x');\n        const tempTopY = +tempRect.attr('y');\n        const tempBottomY = +tempRect.attr('y') + +tempRect.attr('height') * this.spec.visTree.children![0].height;\n\n        const miniG = d3.select('g.left g.matrix')\n        const tempG = d3.select('g.right g.tbl-template')\n\n        // 获取当前变换\n        const instTransform = (miniG.node() as SVGGraphicsElement).getCTM()!;\n        const tempTransform = (tempG.node() as SVGGraphicsElement).getCTM()!;\n\n        const applyTransform = (x: number, y: number, transform: DOMMatrix) => {\n          return {\n            x: transform.a * x + transform.e,\n            y: transform.d * y + transform.f\n          }\n        }\n\n        // 计算变换后的点\n        const rectTopRight = applyTransform(instRightX, instTopY, instTransform);\n        const rectBottomRight = applyTransform(instRightX, instBottomY, instTransform);\n        const rectRightTopLeft = applyTransform(tempLeftX, tempTopY, tempTransform);\n        const rectRightBottomLeft = applyTransform(tempLeftX, tempBottomY, tempTransform);\n\n        const lineGenerator = d3.line().curve(d3.curveCatmullRom);\n        // 绘制曲线\n        const pathData1 = lineGenerator([\n          [rectTopRight.x, rectTopRight.y],\n          [rectRightTopLeft.x, rectRightTopLeft.y]\n        ]);\n\n        const pathData2 = lineGenerator([\n          [rectBottomRight.x, rectBottomRight.y],\n          [rectRightBottomLeft.x, rectRightBottomLeft.y]\n        ]);\n\n        d3.select('path.top-line').attr(\"d\", pathData1);\n        d3.select('path.bottom-line').attr(\"d\", pathData2);\n      }\n      catch (e) {\n        d3.select('path.top-line').attr(\"d\", \"\");\n        d3.select('path.bottom-line').attr(\"d\", \"\");\n      }\n    },\n\n    /**\n     * Update in2nodes and selectionsAreaFromLegend and selectAreaFromLegend of each node\n     */\n    traverseTree4UpdateIn2Nodes(nodes: VisTreeNode[], parentPath: number[] = [], idCounter: [number] = [1]) {\n      const in2nodes = this.input_tbl.in2nodes;\n      nodes.forEach((node, index) => {\n        node.id = idCounter[0]++;\n        // 构建当前节点的 path\n        const currentPath = [...parentPath, index];\n        node.path = currentPath;\n\n        const areaKey = `${node.x}-${node.y}-${node.width}-${node.height}`;\n\n        // 给每个node赋予type，并计算selectionsAreaFromLegend和selectAreaFromLegend\n        node.type = \"null\";\n        if (node.extract !== undefined && node.extract != null) {\n          if (node.extract.byValue !== undefined) {\n            node.type = \"value\";\n          } else if (node.extract.byContext !== undefined) {\n            node.type = \"context\";\n          } else if (node.extract.byPositionToTargetCols !== undefined) {\n            node.type = \"position\";\n          }\n        }\n        this.spec.selectionsAreaFromLegend.push([node.y, node.x, node.y + node.height - 1, node.x + node.width - 1]);\n        this.spec.selectAreaFromLegend.push(node.type)\n        this.spec.selectionsPath.push(node.path);\n\n        if (in2nodes.hasOwnProperty(areaKey)) {\n          in2nodes[areaKey].add(node.id!);\n        } else {\n          in2nodes[areaKey] = new Set([node.id!]);\n        }\n        node.matchs?.forEach((match) => {\n          const { x, y, width, height } = match;\n          const areaKey = `${x}-${y}-${width}-${height}`;\n          if (in2nodes.hasOwnProperty(areaKey)) {\n            in2nodes[areaKey].add(node.id!);\n          } else {\n            in2nodes[areaKey] = new Set([node.id!]);\n          }\n        })\n        if (node.children) this.traverseTree4UpdateIn2Nodes(node.children, currentPath, idCounter);\n      })\n    },\n\n    transformTblUpdateRootArea(specs: TableCanoniserTemplate[] = []) {\n      const { rootArea, tidyData, executionMessages } = transformTable(this.input_tbl.tbl, specs);\n      // this.editor.rootArea.codePref + JSON.stringify(rootArea)\n      this.editor.rootArea.object = rootArea;\n      const strSpec = serialize(rootArea);\n      // 正则表达式匹配 JSON 对象中的键（包括可能的空白字符和引号）\n      const removeQuotesFromKeysRegex = /\"(\\w+)\":/g;\n      this.editor.rootArea.code = this.editor.rootArea.codePref + strSpec.replace(removeQuotesFromKeysRegex, '$1:');\n      // this.editor.rootArea.instance!.setValue(this.editor.rootArea.code);\n      this.traverseTree4UpdateMatchs(rootArea.children);\n      this.tree.instanceIndex = 0;\n      this.updateVisTreeAreaBox();\n      this.input_tbl.in2nodes = {};\n      this.spec.selectAreaFromLegend = []\n      this.spec.selectionsAreaFromLegend = []\n      this.spec.selectionsPath = []\n      // this.editor.mappingSpec.highlightCode = null;\n      this.traverseTree4UpdateIn2Nodes(this.spec.visTree.children!);\n\n      if (executionMessages.length > 0) {\n        executionMessages.forEach((msg) => {\n          // console.log(msg);\n          const currentNode: TableCanoniserTemplate = this.getNodebyPath(this.spec.rawSpecs, msg.data.path)\n          if (msg.type === \"MismatchNumberOfCells\") {\n            currentNode.extract = msg.data.code\n          }\n          const highlightCode: [number, number, string] = [...this.getHighlightCodeStartEndLine(msg.data.code, currentNode), 'selectionShallow'];\n\n          if (this.editor.mappingSpec.highlightCode === null) {\n            this.editor.mappingSpec.highlightCode = highlightCode;\n          }\n\n          const startLine = highlightCode[0];\n          const endLine = highlightCode[1];\n\n          message.warning(`${msg.type} warning on lines: ${startLine}-${endLine}\\n` + msg.message);\n\n        })\n        this.editor.mappingSpec.triggerCodeChange = false; // 下面的代码修改不会触发 handleCodeChange 函数\n        this.stringifySpec();\n      }\n\n      return tidyData;\n    },\n\n    generateHighlightCells(selected: Selection[], classNames: string[] = []): TblCell[] {\n      const cells: TblCell[] = [];\n      if (classNames.length === 0) {\n        classNames = Array(selected.length).fill(\"null\");\n      }\n      selected.forEach((range, ri) => {\n        for (let row = range[0]; row <= range[2]; row++) {\n          for (let col = range[1]; col <= range[3]; col++) {\n            cells.push({ row, col, className: classNames[ri] });\n          }\n        }\n      });\n      return cells;\n    },\n\n    highlightTblCells(tbl: \"input_tbl\" | \"output_tbl\", cells: TblCell[], coords: [number, number][] | null = null, rowFlag = true, colFlag = true) {\n      this[tbl].instance.updateSettings({ cell: cells });\n      if (coords === null) {\n        coords = cells!.map((c) => [c.row, c.col] as [number, number]);\n      }\n      if (coords.length) {\n        let { topLeft, rowSize, colSize } = this.startPoint(coords);\n        // 滚动到中间位置\n        const visibleRows = this[tbl].instance.countVisibleRows();\n        const visibleCols = this[tbl].instance.countVisibleCols();\n        this[tbl].instance.scrollViewportTo({\n          row: rowFlag ? (rowSize === 1 ? Math.max(0, topLeft[0] - Math.floor(visibleRows / 2)) : Math.max(0, topLeft[0] - 2)) : undefined,\n          col: colFlag ? (colSize === 1 ? Math.max(0, topLeft[1] - Math.floor(visibleCols / 2)) : Math.max(0, topLeft[1] - 1)) : undefined,\n          verticalSnap: \"top\",\n          horizontalSnap: \"start\",\n        });\n      }\n    },\n\n    highlightMinimapCells(cells: TblCell[], clear = true) {\n      if (clear) d3.selectAll('g.matrix rect.grid-cell').attr('class', 'grid-cell');\n      cells.forEach((cell) => {\n        if (cell.className) {\n          d3.select(`g.matrix #grid-${cell.row}-${cell.col}`).raise()\n            .classed(cell.className, true)\n        }\n      });\n    },\n\n    highlightViewsAfterClickNode() {\n      const clickNode = this.tree.clickNode;\n      const nodeConstrId = this.tree.clickConstrIndex;\n      d3.select('.tbl-container .tbl-template-highlight').selectAll('rect').remove();\n      if (clickNode !== null) {\n        const visData = clickNode.data\n        if (nodeConstrId === -1) {  // 点击的是 node\n          // 绘制矩阵里的高亮\n          this.highlightTblTemplate(visData.currentMatchs!);\n\n          const matchArea: Array<[number, number, number, number]> = [];\n          visData.matchs?.forEach((match) => {\n            const { x, y, width, height } = match;\n            matchArea.push([y, x, y + height - 1, x + width - 1]);\n          })\n          let allHightedInCells: TblCell[] = [];\n          let allHightedOutCells: TblCell[] = [];\n          if (matchArea.length > 0) {\n            const { selectedCoords, hightedCells } = this.getHightlightedCells(matchArea, `${visData.type}Shallow`);\n            allHightedInCells = allHightedInCells.concat(hightedCells);\n            const cells = this.in_out_mapping(selectedCoords, \"input_tbl\", `${visData.type}Shallow`);\n            allHightedOutCells = allHightedOutCells.concat(cells);\n            this.highlightMinimapCells(hightedCells);\n          }\n\n          const selected: Array<[number, number, number, number]> = [[visData.y, visData.x, visData.y + visData.height - 1, visData.x + visData.width - 1]];\n          const { selectedCoords, hightedCells } = this.getHightlightedCells(selected, visData.type!);\n          allHightedInCells = allHightedInCells.concat(hightedCells);\n          // 绘制输入表高亮\n          this.highlightTblCells(\"input_tbl\", allHightedInCells, Object.values(selectedCoords)[0]);\n          const cells = this.in_out_mapping(selectedCoords, \"input_tbl\", visData.type);\n          allHightedOutCells = allHightedOutCells.concat(cells);\n          const coordsOut = cells.map((c) => [c.row, c.col] as [number, number]);\n          // 绘制输出表高亮\n          this.highlightTblCells(\"output_tbl\", allHightedOutCells, coordsOut);\n          // 绘制Minimap高亮\n          this.highlightMinimapCells(hightedCells, matchArea.length === 0);\n          // 在 D3.js 中，使用 .classed() 方法为元素添加类时，如果一个元素同时拥有多个类，CSS 样式的优先级依赖于 CSS 样式表中的定义顺序，而不是你通过 D3.js 添加类的顺序。\n\n          this.input_tbl.instance.deselectCell();\n          this.output_tbl.instance.deselectCell();\n\n\n        } else { // 点击的事 Constraints\n          // 绘制矩阵里的高亮\n          let constrIndex = 0;\n          const cellInfo = visData.constrsInfo![nodeConstrId].map((ele, index) => ({ ele, index })).filter(info => info.ele.instIndex === this.tree.instanceIndex);\n          if (cellInfo === undefined) return;\n          this.highlightTblTemplate(cellInfo.map((info) => {\n            if (info.ele.isDefinedFromSpec) constrIndex = info.index;\n            return {\n              x: info.ele.x,\n              y: info.ele.y,\n              width: 1,\n              height: 1,\n              isDefinedFromSpec: info.ele.isDefinedFromSpec\n            }\n          }));\n\n          // 高亮Input table中的cells\n          const cellInfoSelections = visData.constrsInfo![nodeConstrId].map((cellInfo) => [cellInfo.y, cellInfo.x, cellInfo.y, cellInfo.x] as Selection);\n          const classNames = Array(cellInfoSelections.length).fill(\"selectionShallow\");\n          const cells = this.generateHighlightCells(cellInfoSelections, classNames);\n          let { row, col } = cells.slice(-1)[0];\n          if (constrIndex < classNames.length) {\n            // classNames[tableStore.tree.instanceIndex] = 'selection';\n            cells[constrIndex].className = 'selection';\n            row = cells[constrIndex].row;\n            col = cells[constrIndex].col;\n          }\n          this.highlightTblCells(\"input_tbl\", cells, [[row, col]]);\n          this.highlightMinimapCells(cells);\n        }\n      }\n    },\n\n    in_out_mapping(selectedCoords: { [key: string]: [number, number][] }, type: \"input_tbl\" | \"output_tbl\", className: string = \"selection\") {\n      const posi_mapping = type === \"input_tbl\" ? this.input_tbl.in2out : this.output_tbl.out2in;\n      if (Object.keys(posi_mapping).length === 0) {\n        return [];\n      }\n      let cells: TblCell[] = [];\n      let posi: string[] = [];\n      for (let range in selectedCoords) {\n        selectedCoords[range].forEach((pi) => {\n          posi = posi.concat(posi_mapping[`[${pi[0]},${pi[1]}]`]);\n        });\n      }\n      // console.log(posi, posi_mapping);\n      const recordPis: string[] = []\n      if (posi) {\n        posi.forEach((pi) => {\n          if (pi && pi.startsWith(\"[\") && pi.endsWith(\"]\") && !recordPis.includes(pi)) {\n            recordPis.push(pi);\n            let pi_n = JSON.parse(pi) as [number, number];\n            cells.push({ row: pi_n[0], col: pi_n[1], className });\n          }\n        });\n      }\n      return cells;\n    },\n\n    doRectanglesIntersect(rect1: AreaBox, rect2: AreaBox): boolean {\n      return (\n        rect1.x < rect2.x + rect2.width &&\n        rect1.x + rect1.width > rect2.x &&\n        rect1.y < rect2.y + rect2.height &&\n        rect1.y + rect1.height > rect2.y\n      );\n    },\n\n    // 判断区域 A 是否包含区域 B\n    isRectanglesContained(parent: Selection, child: Selection): boolean {\n      const [pStartRow, pStartCol, pEndRow, pEndCol] = parent;\n      const [cStartRow, cStartCol, cEndRow, cEndCol] = child;\n\n      return (\n        pStartRow <= cStartRow &&\n        pStartCol <= cStartCol &&\n        pEndRow >= cEndRow &&\n        pEndCol >= cEndCol\n      );\n    },\n\n    findMaxCNumber(arr: any[] | null = null) {\n      if (arr === null) arr = this.output_tbl.cols;\n\n      let maxNumber = 0;\n\n      arr.forEach(ele => {\n        // 使用正则表达式匹配以 \"C\" 开头并以数字结尾的字符串\n        if (typeof ele !== 'string') return;\n        const match = ele.match(/^C(\\d+)$/);\n        if (match) {\n          const number = parseInt(match[1], 10);\n          if (number > maxNumber) {\n            maxNumber = number;\n          }\n        }\n      });\n\n      // 如果未找到匹配的字符串，返回 null 或 -1 等\n      return maxNumber;\n    },\n\n    buildTree(selections: Selection[], types: string[], paths: number[][]) {\n      const rootNodes: TreeNode[] = [];\n\n      const insertNode = (parent: TreeNode, child: TreeNode): boolean => {\n        if (!parent.children) {\n          parent.children = [];\n        }\n        // 检查子节点是否已经包含了当前节点\n        for (const existingChild of parent.children) {\n          if (this.isRectanglesContained(existingChild.selection, child.selection)) {\n            return insertNode(existingChild, child);\n          }\n        }\n        // 如果没有包含的子节点，将其添加为直接子节点\n        parent.children.push(child);\n        return true;\n      }\n\n      for (let i = 0; i < selections.length; i++) {\n        const selection = selections[i];\n        const newNode: TreeNode = { type: types[i], selection, path: paths[i] };\n\n        let added = false;\n        for (const rootNode of rootNodes) {\n          if (this.isRectanglesContained(rootNode.selection, selection)) {\n            added = insertNode(rootNode, newNode);\n            break;\n          }\n        }\n\n        if (!added) {\n          rootNodes.push(newNode);\n        }\n      }\n      const specs: TableCanoniserTemplate[] = [];\n      const addedSpec: [any] = [null];\n      this.traverseTree4buildSpecs(rootNodes, specs, [0, 0, this.input_tbl.tbl.length - 1, this.input_tbl.tbl[0].length - 1], addedSpec);\n      return { rootNodes, specs, newSpec: addedSpec[0] };\n    },\n\n    traverseTree4buildSpecs(nodes: TreeNode[], specs: TableCanoniserTemplate[], pSelection: Selection, addedSpec: [any]) {\n      const px = pSelection[1], py = pSelection[0];\n      const pw = pSelection[3] - px + 1, ph = pSelection[2] - py + 1;\n      nodes.forEach((node) => {\n\n        const newSpec: TableCanoniserTemplate = {};\n        const { selection, type } = node;\n\n        if (node.path.length > 0) {\n          const targetNode = this.getNodebyPath(this.spec.rawSpecs, node.path);\n          this.copyAttributes(targetNode!, newSpec, ['match', 'extract', 'fill']);\n        } else {\n\n          const [startRow, startCol, endRow, endCol] = selection;\n          const width = endCol - startCol + 1;\n          const height = endRow - startRow + 1;\n          const traverse = nodes.length > 1 ? {} : {\n            xDirection: pw >= 2 * width ? 'after' as const : undefined,\n            yDirection: ph >= 2 * height ? 'after' as const : undefined\n          }\n\n          newSpec.match = {\n            startCell: { offsetX: startCol - px, offsetY: startRow - py },\n            size: { width, height },\n            traverse\n          }\n\n          const maxCNum = this.findMaxCNumber() + 1;\n\n          switch (type) {\n            case \"position\":\n              newSpec.extract = {\n                // byPositionToTargetCols: Array.from({ length: width * height }, (_, _i) => `C${++colCount}`)\n                byPositionToTargetCols: Array.from({ length: width * height }, (_, i) => `C${maxCNum + i}`)\n              }\n              break;\n            case \"context\":\n              newSpec.extract = {\n                byContext: {\n                  position: 'above'\n                }\n              }\n              break;\n            case \"value\":\n              const createExtract = () => {\n                return eval(`currentAreaTbl => {\n                  // Please replace the default code with the necessary implementation to complete the function.\n                  return currentAreaTbl.flat().map((cell, i) => 'C' + (${maxCNum} + i))\n                  }`)\n              }\n              newSpec.extract = {\n                byValue: createExtract()\n              }\n              break;\n            // case \"null\": \n            // default:\n            //   break;\n          }\n          addedSpec[0] = newSpec;\n        }\n\n        if (node.children) {\n          newSpec.children = [];\n          this.traverseTree4buildSpecs(node.children, newSpec.children, selection, addedSpec);\n        }\n        specs.push(newSpec);\n      })\n    },\n\n\n\n    highlightNodes(selected: Selection[]) {\n      const highlightNodesId: Set<number> = new Set();\n      selected.forEach(range => {\n        const y = range[0];\n        const x = range[1];\n        const height = range[2] - range[0] + 1;\n        const width = range[3] - range[1] + 1;\n\n        const rect1: AreaBox = { x, y, width, height };\n\n        for (let keyArea in this.input_tbl.in2nodes) {\n          const [x, y, width, height] = keyArea.split('-').map((n) => Number(n));\n          // console.log(rect1, keyArea, this.doRectanglesIntersect(rect1, { x, y, width, height }));\n          if (this.doRectanglesIntersect(rect1, { x, y, width, height })) {\n            this.input_tbl.in2nodes[keyArea].forEach((id) => {\n              highlightNodesId.add(id);\n            })\n          }\n        }\n      });\n      d3.selectAll('.type-node').classed('selection', false);\n      for (let id of highlightNodesId) {\n        // console.log(`.type-node.node-rect-${id}`);\n        d3.select(`.type-node.node-rect-${id}`).classed(\"selection\", true);\n      }\n      return highlightNodesId;\n    },\n\n    highlightTblTemplate(areas: AreaBox[]) {\n      try {\n        const highlight = this.tree.tblVisHighlight!;  // .tbl-container .tbl-template-highlight\n        const tblVisInfo = this.tree.tblVisInfo!;\n\n        areas.forEach((area) => {\n          if (area.x === undefined || area.y === undefined || area.width === undefined || area.height === undefined) {\n            return\n          }\n          highlight.raise().append('rect')\n            .attr('x', (area.x - tblVisInfo.x) * tblVisInfo.width)\n            .attr('y', (area.y - tblVisInfo.y) * tblVisInfo.height)\n            .attr('width', area.width * tblVisInfo.width)\n            .attr('height', area.height * tblVisInfo.height)\n            .attr('fill', 'none')\n            .attr('stroke', typeMapColor.selection)\n            .attr('stroke-width', 3)\n            .attr(\"stroke-dasharray\", area.isDefinedFromSpec ? \"0\" : \"6,6\");\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    highlightTblPatternConstr() {\n      const clickNode = this.tree.clickNode;\n      const nodeConstrId = this.tree.clickConstrIndex;\n      if (clickNode !== null) {\n        if (nodeConstrId === -1) {\n          this.highlightTblTemplate(clickNode.data.currentMatchs!);\n        } else {\n          const cellInfo = clickNode.data.constrsInfo![nodeConstrId].map((ele, index) => ({ ele, index })).filter(info => info.ele.instIndex === this.tree.instanceIndex);\n          if (cellInfo === undefined) return;\n          this.highlightTblTemplate(cellInfo.map((info) => {\n            return {\n              x: info.ele.x,\n              y: info.ele.y,\n              width: 1,\n              height: 1,\n              isDefinedFromSpec: info.ele.isDefinedFromSpec\n            }\n          }));\n        }\n      }\n    },\n\n    /*\n    highlightNodes(selected: Selection[]) {\n      const highlightNodesId: Set<number> = new Set();\n      selected.forEach(range => {\n        let startRow = range[0] < 0 ? 0 : range[0];\n        let startCol = range[1] < 0 ? 0 : range[1];\n        let endRow = range[2];\n        let endCol = range[3];\n    \n        // 遍历行\n        for (let row = startRow; row <= endRow; row++) {\n          // 遍历列\n          for (let col = startCol; col <= endCol; col++) {\n            // 遍历 visTree\n            const nodes = JSON.parse(JSON.stringify(this.spec.visTree.children!));\n            while (nodes.length) {\n              const node = nodes.shift()\n              if (!node) continue;\n              console.log(row, col, node.y, node.height, node.x, node.width);\n              if (row >= node.y && row < node.y + node.height && col >= node.x && col < node.x + node.width) {\n                highlightNodesId.add(node.id);\n              }\n              if (node.children) nodes.push(...node.children);\n            }\n          }\n        }\n      })\n      d3.selectAll('.type-node').classed('selection', false);\n      for (let id of highlightNodesId) {\n        console.log(`.type-node.node-rect-${id}`);\n        d3.select(`.type-node.node-rect-${id}`).classed(\"selection\", true);\n      }\n    },\n    */\n\n    getHightlightedCells(selected: Selection[], className: string = \"selection\") {\n      let selectedCoords: { [key: string]: [number, number][] } = {};\n      let hightedCells: { row: number, col: number, className: string }[] = [];\n      // 遍历选定区域\n      selected.forEach(range => {\n        const startRow = range[0];\n        const startCol = range[1];\n        const endRow = range[2];\n        const endCol = range[3];\n\n        selectedCoords[range.toString()] = [];\n        // 遍历行\n        for (let row = startRow; row <= endRow; row++) {\n          // 遍历列\n          for (let col = startCol; col <= endCol; col++) {\n            // 将坐标添加到数组中\n            selectedCoords[range.toString()].push([row, col]);\n            hightedCells.push({ row, col, className });\n          }\n        }\n      });\n      return { selectedCoords, hightedCells };\n    },\n\n    grid_cell_click(cell: TblCell, className: string = \"selection\") {\n      const cells: TblCell[] = [{ ...cell, className }];\n      this.highlightTblCells(\"input_tbl\", cells);\n      const outTblCells = this.in_out_mapping({ \"0\": [[cell.row, cell.col]] }, \"input_tbl\", className);\n      this.highlightTblCells(\"output_tbl\", outTblCells);\n    },\n\n    startPoint(points: [number, number][]) {\n      let topLeft = points[0];\n      const rows = new Set([topLeft[0]]);\n      const cols = new Set([topLeft[1]]);\n\n      for (let i = 1; i < points.length; i++) {\n        let current = points[i];\n        rows.add(current[0]);\n        cols.add(current[1]);\n        if (\n          current[0] < topLeft[0] ||\n          (current[0] === topLeft[0] && current[1] < topLeft[1])\n        ) {\n          topLeft = current;\n        }\n      }\n\n      return {\n        topLeft,\n        rowSize: rows.size,\n        colSize: cols.size,\n      };\n    },\n\n    prepareDataAfterCodeChange() {\n      const codeFormat = \"Example format:\\n\" + this.editor.mappingSpec.codePref + \"[\\n  // Please write the specification here\\n];\"\n      try {\n        // Step 1: update specs, including rawSpecs and visTree\n        // let code = this.editor.mappingSpec.instance!.getValue();\n        let code = this.editor.mappingSpec.code;\n        if (code.trim() === \"\") {\n          // message.error(\"Empty code!\\nPlease provide your code input. \" + codeFormat);\n          message.error(\"Empty code!\\nDefault code content has been filled in the code panel.\");\n          this.editor.mappingSpec.code = this.editor.mappingSpec.codePref + \"[\\n  // Please write the specification here\\n];\"\n          return false;\n        };\n        code += this.editor.mappingSpec.codeSuff;\n        const result = ts.transpileModule(code, {\n          compilerOptions: {\n            target: ts.ScriptTarget.ES2015,\n            module: ts.ModuleKind.CommonJS\n          }\n        })\n        // console.log(result.outputText);\n        // const specification: TableCanoniserTemplate = eval(code);\n        const evalFunction = new Function('TableCanoniserKeyWords', result.outputText);\n        const specs: TableCanoniserTemplate[] = evalFunction(TableCanoniserKeyWords);\n        if (Array.isArray(specs) === false) {\n          message.error(\"Invalid code!\\nPlease provide your code input. \" + codeFormat);\n          return false;\n        }\n        this.spec.rawSpecs = specs;\n        this.spec.visTree.children = JSON.parse(JSON.stringify(specs, (key, value) => typeof value === 'function' ? 'function' : value)); // cloneDeep(specs);\n        // this.spec.visTree.children!.forEach((spec) => {\n        //   if (!spec.hasOwnProperty('children')) {\n        //     spec.children = [];\n        //   }\n        // })\n\n\n        // Step 2: highlightCode\n        // if (this.editor.mappingSpec.highlightCode) {\n        //   console.log('prepareDataAfterCodeChange-highlightCode', this.editor.mappingSpec.highlightCode);\n        //   this.highlightCode(...this.editor.mappingSpec.highlightCode);\n        //   this.editor.mappingSpec.highlightCode = null;\n        // }\n\n        // Step 3: update visTree's AreaBox properties\n        // const { rootArea } = transformTable(this.input_tbl.tbl, this.spec.rawSpecs, false);\n        // console.log(rootArea);\n        // console.log(rootArea, this.spec.visTree, this.spec.rawSpecs, this.input_tbl.tbl[0]);\n        // this.copyTreeAttributes(rootArea, this.spec.visTree);\n        // console.log(rootArea, this.spec.visTree);\n\n        // Step 4: update in2nodes\n        /*\n        this.input_tbl.in2nodes = {};\n        this.spec.selectAreaFromLegend = []\n        this.spec.selectionsAreaFromLegend = []\n        this.spec.selectionsPath = []\n        this.traverseTree4UpdateIn2Nodes(this.spec.visTree.children!);*/\n        return true\n      }\n      catch (e: any) {\n        if (e.message.includes(\"option\")) {\n          message.error(e + \"\\n\" + codeFormat);\n        }\n        else message.error(`${langConfig[lang].store.failedParse}\\n ${e}`);\n        return false;\n      }\n    },\n\n    numberToOrdinal(num: number) {\n      let suffix = \"th\";\n\n      if (num % 100 >= 11 && num % 100 <= 13) {\n        suffix = \"th\";\n      } else {\n        switch (num % 10) {\n          case 1:\n            suffix = \"st\";\n            break;\n          case 2:\n            suffix = \"nd\";\n            break;\n          case 3:\n            suffix = \"rd\";\n            break;\n        }\n      }\n\n      return num + suffix;\n    },\n\n    checkGrammarError() {\n      const markers = monaco.editor.getModelMarkers({});\n      if (markers.length > 0) {\n        markers.forEach((marker) => {\n          if (marker.code != \"6133\") {\n            // \"‘<name>’ is declared but its value is never read\" 错误不会被提示\n            this.editor.mappingSpec.errorMark = marker;\n            return\n          }\n        })\n      } else {\n        this.editor.mappingSpec.errorMark = null\n      }\n    },\n\n    transformTablebyCode() {\n      if (this.editor.mappingSpec.errorMark !== null) {\n        const marker = this.editor.mappingSpec.errorMark;\n        message.error(lang === 'en' ? `Invalid syntax at Line ${marker.startLineNumber}, Column ${marker.startColumn}:\\n ${marker.message}` : `语法错误（第${marker.startLineNumber}行，第${marker.startColumn}列）：\\n${marker.message}`);\n        return false;\n      }\n      let messageContent = ''\n      try {\n        const specs = this.spec.rawSpecs;\n        // this.stringifySpec(); // 更新(格式化) editor.mappingSpec.code\n        this.spec.visTreeMatchPath = {};\n        const tidyData = this.transformTblUpdateRootArea(specs);\n        this.initTblInfo(false);\n        // this.tree.visInst?.render();\n\n        this.spec.matchedInstNum = 0;\n        this.spec.visTree.children?.forEach((spec, index) => {\n          if (index) messageContent += '\\n';\n          else if (spec.matchs) {\n            this.spec.matchedInstNum = spec.matchs.length;\n          }\n          if (spec.matchs) {\n            if (spec.matchs.length > 1) {\n              messageContent += `${langConfig[lang].store.for} ${this.numberToOrdinal(index + 1)} ${langConfig[lang].store.template} ${spec.matchs.length} ${langConfig[lang].store.matched}`\n            } else if (spec.matchs.length === 1) {\n              messageContent += `${langConfig[lang].store.for} ${this.numberToOrdinal(index + 1)} ${langConfig[lang].store.template} ${langConfig[lang].store.oneMatch}`\n            } else {\n              messageContent += `${langConfig[lang].store.for} ${this.numberToOrdinal(index + 1)} ${langConfig[lang].store.template} ${langConfig[lang].store.noMatch}`\n            }\n          } else {\n            messageContent += `${langConfig[lang].store.for} ${this.numberToOrdinal(index + 1)} ${langConfig[lang].store.template} ${langConfig[lang].store.noMatch}`\n          }\n        })\n\n        if (Object.keys(tidyData).length === 0) {\n          if (messageContent) messageContent += '\\n';\n          messageContent += langConfig[lang].store.emptyTable;\n          // this.tree.instanceIndex = -1;\n          // return;\n        }\n        message.info(messageContent)\n\n        // 将tidyData转换为output_tbl.tbl，注意数据格式\n        this.derivePosiMapping(tidyData);\n        // console.log(this.output_tbl.tbl, this.output_tbl.cols);\n        this.output_tbl.instance.updateData(this.output_tbl.tbl);\n        this.output_tbl.instance.updateSettings({ colHeaders: this.output_tbl.cols });\n        // this.output_tbl.instance.render();\n\n        // this.tree.minimapInstHighlight!.select('rect:nth-child(1)').attr('stroke', typeMapColor.selection);\n        this.highlightMinimapInsts();\n        return true\n      } catch (e) {\n        if (e instanceof CustomError) {\n          messageContent = `${langConfig[lang].store.failedTransform}\\n ${e}`\n        } else {\n          messageContent = `${langConfig[lang].store.failedParse}\\n ${e}`\n        }\n        message.error(messageContent);\n        console.error(e);\n        return false\n      }\n    },\n\n    derivePosiMapping(outTbl: { [key: string]: CellInfo[] }) {\n      const cols = Object.keys(outTbl);\n      this.output_tbl.cols = cols;\n      // const numRows = outTbl[cols[0]].length;\n      const numRows = Math.max(...cols.map(col => outTbl[col].length));\n\n      // Create the in_out mapping\n      for (let i = 0; i < numRows; i++) {\n        const row: CellValueType[] = [];\n        // this.output_tbl.out2in.rows.push([]);\n        for (let j = 0; j < cols.length; j++) {\n          const col = cols[j];\n          let cell: CellInfo;\n          if (outTbl[col].length <= i) {\n            cell = { x: -1, y: -1, value: undefined };\n          } else {\n            cell = outTbl[col][i];\n          }\n          row.push(cell.value);\n          let inPosi = `[${cell.y},${cell.x}]`;\n          const outPosi = `[${i},${j}]`;\n          // console.log(inPosi, outPosi);\n          if (cell.x < 0 || cell.y < 0) {\n            inPosi = '';\n          } else {\n            if (this.input_tbl.in2out.hasOwnProperty(inPosi)) {\n              this.input_tbl.in2out[inPosi].push(outPosi);\n            } else {\n              this.input_tbl.in2out[inPosi] = [outPosi];\n            }\n          }\n\n          if (this.output_tbl.out2in.hasOwnProperty(outPosi)) {\n            this.output_tbl.out2in[outPosi].push(inPosi);\n          } else {\n            this.output_tbl.out2in[outPosi] = [inPosi];\n          }\n        }\n        this.output_tbl.tbl.push(row);\n      }\n    },\n\n    generateGrid(rows: number, cols: number): TblPatternGrid[] {\n      const grid: TblPatternGrid[] = [];\n      for (let i = 0; i < rows; i++) {\n        for (let j = 0; j < cols; j++) {\n          grid.push({ row: i, col: j });\n        }\n      }\n      return grid;\n    },\n\n    computeTblPatternGrid() {\n      // const firstNode: VisTreeNode = JSON.parse(JSON.stringify(this.spec.visTree.children![0], function (key, value) {\n      //   if (key === 'currentAreas') return undefined;\n      //   return value;\n      // }));\n      // const firstNode: VisTreeNode = JSON.parse(JSON.stringify(this.spec.visTree.children![0]));\n      const firstNode = this.spec.visTree.children![0];\n\n      const grids = this.generateGrid(firstNode.height, firstNode.width);\n      const nodes = [firstNode];\n      // const box: AreaBox = { width: firstNode.width, height: firstNode.height, x: firstNode.x, y: firstNode.y };\n      // const box: AreaBox = (({ width, height, x, y }) => ({ width, height, x, y }))(firstNode); // { ...firstNode };\n      const box: Selection = [firstNode.x, firstNode.y, firstNode.x + firstNode.width, firstNode.y + firstNode.height];\n\n      while (nodes.length) {\n        const node = nodes.shift() as VisTreeNode;\n        if (node.currentMatchs === undefined) continue;  // change matchs to currentMatchs\n        for (const match of node.currentMatchs) {\n          const { x, y, width, height } = match;\n          const offsetX = x - box[0];\n          const offsetY = y - box[1];\n\n          if (!(offsetX >= 0 && offsetY >= 0 && x + width <= box[2] && y + height <= box[3])) continue;\n\n          let bgColor: TypeColor = node.type!;\n          let textColor: TypeColor = \"cellFill\";\n          if (bgColor !== 'position') {\n            textColor = \"ambiguousText\"\n          }\n          // if (!(x === node.x && y === node.y && width === node.width && height === node.height)) {\n          if (node.path!.length > 1 && match.isDefinedFromSpec === false) {\n            bgColor += \"Shallow\";\n          }\n          for (let i = 0; i < height; i++) {\n            for (let j = 0; j < width; j++) {\n              const cell = grids[(offsetY + i) * firstNode.width + (offsetX + j)]\n              cell.bgColor = bgColor; // typeMapColor[bgColor as TypeColor];\n              cell.text = new Set();\n              cell.textColor = textColor; // typeMapColor[textColor];\n              if (this.input_tbl.in2out.hasOwnProperty(`[${y + i},${x + j}]`)) {\n                const outPosi = this.input_tbl.in2out[`[${y + i},${x + j}]`];\n                outPosi.forEach(posi => {\n                  const [outY, outX] = JSON.parse(posi);\n                  cell.text.add(this.output_tbl.cols[outX]);\n                })\n              }\n              cell.text = Array.from(cell.text);\n            }\n          }\n        }\n        if (node.children && node.children.length) nodes.push(...node.children);\n      }\n\n      return grids; // { grids, box: (({ width, height, x, y }) => ({ width, height, x, y }))(firstNode) };\n    },\n\n    initTblInfo(inputFlag = true) {\n      if (inputFlag) {\n        this.input_tbl.tbl = []\n        this.input_tbl.instance.updateData(this.input_tbl.tbl);\n      }\n\n      this.input_tbl.in2out = {};\n\n      this.output_tbl.tbl = [];\n      this.output_tbl.cols = [];\n      this.output_tbl.out2in = {};\n      this.output_tbl.instance.updateData(this.output_tbl.tbl);\n      this.output_tbl.instance.updateSettings({ colHeaders: this.output_tbl.cols });\n    },\n\n    deleteChildByPath(nodes: TreeNode[], path: number[], constrIndex: number = -1) {\n      if (path.length === 0) {\n        // 如果路径为空，不做任何处理\n        return;\n      }\n\n      if (constrIndex !== -1) {\n        // 说明删除的是约束\n        const currentNode = this.getNodebyPath(nodes, path) as TableCanoniserTemplate;\n        if (currentNode) {\n          currentNode.match!.constraints!.splice(constrIndex, 1);\n          if (currentNode.match!.constraints!.length === 0) {\n            delete currentNode.match!.constraints;\n          }\n        }\n        return\n      }\n\n      // 获取目标节点的父节点\n      const parentPath = path.slice(0, -1);\n      const lastIndex = path[path.length - 1];\n\n      if (parentPath.length === 0) {\n        // 如果父路径为空，说明父节点是根节点\n        nodes.splice(lastIndex, 1);\n        return;\n      }\n\n      const parentNode = this.getNodebyPath(nodes, parentPath);\n\n      // 删除目标节点\n      if (parentNode && parentNode.children) {\n        parentNode.children.splice(lastIndex, 1);\n        // 如果父节点的子节点删除后为空数组，则删除children属性\n        if (parentNode.children.length === 0) {\n          delete parentNode.children;\n        }\n      }\n    },\n\n    getNodebyPath(nodes: TreeNode[], path: number[]) {\n      return getNodebyPath(nodes, path);\n      if (path.length === 0) return null; // 如果路径为空，返回null\n\n      let currentNodes = nodes\n      for (let i = 0; i < path.length; i++) {\n        const index = path[i];\n        // 确保路径下的节点存在\n        if (!currentNodes[index]) {\n          return null; // 或者抛出错误\n        }\n        // 如果是最后一个路径元素，返回目标节点\n        if (i === path.length - 1) {\n          return currentNodes[index];\n        }\n        // 更新当前节点为子节点\n        currentNodes = currentNodes[index].children || [];\n      }\n      // 如果路径遍历完仍然没有找到目标节点，返回 null\n      return null;\n    },\n\n    /**\n     * 默认根据rawSpecs更新editor.mappingSpec.code\n     */\n    stringifySpec(specs: any = null, replaceSpace: \"even\" | \"all\" = \"even\", replaceCode = true) {\n      let fnList: string[] = [];\n      if (specs === null) specs = this.spec.rawSpecs;\n      let strSpec = JSON.stringify(specs, replacer, 2);\n      fnList.forEach((fn) => {\n        strSpec = strSpec.replace(`\"$TableCanoniser$\"`, fn);\n      })\n\n      // 正则表达式匹配 JSON 对象中的键（包括可能的空白字符和引号）\n      const removeQuotesFromKeysRegex = /\"(\\w+)\":/g;\n      strSpec = strSpec.replace(removeQuotesFromKeysRegex, '$1:');\n\n      const replaceTableCanoniserKeyWordsRegex = /\"TableCanoniserKeyWords\\.(\\w+)\"/g;\n      strSpec = strSpec.replace(replaceTableCanoniserKeyWordsRegex, 'TableCanoniserKeyWords.$1');\n\n      if (replaceSpace === \"all\") {\n        strSpec = removeSpaceType.all(strSpec);\n      }\n\n      if (replaceCode) {\n        if (this.editor.mappingSpec.triggerCodeChange) {\n          this.spec.undoHistory.push(this.editor.mappingSpec.code);\n          // 当执行新的操作时，重做历史应当清空\n          this.spec.redoHistory = [];\n        }\n        this.editor.mappingSpec.code = this.editor.mappingSpec.codePref + strSpec;\n        // this.editor.mappingSpec.instance?.setValue(this.editor.mappingSpec.code);\n        // this.editor.mappingSpecinstance?.getAction('editor.action.formatDocument')?.run();\n        // this.editor.mappingSpec.instance?.trigger('editor', 'editor.action.formatDocument', null);\n      }\n\n      function replacer(key: string, value: any) {\n        if (typeof value === 'function') {\n          fnList.push(removeSpaceType[replaceSpace](value.toString()));\n          return \"$TableCanoniser$\" // value.toString(); // 将函数转化为字符串\n        }\n        return value;\n      }\n\n      return strSpec;\n    },\n\n    selectArea() {\n      const visNode = this.spec.selectNode!.data;\n      const formData = this.spec.areaFormData\n      const newSpec: TableCanoniserTemplate = {\n        match: {\n          startCell: {\n            offsetLayer: formData.offsetLayer,\n            offsetFrom: formData.offsetFrom,\n            offsetX: formData.position.x,\n            offsetY: formData.position.y,\n          },\n          size: {\n            width: formData.size.width,\n            height: formData.size.height,\n          },\n          traverse: {\n            xDirection: formData.traverse.xDirection,\n            yDirection: formData.traverse.yDirection,\n          }\n        }\n      }\n      if (visNode.path!.length === 0) {\n        // 当前节点为根节点\n        this.spec.rawSpecs.push(newSpec);\n      } else {\n        const currentSpec = this.getNodebyPath(this.spec.rawSpecs, visNode.path!);\n        if (currentSpec === null) {\n          message.error(\"The node path is invalid\");\n          return;\n        }\n        if (currentSpec.hasOwnProperty('children') && currentSpec.children != undefined) {\n          currentSpec.children.push(newSpec)\n        } else {\n          currentSpec.children = [newSpec];\n        }\n      }\n      this.stringifySpec();\n    },\n\n    insertNodeOrPropertyIntoSpecs(nodeOrProperty: any, property: \"children\" | \"match\" | \"constraints\" | \"extract\", visNode: VisTreeNode | null = null) {\n      if (visNode === null) {\n        visNode = this.spec.selectNode!.data;\n      }\n      if (visNode.path!.length === 0) {\n        // 当前节点为根节点\n        this.spec.rawSpecs.push(nodeOrProperty);\n      } else {\n        const currentSpec = this.getNodebyPath(this.spec.rawSpecs, visNode.path!);\n        if (currentSpec === null) {\n          message.error(langConfig[lang].store.invalidPath);\n          return;\n        }\n        switch (property) {\n          case \"children\":\n            if (currentSpec.hasOwnProperty('children') && currentSpec.children != undefined) {\n              currentSpec.children.push(nodeOrProperty);\n            } else {\n              currentSpec.children = [nodeOrProperty];\n            }\n            break;\n          case \"match\":\n            if (currentSpec.hasOwnProperty('match') && currentSpec.match != undefined) {\n              Object.assign(currentSpec.match, nodeOrProperty);\n            } else {\n              currentSpec.match = nodeOrProperty;\n            }\n            break;\n          case \"constraints\":\n            if (currentSpec.hasOwnProperty('match') && currentSpec.match != undefined) {\n              if (currentSpec.match.hasOwnProperty('constraints') && currentSpec.match.constraints != undefined) {\n                currentSpec.match.constraints.push(nodeOrProperty);\n              } else {\n                currentSpec.match.constraints = [nodeOrProperty];\n              }\n            } else {\n              currentSpec.match = {\n                constraints: [nodeOrProperty]\n              };\n            }\n            break;\n          case \"extract\":\n            currentSpec.extract = nodeOrProperty;\n            break;\n        }\n      }\n      this.stringifySpec();\n    },\n\n\n    // 复制属性的函数\n    copyAttributes(source: TreeNode, target: TreeNode, attributes: string[]) {\n      for (const attr of attributes) {\n        if (source.hasOwnProperty(attr)) {\n          target[attr] = source[attr];\n        }\n      }\n    },\n\n    // 递归遍历树并复制属性\n    copyTreeAttributes(tree1: TreeNode, tree2: TreeNode, attributes = ['width', 'height', 'x', 'y']) {\n      this.copyAttributes(tree1, tree2, attributes);\n\n      if (tree1.children && tree2.children) {\n        // if (tree1.children.length > tree2.children.length) {\n        //   console.log(tree1.children);\n        //   console.log(tree2.children);\n        // }\n        for (let i = 0; i < tree1.children.length; i++) {\n          // console.log(tree1.children[i], tree2.children[i]);\n          this.copyTreeAttributes(tree1.children[i], tree2.children[i], attributes);\n        }\n      }\n    },\n\n    getHighlightCodeStartEndLine(sonData: any, sonParentData: any = null, rootData: any = null): [number, number] {\n      if (rootData === null) {\n        rootData = this.spec.rawSpecs\n      }\n      const rootStr = this.stringifySpec(rootData, \"all\", false)\n      const sonStr = this.stringifySpec(sonData, \"all\", false)\n\n      if (sonParentData === null) {\n        const startIndex = rootStr.indexOf(sonStr);\n        const strBefore = rootStr.slice(0, startIndex);\n        const startLine = (strBefore.match(/\\n/g) || []).length + 1;\n        const endLine = startLine + (sonStr.match(/\\n/g) || []).length;\n        return [startLine, endLine]\n      } else {\n        const [startParentLine, _] = this.getHighlightCodeStartEndLine(sonParentData);\n        const [startConstLine, endConstLine] = this.getHighlightCodeStartEndLine(sonData, null, sonParentData);\n        const startLine = startParentLine + startConstLine - 1;\n        const endLine = startParentLine + endConstLine - 1;\n        return [startLine, endLine]\n      }\n    },\n\n    highlightCode(startLine: number, endLine: number = startLine, className: string = \"nullShallow\") {\n      const editor = this.editor.mappingSpec.instance\n      const decorationsCollection = this.editor.mappingSpec.decorations\n      if (editor && decorationsCollection) {\n        const range = new monaco.Range(startLine, 1, endLine, 1);\n        const newDecorations: monaco.editor.IModelDeltaDecoration[] = [\n          {\n            range,\n            options: {\n              isWholeLine: true,\n              className: className  // 'myLineDecoration',\n            },\n          },\n        ];\n        // 更新装饰集合\n        decorationsCollection.set(newDecorations);\n        // editor.revealLineInCenter(startLine);\n        // editor.revealLineNearTop(startLine);\n        // editor.revealRangeNearTopIfOutsideViewport(range);\n        // editor.setSelection(range);  // 选择范围\n        editor.revealRangeAtTop(range);\n      }\n    },\n    computeColInfo(tblType: 'input_tbl' | 'output_tbl' = 'input_tbl') {\n      const table = this[tblType].tbl;\n      this[tblType].colInfo = [];\n      if (table.length === 0) {\n        if (tblType === 'input_tbl') {\n          this.spec.visTree.width = 0;\n          this.spec.visTree.height = 0;\n        }\n        return;\n      }\n      const hot = this[tblType].instance;\n      const colCount = table[0].length;\n\n      if (tblType === 'input_tbl') {\n        this.spec.visTree.width = colCount;\n        this.spec.visTree.height = table.length;\n      }\n\n      for (let col = 0; col < colCount; col++) {\n        const colInfo: ColInfo = {\n          index: col,\n          width: hot.getColWidth(col),\n          string: [],\n          number: [],\n          none: []\n        };\n\n        if (colInfo.width === null) colInfo.width = 60; // truncated 中 min-width 为 60\n\n        for (let row = 0; row < table.length; row++) {\n          const cell = table[row][col];\n          const type = this.getCellDataType(cell);\n          switch (type) {\n            case TableCanoniserKeyWords.String:\n              colInfo.string.push(row);\n              break;\n            case TableCanoniserKeyWords.Number:\n              colInfo.number.push(row);\n              break;\n            case TableCanoniserKeyWords.None:\n              colInfo.none.push(row);\n              break;\n          }\n        }\n        this[tblType].colInfo.push(colInfo);\n      }\n    },\n\n    getCellDataType(value: CellValueType) {\n      if (value === '' || value === null || value === undefined) {\n        return TableCanoniserKeyWords.None;\n      }\n      if (!isNaN(Number(value))) {\n        return TableCanoniserKeyWords.Number;\n      }\n      if (typeof value === 'string') {\n        return TableCanoniserKeyWords.String;\n      }\n      return TableCanoniserKeyWords.NotNone;\n    },\n    clearStatus(type: string) {\n      switch (type) {\n        case \"matchArea\":\n          document.body.style.cursor = 'default';\n          document.documentElement.style.setProperty('--custom-cursor', 'default');\n          d3.selectAll('.legend').classed('legend-selection', false);\n          // this.spec.selectAreaFromLegend = []\n          // this.spec.selectionsAreaFromLegend = []\n          break;\n        case \"tree\":\n          /*\n          const typeNodes = document.querySelectorAll('.type-node');\n          typeNodes.forEach((node) => {\n            (node as HTMLElement).classList.remove('selection');\n          });\n          const constraintRects = document.querySelectorAll('.node-constraint-rect');\n          constraintRects.forEach((rect) => {\n            // (rect as HTMLElement).style.visibility = 'hidden';\n            (rect as HTMLElement).setAttribute('visibility', 'hidden');\n          });\n          */\n          this.spec.constrNodeRectClickId = '';\n          this.tree.clickNode = null;\n          this.tree.clickConstrIndex = -1;\n          d3.select('.tbl-container .tbl-template-highlight').selectAll('rect').remove();\n          d3.selectAll('.type-node').classed('selection', false);\n          d3.selectAll('.node-constraint-rect').attr('visibility', 'hidden');\n          break;\n        case \"miniHighlight\":\n          // this.tree.minimapInstHighlight!.selectAll('rect').remove();\n          // d3.select('path.top-line').attr(\"d\", \"\");\n          // d3.select('path.bottom-line').attr(\"d\", \"\");\n          break\n      }\n    },\n    debounce<T extends (...args: any[]) => void>(func: T, wait: number): (...args: Parameters<T>) => void {\n      let timeout: any = null;\n      return function (...args: Parameters<T>) {\n        if (timeout) clearTimeout(timeout);\n        timeout = setTimeout(() => {\n          func(...args);\n        }, wait);\n      };\n    }\n  },\n  // computed\n  getters: {}\n})\n\n\nexport type TableStore = ReturnType<typeof useTableStore>;","const lastEl = {\n  ele: undefined as HTMLElement | undefined,\n  width: 0,\n  height: 0,\n  flex: 1\n}\nconst nextEl = {\n  ele: undefined as HTMLElement | undefined,\n  width: 0,\n  height: 0,\n  flex: 1\n}\nlet flexSum = 0;\nlet startX: number;\nlet startY: number;\nlet dragging: \"\" | \"width\" | \"height\" = \"\";\n\nfunction getNeighborEls(e: MouseEvent, draggingType: \"\" | \"width\" | \"height\") {\n  const dividerEl = e.target as HTMLElement;\n  const siblingElements = Array.from(dividerEl.parentElement!.children) as HTMLElement[];\n  const currentIndex = siblingElements.indexOf(dividerEl);\n  lastEl.ele = siblingElements[currentIndex - 1];\n  lastEl.width = lastEl.ele.getBoundingClientRect().width;\n  lastEl.height = lastEl.ele.getBoundingClientRect().height;\n  lastEl.flex = parseFloat(lastEl.ele.style.flex || \"1\");\n  nextEl.ele = siblingElements[currentIndex + 1];\n  nextEl.width = nextEl.ele.getBoundingClientRect().width;\n  nextEl.height = nextEl.ele.getBoundingClientRect().height;\n  nextEl.flex = parseFloat(nextEl.ele.style.flex || \"1\");\n\n  flexSum = lastEl.flex + nextEl.flex;\n  dragging = draggingType;\n  startX = e.clientX;\n  startY = e.clientY;\n}\n\n\nfunction onDrag(e: MouseEvent) {\n\n  if (!dragging || lastEl.ele === undefined || nextEl.ele === undefined) {\n    return;\n  }\n\n  const move = dragging === \"width\" ? e.clientX - startX : e.clientY - startY;\n  const newLastW_H = lastEl[dragging] + move;\n  const newNextW_H = nextEl[dragging] - move;\n  const newLastRate = newLastW_H / (lastEl[dragging] + nextEl[dragging]);\n  const newNextRate = newNextW_H / (lastEl[dragging] + nextEl[dragging]);\n\n  const newLastFlex = newLastRate * flexSum;\n  const newNextFlex = newNextRate * flexSum;\n\n  lastEl.ele.style.flex = `${newLastFlex}`;\n  nextEl.ele.style.flex = `${newNextFlex}`;\n}\n\nfunction endDrag() {\n  dragging = \"\";\n}\n\nexport { getNeighborEls, onDrag, endDrag }","/* eslint-disable no-param-reassign */\nimport * as d3 from 'd3';\n// import { useTableStore } from '@/store/table';  // 不能在还没有激活pinia store前就使用，可以传参进来\n\nimport {\n  typeMapColor, TypeColor,\n  typeNodeStyle,\n  nodeTextStyle,\n} from './style';\nimport {\n  Point, RectDef, KV,\n} from './types';\nimport letterAspectRatio from './letterAspectRatio';\nimport { VisTreeNode, TableStore, Selection } from \"@/store/table\";\nimport { CellConstraint, TableCanoniserKeyWords } from '@/table-canoniser/dist/grammar';\n\nimport { lang, langConfig } from \"@/utils/lang\";\n\n\nexport type NodeData = {\n  [key: string]: any,\n  children: NodeData[],\n  parent: NodeData | null,\n  data: VisTreeNode\n}\n\n/** 创建一个新的Escape键盘事件，指定事件类型和相关参数 */\nconst escapeEvent = new KeyboardEvent('keydown', {\n  key: 'Escape',\n  code: 'Escape',\n  keyCode: 27,\n  charCode: 27,\n  which: 27,\n  bubbles: true,\n  cancelable: true\n});\n\n\nconst getLetterWidth = (\n  letter: string,\n  fontSize: number,\n) => fontSize * (letterAspectRatio[letter as keyof typeof letterAspectRatio] || 1);\n\nconst getTextSize = (text: string, fontSize: number) => {\n  let width = 0;\n  // eslint-disable-next-line prefer-regex-literals\n  const pattern = new RegExp('[\\u4E00-\\u9FFF]+');\n  text.split('')\n    .forEach((letter) => {\n      if (pattern.test(letter)) {\n        // 中文字符\n        width += fontSize;\n      } else {\n        width += getLetterWidth(letter, fontSize);\n      }\n    });\n  return [width, fontSize];\n};\n\nconst fittingString = (input: string, maxWidth: any, fontSize: any) => {\n  const ellipsis = '...';\n  const ellipsisLength = getTextSize(ellipsis, fontSize)[0];\n  let currentWidth = 0;\n  let result = input;\n  // eslint-disable-next-line prefer-regex-literals\n  const pattern = new RegExp('[\\u4E00-\\u9FFF]+');\n  input.split('')\n    .forEach((letter: string, i) => {\n      if (currentWidth > maxWidth - ellipsisLength) {\n        return;\n      }\n      if (pattern.test(letter)) {\n        // Chinese charactors\n        currentWidth += fontSize;\n      } else {\n        // get the width of single letter according to the fontSize\n        currentWidth += getLetterWidth(letter, fontSize);\n      }\n      if (currentWidth > maxWidth - ellipsisLength) {\n        result = `${input.slice(0, i)}${ellipsis}`;\n      }\n    });\n  return result;\n};\n\nfunction diagonal(source: Point, target: Point) {\n  const { x, y } = source;\n  const { x: ex, y: ey } = target;\n\n  const xrvs = ex - x < 0 ? -1 : 1;\n  const yrvs = ey - y < 0 ? -1 : 1;\n\n  const rdef = 15;\n  let r = Math.abs(ex - x) / 2 < rdef ? Math.abs(ex - x) / 2 : rdef;\n\n  r = Math.abs(ey - y) / 2 < r ? Math.abs(ey - y) / 2 : r;\n\n  const h = Math.abs(ey - y) / 2 - r;\n  const w = Math.abs(ex - x) - r * 2;\n  // w=0;\n  const path = `\n      M ${x} ${y}\n      L ${x} ${y + h * yrvs}\n      C  ${x} ${y + h * yrvs + r * yrvs} ${x} ${y + h * yrvs + r * yrvs} ${x + r * xrvs} ${y + h * yrvs + r * yrvs}\n      L ${x + w * xrvs + r * xrvs} ${y + h * yrvs + r * yrvs}\n      C  ${ex}  ${y + h * yrvs + r * yrvs} ${ex}  ${y + h * yrvs + r * yrvs} ${ex} ${ey - h * yrvs}\n      L ${ex} ${ey}\n`;\n  return path;\n}\n\nfunction hdiagonal(source: Point, target: Point) {\n  const { x, y } = source;\n  const { x: ex, y: ey } = target;\n\n  // Values in case of top reversed and left reversed diagonals\n  const xrvs = ex - x < 0 ? -1 : 1;\n  const yrvs = ey - y < 0 ? -1 : 1;\n\n  // Define preferred curve radius\n  const rdef = 15;\n\n  // Reduce curve radius, if source-target x space is smaller\n  let r = Math.abs(ex - x) / 2 < rdef ? Math.abs(ex - x) / 2 : rdef;\n\n  // Further reduce curve radius, is y space is more small\n  r = Math.abs(ey - y) / 2 < r ? Math.abs(ey - y) / 2 : r;\n\n  // Defin width and height of link, excluding radius\n  const h = Math.abs(ey - y) / 2 - r;\n  const w = Math.abs(ex - x) / 2 - r;\n\n  // Build and return custom arc command\n  return `\n      M ${x} ${y}\n      L ${x + w * xrvs} ${y}\n      C ${x + w * xrvs + r * xrvs} ${y}\n        ${x + w * xrvs + r * xrvs} ${y}\n        ${x + w * xrvs + r * xrvs} ${y + r * yrvs}\n      L ${x + w * xrvs + r * xrvs} ${ey - r * yrvs}\n      C ${x + w * xrvs + r * xrvs}  ${ey}\n        ${x + w * xrvs + r * xrvs}  ${ey}\n        ${ex - w * xrvs}  ${ey}\n      L ${ex} ${ey}\n  `;\n}\n\nfunction customRectCorner(rectInfo: RectDef) {\n  const {\n    startx, starty, rectWidth, rectHeight, rounded, radius,\n  } = rectInfo;\n  let path;\n\n  switch (rounded) {\n    case 'left':\n      path = `\n      M${startx + radius},${starty + radius}\n      a${radius},${radius} 0 0 1 ${radius},-${radius}\n      h${rectWidth - radius}\n      v${rectHeight}\n      h${-rectWidth + radius}\n      a${radius},${radius} 0 0 1 -${radius},-${radius}\n      z\n      `;\n      break;\n    case 'right':\n      path = `\n      M${startx},${starty}\n      h${rectWidth - radius}\n      a${radius},${radius} 0 0 1 ${radius},${radius}\n      v${rectHeight - 2 * radius}\n      a${radius},${radius} 0 0 1 ${-radius},${radius}\n      h ${radius - rectWidth}\n      z\n      `;\n      break;\n    case 'top':\n      path = `\n      M${startx},${starty + radius}\n      a${radius},${radius} 0 0 1 ${radius},-${radius}\n      h${rectWidth - 2 * radius}\n      a${radius},${radius} 0 0 1 ${radius},${radius}\n      v${rectHeight - radius}\n      h${-rectWidth}\n      z`;\n      break;\n    case 'bottom':\n      path = `\n      M${startx},${starty}\n      h${rectWidth}\n      v${rectHeight - radius}\n      a${radius},${radius} 0 0 1 ${-radius},${radius}\n      h${-rectWidth + 2 * radius}\n      a${radius},${radius} 0 0 1 -${radius},-${radius}\n      z`;\n      break;\n    case 'all': // 936\n      path = `\n      M${startx},${starty + radius}\n      a${radius},${radius} 0 0 1 ${radius},-${radius}\n      h${rectWidth - 2 * radius}\n      a${radius},${radius} 0 0 1 ${radius},${radius}\n      v${rectHeight - 2 * radius}\n      a${radius},${radius} 0 0 1 ${-radius},${radius}\n      h${-rectWidth + 2 * radius}\n      a${radius},${radius} 0 0 1 -${radius},-${radius}\n      z`;\n      break;\n    default: {\n      path = `\n      M${startx}${starty}\n      h${rectWidth}\n      v${rectHeight}\n      h${-rectWidth}\n      v${-rectHeight}\n      z\n      `;\n      break;\n    }\n  }\n\n  return path;\n}\n\nfunction declareContextMenu(tableStore: TableStore, node: NodeData, constrIndex: number, event: MouseEvent) {\n  event.preventDefault();\n  // event.stopPropagation();\n  // console.log(tableStore, node, constrIndex, event);  // 第一个参数为 this，可以不写\n  event.preventDefault();\n\n  if (node.parent === null) {\n    tableStore.tree.menuList = [tableStore.tree.menuAllList[0]];\n  } else if (constrIndex === -1) {\n    tableStore.tree.menuList = tableStore.tree.menuAllList.slice(0, -1);\n  } else {\n    tableStore.tree.menuList = tableStore.tree.menuAllList.slice(-1);\n    tableStore.spec.selectConstrIndex = constrIndex;\n  }\n  // console.log(\"node\", node);\n  tableStore.spec.selectNode = node;\n  tableStore.tree.contextMenuVisible = true;\n}\n\nexport class TreeChart {\n  svgWidth: number;\n  svgHeight: number;\n  margins: Array<number>;\n  container: string;\n  data: any;\n  zoomLevel: number;\n  resetZoom: any;\n  depth: number;\n  calculated: KV; // SVG画布相关的信息，如宽高、边距、对称中心\n  treeLayout: any; // 用于存放layout配置\n  realChart: any;\n  previousTransform: any;\n  centerG: any;\n  centerX: number;\n  root: any; // 树的根节点及其children\n  allNodes: any; // 用于存放root数据输入layout配置中后生成的位置信息\n  defaultFont: string;\n  duration: number;\n  store: TableStore;\n  orient: 'h' | 'v';\n\n  constructor(\n    _margins: Array<number>,\n    _container: string,\n    _data: any,\n    _store: any,\n    _zoomLevel = 1.0,\n    _orient: 'h' | 'v' = 'h' as const,\n  ) {\n    this.svgWidth = 500;\n    this.svgHeight = 500;\n    this.margins = _margins;\n    this.container = _container;\n    this.zoomLevel = _zoomLevel;\n    this.orient = _orient;\n    this.depth = 10;\n    this.calculated = {};\n    this.treeLayout = null;\n    this.realChart = null;\n    this.previousTransform = null;\n    this.centerX = 0;\n    this.root = null;\n    this.allNodes = null;\n    this.defaultFont = 'Helevtica';\n    this.duration = 600;\n    this.data = _data;\n    this.store = _store;\n\n    this.setZoomFactor.bind(this);\n    this.batchEnterExitUpdate();\n  }\n\n  // 需要再展开收起节点后自适应当前容器\n  public setZoomFactor() {\n    const currentWidth = this.centerG.node()\n      .getBoundingClientRect().width;\n    let targetZoomLevel = this.svgWidth / currentWidth;\n    targetZoomLevel = targetZoomLevel > 1 ? 1 : targetZoomLevel;\n    this.zoomLevel = targetZoomLevel;\n\n    if (this.orient === 'h') {\n      this.centerG.attr('transform', `translate(${this.calculated.nodeMaxWidth / 2}, ${this.calculated.centerY}) scale(${targetZoomLevel})`);\n    } else {\n      this.centerG.attr('transform', `translate(${this.calculated.centerX}, ${this.calculated.nodeMaxHeight / 2}) scale(${targetZoomLevel})`);\n    }\n  }\n\n  /*\n  private handleCircleClick(_: any, d: any) {\n    if (d.children) {\n      d.hiddenChildren = d.children;\n      d.children = null;\n    } else {\n      if (d.hiddenChildren) d.children = d.hiddenChildren;\n      d.hiddenChildren = null;\n    }\n\n    this.update(d);\n  }\n\n  private handleRectClick(\n    _: any,\n    parent: any,\n    childrenToToggle: Array<any>,\n  ) {\n    // childrenToToggle 全部出现在children中，说明当前点击是期望收起\n    if (parent.children && AincludeB(parent.children, childrenToToggle)) {\n      if (!parent.hiddenChildren) {\n        parent.hiddenChildren = [];\n      }\n      parent.hiddenChildren = parent.hiddenChildren.concat(childrenToToggle);\n      parent.children = parent.children.filter((cd) => !childrenToToggle.includes(cd));\n      // 如果传入空数组，d3 tree.js会报错 read properties of undefined (reading 'z') at firstWalk\n      // 没有children只能传null\n      if (!parent.children.length) {\n        parent.children = null;\n      }\n    } else if (parent.hiddenChildren && AincludeB(parent.hiddenChildren, childrenToToggle)) {\n      if (!parent.children) {\n        parent.children = [];\n      }\n      parent.children = parent.children.concat(childrenToToggle);\n      parent.hiddenChildren = parent.hiddenChildren.filter((cd) => !childrenToToggle.includes(cd));\n      if (!parent.hiddenChildren.length) parent.hiddenChildren = null;\n    }\n\n    this.update(parent);\n  }\n    */\n\n\n  private batchEnterExitUpdate() {\n    d3.selection.prototype.patternify = function (selectedTag:\n      { tag: string, selector: string, targetData?: any }) {\n      const { tag, selector } = selectedTag;\n      const tmpData = selectedTag.targetData || [selector];\n      const batchSelection = this.selectAll(`.${selector}`)\n        .data(tmpData, (d: any, i: any) => {\n          if (typeof d === 'object') {\n            if (d.id) {\n              return d.id;\n            }\n          }\n          return i;\n        });\n\n      batchSelection.exit()\n        .remove();\n      const mergedSelection = batchSelection.enter()\n        .append(tag)\n        .merge(batchSelection);\n      mergedSelection.attr('class', selector);\n      return mergedSelection;\n    };\n  }\n\n  public render() {\n    // 获取当前svg所在容器，使svg长度高度匹配容器\n    const drawingContainer = d3.select(this.container);\n    // 清空当前容器下的所有子元素\n    (drawingContainer.node() as HTMLElement).replaceChildren();\n\n    const drawingContainerBoundry = (drawingContainer.node() as HTMLElement)\n      .getBoundingClientRect();\n    if (drawingContainerBoundry.width > 0) {\n      this.svgWidth = drawingContainerBoundry.width;\n      this.svgHeight = drawingContainerBoundry.height;\n    }\n\n\n    const nodeMaxWidth = typeNodeStyle.nodeWidth; // d3.max(this.data, (({ nodeWidth }) => nodeWidth));\n    const nodeMaxHeight = typeNodeStyle.nodeHeight; // d3.max(this.data, (({ nodeHeight }) => nodeHeight));\n    this.calculated = {\n      id: `ID${Math.floor(Math.random() * 1000000)}`,\n      chartVerticalMargin: this.margins[0],\n      chartHorizontalMargin: this.margins[1],\n      chartWidth: this.svgWidth - this.margins[0] * 2,\n      chartHeight: this.svgHeight - this.margins[1] * 2,\n      nodeMaxWidth,\n      nodeMaxHeight,\n      centerX: (this.svgWidth - this.margins[0] * 2) / 2,\n      centerY: (this.svgHeight - this.margins[1] * 2) / 2,\n    };\n\n    this.depth = this.orient === 'h' ? nodeMaxWidth / 2 : nodeMaxHeight + 20;\n\n    this.treeLayout = d3.tree()\n      .size([this.calculated.chartWidth, this.calculated.chartHeight]);\n    // console.log(\"layout:\", this.treeLayout);\n    // console.log(this.calculated);\n\n\n    if (this.orient === 'h') {\n      this.treeLayout.nodeSize([this.calculated.nodeMaxHeight + typeNodeStyle.nodeSpacing,\n      this.calculated.nodeMaxWidth + this.depth]);\n    } else {\n      this.treeLayout.nodeSize([this.calculated.nodeMaxWidth + typeNodeStyle.nodeSpacing,\n      this.calculated.nodeMaxHeight + this.depth]);\n    }\n\n    if (Array.isArray(this.data)) {\n      this.root = d3.stratify()\n        .id((d: any) => d.nodeId)\n        .parentId((d: any) => d.parentNodeId)(this.data);\n    } else {\n      this.root = d3.hierarchy(this.data, (d: any) => d.children);\n      // 初始化 id 计数器\n      // let idCounter = 0;\n      // 为每个节点分配唯一的 id\n      this.root.each((node: NodeData) => {\n        // node.id = idCounter++;\n        // node.data.id = node.id;\n        node.id = node.data.id;\n      });\n    }\n\n    this.root.x0 = 0;\n    this.root.y0 = 0;\n\n    /*\n    this.allNodes = this.treeLayout(this.root)\n      .descendants()\n      .forEach((d: any) => {\n        Object.assign(d.data, {\n          directSubordinates: d.children ? d.children.length : 0, // 计算直接下属的数量（即直接子节点的数量）\n          totalSubordinates: d.descendants().length - 1,  // 计算总下属的数量（包括所有子孙节点，但不包括自身）\n        });\n      });\n    */\n\n    // pan & zoom handler\n    // this.zoomfunc = (d3.zoom() as any).on('zoom', this.zoomed.bind(this))\n    //   .bind(this);\n    const zoomfunc = (d3.zoom() as any).on('zoom', (e: any) => {\n      chart.attr('transform', e.transform);\n    })\n\n\n    // this.centerG.attr('transform', `translate(${offsetX}, ${offsetY})`);\n\n\n\n    // svg画布\n    // @ts-ignore\n    const svg = drawingContainer.patternify({ tag: 'svg', selector: 'svg-chart-container' })\n      .attr('width', this.svgWidth)\n      .attr('height', this.svgHeight)\n      .attr('font-family', this.defaultFont)\n      // .attr('cursor', 'move')\n      // .attr('viewBox', `${this.margins[0]} ${this.margins[1]} ${this.svgWidth} ${this.svgHeight}`)\n      // .tween(\"resize\", window.ResizeObserver ? null : () => () => svg.dispatch(\"toggle\"))\n      .call(zoomfunc).on('dblclick.zoom', null)  // 禁用双击缩放\n\n\n    this.resetZoom = () => {\n      svg.transition().duration(750).call(zoomfunc.transform, d3.zoomIdentity);\n    }\n\n    // svg画布与容器边距 \n    const chart = svg.patternify({ tag: 'g', selector: 'chart' })\n      .attr('transform', `translate(${this.calculated.chartHorizontalMargin}, ${this.calculated.chartVerticalMargin})`);\n    this.realChart = chart;\n\n    // 真正放置node link\n    const centerG = chart.patternify({ tag: 'g', selector: 'center-group' })\n    // .attr('transform', this.orient === 'h' ? `translate(${this.calculated.chartHorizontalMargin}, ${this.calculated.centerY}) scale(${this.zoomLevel})` : `translate(${this.calculated.centerX}, ${this.calculated.nodeMaxHeight / 2}) scale(${this.zoomLevel})`);\n    this.centerG = centerG;\n\n    // 开始画图例\n\n    // 开始画node link\n    this.update(this.root);\n    return this;\n  }\n\n  private update(data: any) {\n    const tableStore = this.store;\n    const treeData = this.treeLayout(this.root);\n    const linksData = treeData.descendants()\n      .slice(1);\n    const nodesData = treeData.descendants();\n    if (this.orient === 'h') {\n      nodesData.forEach((d: any, index: number) => {\n        const originalX = d.x;\n        d.x = d.y;\n        d.y = originalX;\n        if (index === 0) {\n          d.x = typeNodeStyle.nodeCircleRadius * 2;\n        }\n      });\n    }\n    // 如果是水平视图，要等nodesData转变过后再解构，否则得到的是转变之前的位置，造成transition bug\n    const {\n      x0, y0, x, y,\n    } = data;\n\n    // ************************************绘制link************************************\n    const linksSelection = this.centerG.selectAll('path.link')\n      .data(linksData, (d: any) => d.id);\n\n    const linkGen = d3.linkHorizontal();\n\n    const linksEnter = linksSelection.enter()\n      .insert('path', 'g')\n      .attr('class', 'link')\n      .attr('d', () => {\n        const o: d3.DefaultLinkObject = {\n          source: [x0, y0],\n          target: [x0, y0],\n        };\n        return linkGen(o);\n      });\n\n    const linkUpdate = linksEnter.merge(linksSelection);\n\n    linkUpdate.attr('fill', 'none')\n      .attr('stroke-width', typeNodeStyle.connectorLineWidth)\n      .attr('stroke', typeNodeStyle.connectorLineColor)\n    // .attr('stroke-width', ((d: any) => d.data.connectorLineWidth || 2))\n    // .attr('stroke', (d: any) => (d.data.connectorLineColor ? d.data.connectorLineColor : 'black'));\n\n    let realChartWidth = 0\n    linkUpdate.transition()\n      .duration(this.duration)\n      .attr('d', (d: any) => {\n        if (this.orient === 'h') {\n          let xshiftStart = typeNodeStyle.nodeWidth / 2;\n          const yshiftStart = 0;\n          const xshiftEnd = -typeNodeStyle.nodeWidth / 2;\n          const yshiftEnd = 0;\n\n          if (d.parent.id == \"0\") {\n            xshiftStart = typeNodeStyle.nodeCircleRadius\n          }\n\n          const chartWidth = d.x + xshiftStart;\n          if (chartWidth > realChartWidth) {\n            realChartWidth = chartWidth;\n          }\n\n          const o: d3.DefaultLinkObject = {\n            source: [d.parent.x + xshiftStart, d.parent.y + yshiftStart],\n            target: [d.x + xshiftEnd, d.y + yshiftEnd],\n          };\n          return linkGen(o);\n        }\n\n        const o: d3.DefaultLinkObject = {\n          source: [d.parent.x, d.parent.y + typeNodeStyle.nodeHeight / 2],\n          target: [d.x, d.y - typeNodeStyle.nodeHeight / 2],\n        };\n        return linkGen(o);\n        return diagonal({ x: d.x, y: d.y }, { x: d.parent.x, y: d.parent.y });\n      });\n\n\n\n    // 用于节点收缩或展开是动效终点所处位置\n    const linkExit = linksSelection.exit()\n      .transition()\n      .duration(this.duration)\n      .attr('d', () => {\n        const o: d3.DefaultLinkObject = {\n          source: [x, y],\n          target: [x, y],\n        };\n        return linkGen(o);\n      })\n      .remove();\n\n    // ************************************绘制node************************************\n    const nodesSelection = this.centerG.selectAll('g.node')\n      .data(nodesData, (d: any) => d.id);\n\n\n\n    const nodeEnter = nodesSelection.enter()\n      .append('g')\n      .attr('class', 'node')\n      .attr('transform', () => `translate(${x0}, ${y0})`)\n      .attr('cursor', 'pointer');\n\n\n\n    // ************************************节点、节点文本、节点上方边文本****************************\n    const nodeGroups = nodeEnter.patternify({ tag: 'g', selector: 'node-group', targetData: (d: any) => [d] });\n    // const nodeRectText = nodeEnter.patternify({ tag: 'text', selector: 'node-text', targetData: (d: any) => [d] });\n\n    // const nodeRectText = nodeGroups.patternify({ tag: 'g', selector: 'node-text-g', targetData: (d: any) => [d] });\n    // nodeRectText.patternify({ tag: 'text', selector: 'node-text' });\n    // nodeRectText.patternify({ tag: 'svg:title', selector: 'node-tooltip' });\n\n    // const edgeText = nodeEnter.patternify({ tag: 'text', selector: 'edge-text', targetData: (d: any) => [d] });\n\n    const nodeUpdate = nodeEnter.merge(nodesSelection);\n\n    nodeUpdate.transition()\n      .attr('opaicty', 0)\n      .duration(this.duration)\n      .attr('transform', (d: any) => {\n        // console.log(d);\n        return `translate(${d.x}, ${d.y})`\n      })\n      .attr('opacity', 1);\n\n    // console.log(data);\n\n    // 绑定选中节点的交互\n    // nodeGroups\n    //   // .on('click', this.handleNodeMultipleSelect.bind(this))\n    //   .on('contextmenu', this.declareContextMenu.bind(this));\n\n    // nodeGroups.attr('transform', ({ data: info }: any) => `translate(${-info.nodeWidth / 2}, ${-info.nodeHeight / 2})`);\n    nodeGroups.attr('transform', () => `translate(${-typeNodeStyle.nodeWidth / 2}, ${-typeNodeStyle.nodeHeight / 2})`);\n\n    nodeGroups.each(function (this: any, node: NodeData) {\n      const current = d3.select(this);\n      /** 绘制节点（circle + rect） */\n      if (node.parent === null) { // 提前处理圆形节点，array下的元素\n        // @ts-ignore\n        current.patternify({ tag: 'circle', selector: `node-circle-${node.id}` });\n        nodeGroups.select(`.node-circle-${node.id}`)\n          .attr('class', `node-circle-${node.id} type-node`)\n          .attr('r', typeNodeStyle.nodeCircleRadius)\n          .attr('fill', '#f5f5f5') // typeMapColor[node.data.type!]\n          .attr('stroke', typeNodeStyle.connectorLineColor)\n          .attr('stroke-width', typeNodeStyle.connectorLineWidth)\n          .attr('transform', `translate(${typeNodeStyle.nodeWidth / 2}, ${typeNodeStyle.nodeHeight / 2})`)\n          .attr('cursor', 'pointer')\n          .append('svg:title').text(`${langConfig[lang].tree.width}${node.data.width}, ${langConfig[lang].tree.height}${node.data.height}`)\n        return;\n      }\n\n      if (node.data.id === 1) {\n        tableStore.spec.selectNode = node  // 默认选中第一个节点\n        tableStore.tree.clickNode = node  // 默认选中第一个节点\n        if (document.body.style.cursor !== 'cell') {\n          tableStore.goToInstance(0);\n        }\n      }\n\n      const nodeRectData = {\n        \"rectHeight\": typeNodeStyle.nodeHeight,\n        \"rectWidth\": typeNodeStyle.nodeWidth,\n        \"starty\": 0,\n        \"startx\": 0,\n        \"radius\": 5,\n        \"rounded\": \"all\"\n      }\n\n      let tooltipText: any = node.data.matchs?.length;\n      tooltipText = tooltipText === undefined ? langConfig[lang].tree.noMatch : `${langConfig[lang].tree.matched}${tooltipText} ${langConfig[lang].tree.instances}`;\n      // tooltipText += '\\nPress Delete/Backspace to delete this pattern.';\n\n      // @ts-ignore\n      current.patternify({ tag: 'path', selector: `node-rect-${node.id}` });\n      nodeGroups.select(`.node-rect-${node.id}`)\n        .attr('class', `node-rect-${node.id} type-node`)\n        .attr('d', customRectCorner(nodeRectData as RectDef))\n        .attr('fill', typeMapColor[node.data.type!])\n        // .attr('fill', nodeRectData.rectColor)\n        // .attr('cursor', (d: any) => (!d.children && !d.hiddenChildren ? 'none' : 'pointer'))\n        .attr('cursor', 'pointer')\n        // .attr('pointer-events', (d: any) => (!d.children && !d.hiddenChildren ? 'none' : 'all'));\n        .append('svg:title').text(`${langConfig[lang].tree.width}${node.data.width}, ${langConfig[lang].tree.height}${node.data.height}\\n${langConfig[lang].tree.path}${JSON.stringify(node.data.path)}\\n` + tooltipText)\n\n      /** 绘制节点的constraints */\n      node.data.match?.constraints?.forEach((_constraint, i) => {\n        // console.log('hhh', constraint, i, dataBindToThis.id, dataBindToThis);\n        const iconsz = typeNodeStyle.iconsize;\n        const constrId = `${node.id}-${i}`;\n        // @ts-ignore\n        current.patternify({ tag: 'rect', selector: `node-constraint-rect-${constrId}` });\n        const constrNodeRect = nodeGroups.select(`.node-constraint-rect-${constrId}`);\n\n        const subTemplate = tableStore.getNodebyPath(tableStore.spec.rawSpecs, node.data.path!);\n        const constraint: CellConstraint = subTemplate!.match.constraints![i];\n\n        constrNodeRect.classed('node-constraint-rect', true)\n          .attr('transform', `translate(${(iconsz + typeNodeStyle.iconPadding) * i}, ${-typeNodeStyle.nodeHeight / 2 - 3})`)\n          .attr(\"visibility\", \"hidden\")\n          .attr('width', iconsz + 2)\n          .attr('height', iconsz + 2)\n          .attr(\"stroke\", typeMapColor.selection)\n          .attr(\"stroke-width\", 1.5)\n          .attr(\"fill\", \"none\")\n\n        let constrIndex = 0;\n\n        // @ts-ignore\n        current.patternify({ tag: 'image', selector: `node-constraint-icon-${constrId}` });\n        nodeGroups.select(`.node-constraint-icon-${constrId}`)\n          .attr('transform', `translate(${1 + (iconsz + typeNodeStyle.iconPadding) * i}, ${-typeNodeStyle.nodeHeight / 2 - 2})`)\n          .attr('xlink:xlink:href', () => {\n            // eslint-disable-next-line\n            const valueCstr = constraint.valueCstr;\n            let iconPath: any;\n            if (typeof valueCstr === 'function') {\n              iconPath = require('@/assets/function.png');\n            } else {\n              switch (valueCstr) {\n                case TableCanoniserKeyWords.String:\n                  iconPath = require('@/assets/string.png');\n                  break;\n                case TableCanoniserKeyWords.Number:\n                  iconPath = require('@/assets/number.png');\n                  break;\n                case TableCanoniserKeyWords.None:\n                  iconPath = require('@/assets/minus.png');\n                  break;\n                case TableCanoniserKeyWords.NotNone:\n                  iconPath = require('@/assets/plus.png');\n                  break;\n                default:\n                  iconPath = require('@/assets/equal3.png');  // letter-w (3)\n              }\n            }\n            // const iconPath = require('@/assets/constraint.png');\n            return iconPath;\n          })\n          .attr('width', iconsz)\n          .attr('height', iconsz)\n          .attr('tabindex', 0)  // 使 rect 可聚焦，但点击后会触发focus，默认会有 outline样式，需要设置 outline: none\n          .on(\"keyup\", (e: KeyboardEvent, d: NodeData) => {\n            if (e.key === \"Delete\" || e.key === \"Backspace\") {\n              tableStore.deleteChildByPath(tableStore.spec.rawSpecs, d.data.path!, i);\n              tableStore.stringifySpec();\n            }\n          })\n          .on('mouseover', (_e: any, d: NodeData) => {\n            // console.log('mouseover', d);\n            try {\n              constrNodeRect.attr('visibility', 'visible');\n              let cellInfo = d.data.constrsInfo![i].map((ele, index) => ({ ele, index })).filter(info => info.ele.instIndex === tableStore.tree.instanceIndex);\n              if (cellInfo === undefined) return;\n              tableStore.highlightTblTemplate(cellInfo.map((info) => {\n                if (info.ele.isDefinedFromSpec) constrIndex = info.index;\n                return {\n                  x: info.ele.x,\n                  y: info.ele.y,\n                  width: 1,\n                  height: 1,\n                  isDefinedFromSpec: info.ele.isDefinedFromSpec\n                }\n              }));\n            } catch (e) {\n              console.log('Constraint mouseover error: \\n', e)\n            }\n          })\n          .on('mouseout', (_e: any, d: NodeData) => {\n            if (tableStore.spec.constrNodeRectClickId !== constrId)\n              constrNodeRect.attr('visibility', 'hidden');\n            tableStore.highlightViewsAfterClickNode();\n          })\n          .on('contextmenu', declareContextMenu.bind(null, tableStore, node, i))  // bind 第一个参数为 this，这种情况下最后一个参数为 event\n          .on('click', (_e: any, d: NodeData) => {\n            try {\n              // 先清空其他样式\n              document.dispatchEvent(escapeEvent);\n\n              tableStore.spec.constrNodeRectClickId = constrId;\n              tableStore.tree.clickNode = d;\n              tableStore.tree.clickConstrIndex = i;\n              constrNodeRect.attr('visibility', 'visible');\n              tableStore.highlightViewsAfterClickNode();\n\n              tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(constraint, subTemplate), 'selectionShallow'];\n              tableStore.editor.mappingSpec.triggerCodeChange = false;\n              const newCode = tableStore.editor.mappingSpec.codePref + tableStore.stringifySpec(null, \"even\", false);\n              if (tableStore.editor.mappingSpec.code === newCode) {\n                tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode);\n                tableStore.editor.mappingSpec.highlightCode = null;\n                tableStore.editor.mappingSpec.triggerCodeChange = true;\n              } else {\n                tableStore.editor.mappingSpec.code = newCode;\n              }\n            } catch (e) {\n              console.log('Constraint click error: \\n', e)\n            }\n          })\n          .append('svg:title').text(() => {\n            const valueCstr = constraint.valueCstr;\n            // const msg = '\\nPress Delete/Backspace to delete this constraint.';\n            if (typeof valueCstr === 'function') {\n              return langConfig[lang].tree.function\n            } else {\n              switch (valueCstr) {\n                case TableCanoniserKeyWords.String:\n                  return langConfig[lang].tree.string\n                case TableCanoniserKeyWords.Number:\n                  return langConfig[lang].tree.number\n                case TableCanoniserKeyWords.None:\n                  return langConfig[lang].tree.none\n                case TableCanoniserKeyWords.NotNone:\n                  return langConfig[lang].tree.notNone\n                default:\n                  return langConfig[lang].tree.equal + valueCstr + lang === 'en' ? \".\" : \"。\"\n              }\n            }\n          })\n      });\n    });\n\n    // const nodeRectText = nodeUpdate.patternify({ tag: 'g', selector: 'node-text-g', targetData: (d: any) => [d] });\n    nodeUpdate.patternify({ tag: 'text', selector: 'node-text' });\n\n\n    nodeUpdate.select('.node-text')\n      .attr('text-anchor', 'middle')\n      .attr('alignment-baseline', 'middle')\n      .attr('fill', nodeTextStyle.color)\n      .attr('font-size', nodeTextStyle.fontSize)\n      // .attr('y', ({ data: info }: any) => nodeTextStyle.yAxisAdjust + info.shiftFromEndCenter)\n      .attr('y', () => nodeTextStyle.yAxisAdjust)\n      .attr('cursor', 'pinter')\n      .attr('pointer-events', 'none')  // .style('pointer-events', 'auto');\n      .text((d: NodeData) => {\n        if (d.id === 0) {\n          // console.log(d.data.size);\n          return \"\";\n        } else {\n          let width: any = d.data.width;\n          let height: any = d.data.height;\n          let specWidth = d.data.match?.size?.width;\n          let specHeight = d.data.match?.size?.height;\n          if (specWidth === undefined) {\n            specWidth = 1\n          }\n          if (specHeight === undefined) {\n            specHeight = 1\n          }\n          if (width === undefined) width = specWidth;\n          else if (specWidth === null) width = null;\n          if (height === undefined) height = specHeight;\n          else if (specHeight === null) height = null;\n          return `(${width}, ${height})`;\n        }\n      })\n    // .on('click', (event: any, d: any) => {\n    //   // 阻止点击事件的默认行为和传播\n    //   // event.stopPropagation();\n    //   // event.preventDefault();\n    //   console.log(\"click\", d);\n    // })\n    // .append(\"svg:title\").text(\"(d: any) => d.data.id\");\n\n\n\n    // 为所有circle和rect绑定展开收起交互事件\n    // d3.selectAll('.type-node, .node-text-g')\n    d3.selectAll<SVGElement, NodeData>('.type-node')\n      .attr('tabindex', 0)  // 使 rect 可聚焦，但点击后会触发focus，默认会有 outline样式，需要设置 outline: none\n      .on(\"keyup\", (e: KeyboardEvent, d: NodeData) => {\n        if (e.key === \"Delete\" || e.key === \"Backspace\" && d.data.id !== 0) {\n          tableStore.deleteChildByPath(tableStore.spec.rawSpecs, d.data.path!);\n          tableStore.stringifySpec();\n        }\n      })\n      .on('contextmenu', (e, d) => {\n        declareContextMenu(tableStore, d, -1, e);\n      })\n      .on('mouseover', function (event, node) {  // 只有 function 才有 this，箭头函数的 this 是定义时的上下文\n        // console.log('mouseover', node);  // event: any, node: any\n        // console.log('mouseover', tableStore.tree.clickConstrIndex);\n        if (node.id) tableStore.highlightTblTemplate(node.data.currentMatchs!);\n      })\n      .on('mouseout', function () {\n        tableStore.highlightViewsAfterClickNode();\n      })\n      .on('click', function (event, d) {\n        event.stopPropagation();\n        // d3.selectAll('.type-node').classed('selection', false);\n        tableStore.clearStatus(\"tree\");\n        if (d.id) {\n          // tableStore.editor.mappingSpec.instance?.setValue(tableStore.editor.mappingSpec.codePref + tableStore.stringifySpec(null, \"even\", false));\n          // tableStore.stringifySpec();\n          // if (tableStore.spec.selectNode === null || tableStore.spec.selectNode.data.id !== node.data.id) {}\n          tableStore.spec.selectNode = d;\n          tableStore.tree.clickNode = d;\n          tableStore.tree.clickConstrIndex === -1;\n          tableStore.highlightViewsAfterClickNode();\n          d3.select(this).classed('selection', true);\n          const visData = d.data;\n          // tableStore.goToInstance(0);  // 默认选择第一个节点\n\n\n          /************** 与 monaco editor 交互 ***************/\n          const subTemplate = tableStore.getNodebyPath(tableStore.spec.rawSpecs, visData.path!);\n          // const [startLine, endLine] = tableStore.getHighlightCodeStartEndLine(subTemplate);\n          // tableStore.highlightCode(startLine, endLine, `${visData.type}Shallow`);\n          tableStore.editor.mappingSpec.highlightCode = [...tableStore.getHighlightCodeStartEndLine(subTemplate), `${visData.type}Shallow`];\n          tableStore.editor.mappingSpec.triggerCodeChange = false;\n          const newCode = tableStore.editor.mappingSpec.codePref + tableStore.stringifySpec(null, \"even\", false);\n          if (tableStore.editor.mappingSpec.code === newCode) {\n            tableStore.editor.mappingSpec.instance?.setValue(newCode);\n            tableStore.highlightCode(...tableStore.editor.mappingSpec.highlightCode);\n            tableStore.editor.mappingSpec.highlightCode = null;\n            tableStore.editor.mappingSpec.triggerCodeChange = true;\n          } else {\n            tableStore.editor.mappingSpec.code = newCode;\n          }\n        } else {\n          document.dispatchEvent(escapeEvent);\n        }\n        return;\n        // this.handleCircleClick(event, d);  // 收缩节点\n      });\n\n\n    /*\n    nodeUpdate.select('.edge-text')\n      .attr('fill', edgeTextStyle.color)\n      .attr('font-size', edgeTextStyle.fontSize)\n      .text(({ data: info }: any) => typeFeatureMapIcon(info.dataTypeFeature))\n      .attr('x', ({ data: info }: any) => {\n        if (this.orient === 'h') {\n          return (info.dataTypeText ? -info.nodeWidth / 2 : -info.nodeCircleRadius) - 15;\n        }\n        return edgeTextStyle.distFromEdge;\n      })\n      .attr('y', ({ data: info }: any) => (this.orient === 'h' ? -edgeTextStyle.distFromEdge + info.shiftFromEndCenter : -info.nodeHeight / 2 - 2));\n    */\n    // ************************************exit 节点************************************\n    const nodeExitTransition = nodesSelection.exit()\n      .attr('opacity', 1)\n      .transition()\n      .duration(this.duration)\n      .attr('transform', `translate(${x},${y})`)\n      .on('end', function (this: any) {\n        d3.select(this)\n          .remove();\n      })\n      .attr('opacity', 0);\n\n    // Store the old positions for transition.\n    nodesData.forEach((d: any) => {\n      d.x0 = d.x;\n      d.y0 = d.y;\n    });\n\n    const offsetX = Math.max((this.svgWidth - realChartWidth) / 2, 0) - typeNodeStyle.nodeCircleRadius;\n    const offsetY = Math.max((this.svgHeight - this.realChart.node()!.getBBox().height) / 2, 0) + typeNodeStyle.nodeCircleRadius;\n    this.centerG.attr('transform', `translate(${offsetX}, ${offsetY})`); // Center the matrix\n  }\n}\n","const url = window.location.href;\n\nexport const lang: 'en' | 'cn' = url.includes('cn') ? 'cn' : 'en';\n\nexport const langConfig = {\n    'en': {\n        \"panel\": {\n            \"case\": \"Case:\",\n            \"undo\": \"Undo\",\n            \"redo\": \"Redo\",\n            \"run\": \"Run\",\n            \"autoRun\": \"AutoRun\",\n            \"autoRunTitle\": \"Set whether to automatically run code upon changes\",\n            \"spec\": \"Specification\",\n            \"specTitle\": \"The mapping specification that transforms the input table to the output table\",\n            \"matchedInst\": \"Matched Instances\",\n            \"matchedInstTitle\": \"A tree data structure that contains the AreaInfo of all matched instances, starting from the root area\",\n        },\n        \"pattern\": {\n            \"patterns\": \"Mapping Patterns\",\n            \"currentInst\": \"Current instance:\",\n            \"match\": \"Match:\",\n            \"null\": \"Region\",\n            \"region\": \"Region\",\n            \"regionTitle\": \"Click to select a starting area in the input table. Press 'Esc' to cancel the selection mode.\",\n            \"extract\": \"Extract by:\",\n            \"position\": \"Position\",\n            \"positionTitle\": \"Click to select a starting area in the input table for matching and extracting by position. Press 'Esc' to cancel the selection mode.\",\n            \"context\": \"Context\",\n            \"contextTitle\": \"Click to select a starting area in the input table for matching and extracting by context. Press 'Esc' to cancel the selection mode.\",\n            \"value\": \"Value\",\n            \"valueTitle\": \"Click to select a starting area in the input table for matching and extracting by value. Press 'Esc' to cancel the selection mode.\",\n            \"reset\": \"Reset View\",\n            \"previousInst\": \"Previous instance\",\n            \"nextInst\": \"Next instance\",\n            \"selectionMode\": \"Press ESC to cancel the selection mode.\",\n            \"addConstr\": \"Please select the constrained cell in the input table.\",\n            \"addSubPattern\": \"Please select an area in the input table.\",\n            \"afterClickMessage\": \" mode. Please select the starting area in the input table.\\n Press ESC to cancel the selection mode.\",\n        },\n        \"table\": {\n            \"input\": \"Input Table\",\n            \"upload\": \"Upload\",\n            \"reset\": \"Reset Data\",\n            \"output\": \"Output Table\",\n            \"download\": \"Download\",\n        },\n        \"store\": {\n            \"for\": \"For the\",\n            \"template\": \"template,\",\n            \"matched\": \"instances are matched.\",\n            \"oneMatch\": \"only one instance is matched.\",\n            \"noMatch\": \"no instance is matched.\",\n            \"emptyTable\": \"The output table is empty based on the specification.\",\n            \"failedTransform\": \"Failed to transform the table based on the specification:\",\n            \"failedParse\": \"Failed to parse the specification:\",\n            \"invalidPath\": \"The node path is invalid.\",\n            \"invalidInstNum\": \"The input number is out of range: \",\n            \"menu\": {\n                \"addPattern\": \"Add Sub-Pattern\",\n                \"position\": \"Position\",\n                \"positionTitle\": \"Match and Extract by Position\",\n                \"context\": \"Context\",\n                \"contextTitle\": \"Match and Extract by Context\",\n                \"value\": \"Value\",\n                \"valueTitle\": \"Match and Extract by Value\",\n                \"region\": \"Region\",\n                \"regionTitle\": \"Match Without Extraction\",\n                \"addConstr\": \"Add Constraint\",\n                \"resetCol\": \"Reset Target Cols\",\n                \"resetColTitle\": \"Reset the Match & Extract Method of the Target Cols\",\n                \"deletePattern\": \"Delete This Pattern\",\n                \"deletePatternTitle\": \"Delete This Pattern.\\nShortcut: Delete/Backspace\",\n                \"deleteConstr\": \"Delete This Constraint\",\n                \"deleteConstrTitle\": \"Delete This Constraint.\\nShortcut: Delete/Backspace\",\n            }\n        },\n        \"tree\": {\n            \"function\": \"The cell is constrained by a custom function:\\nClick to see details in the Code Panel.\",\n            \"string\": \"The cell's data type should be a string.\",\n            \"number\": \"The cell's data type should be a number.\",\n            \"none\": \"The cell should be an empty string, null, or undefined.\",\n            \"notNone\": \"The cell should not be an empty string, null, or undefined.\",\n            \"equal\": \"The cell should be \",\n            \"width\": \"Width: \",\n            \"height\": \"Height: \",\n            \"path\": \"Pattern Path: \",\n            \"noMatch\": \"Don't match any instances\",\n            \"matched\": \"Match: \",\n            \"instances\": \"instances\",\n            \"total\": \"Total \",\n        },\n        \"others\": {\n            \"colType\": \"cell(s) with a data type of\",\n            \"string\": \"string\",\n            \"number\": \"number\",\n            \"none\": \"none\",\n            \"targetCol\": \"The cell's Target Column is:\",\n            \"noTargetCol\": \"No Target Column\"\n        }\n    },\n    'cn': {\n        \"panel\": {\n            \"case\": \"演示案例 :\",\n            \"undo\": \"撤销\",\n            \"redo\": \"重做\",\n            \"run\": \"运行\",\n            \"autoRun\": \"自动运行\",\n            \"autoRunTitle\": \"设置是否在代码改变时自动运行代码\",\n            \"spec\": \"映射规范\",\n            \"specTitle\": \"将输入表转换为输出表的语义映射规范\",\n            \"matchedInst\": \"匹配实例\",\n            \"matchedInstTitle\": \"从根区域开始，包含所有匹配实例的AreaInfo的树数据结构\",\n        },\n        \"pattern\": {\n            \"patterns\": \"映射模式\",\n            \"currentInst\": \"当前实例 :\",\n            \"match\": \"匹配方式 :\",\n            \"null\": \"区域\",\n            \"region\": \"区域\",\n            \"regionTitle\": \"点击选择输入表中的起始区域。按ESC键取消选择模式。\",\n            \"extract\": \"抽取方式 :\",\n            \"position\": \"位置\",\n            \"positionTitle\": \"点击选择输入表中的起始区域以进行位置匹配和抽取。按ESC键取消选择模式。\",\n            \"context\": \"上下文\",\n            \"contextTitle\": \"点击选择输入表中的起始区域以进行上下文匹配和抽取。按ESC键取消选择模式。\",\n            \"value\": \"值\",\n            \"valueTitle\": \"点击选择输入表中的起始区域以进行值匹配和抽取。按ESC键取消选择模式。\",\n            \"reset\": \"重置视图\",\n            \"previousInst\": \"上一个实例\",\n            \"nextInst\": \"下一个实例\",\n            \"selectionMode\": \"按ESC键取消选择模式。\",\n            \"addConstr\": \"请在输入表中选择约束单元格。\",\n            \"addSubPattern\": \"请在输入表中选择子模式单元格区域。\",\n            \"afterClickMessage\": \"模式。请在输入表中选择起始区域。\\n按ESC键取消选择模式。\",\n        },\n        \"table\": {\n            \"input\": \"输入表\",\n            \"upload\": \"上传\",\n            \"reset\": \"重置数据\",\n            \"output\": \"输出表\",\n            \"download\": \"下载\",\n        },\n        \"store\": {\n            \"for\": \"对于第\",\n            \"template\": \"模板，\",\n            \"matched\": \"个实例匹配成功。\",\n            \"oneMatch\": \"只有一个实例匹配成功。\",\n            \"noMatch\": \"没有实例匹配成功。\",\n            \"emptyTable\": \"输出表为空，基于规范匹配成功。\",\n            \"failedTransform\": \"基于规范重构表格失败，原因为:\",\n            \"failedParse\": \"解析规范失败，原因为:\",\n            \"invalidPath\": \"该节点路径无效。\",\n            \"invalidInstNum\": \"输入的实例数值超出范围：\",\n            \"menu\": {\n                \"addPattern\": \"添加子模式\",\n                \"position\": \"位置\",\n                \"positionTitle\": \"按位置匹配和抽取\",\n                \"context\": \"上下文\",\n                \"contextTitle\": \"按上下文匹配和抽取\",\n                \"value\": \"值\",\n                \"valueTitle\": \"按值匹配和抽取\",\n                \"region\": \"区域\",\n                \"regionTitle\": \"不抽取\",\n                \"addConstr\": \"添加约束\",\n                \"resetCol\": \"重置目标列\",\n                \"resetColTitle\": \"重置目标列的匹配和抽取方式\",\n                \"deletePattern\": \"删除此模式\",\n                \"deletePatternTitle\": \"删除此模式。\\n快捷键：Delete/Backspace\",\n                \"deleteConstr\": \"删除此约束\",\n                \"deleteConstrTitle\": \"删除此约束。\\n快捷键：Delete/Backspace\",\n            }\n        },\n        \"tree\": {\n            \"function\": \"该单元格受自定义函数约束：\\n点击“代码面板”查看详细信息。\",\n            \"string\": \"该单元格的数据类型应为字符串。\",\n            \"number\": \"该单元格的数据类型应为数值。\",\n            \"none\": \"该单元格应为空字符串，null，或undefined。\",\n            \"notNone\": \"该单元格不应为空字符串，null，或undefined。\",\n            \"equal\": \"该单元格应为：\",\n            \"width\": \"宽：\",\n            \"height\": \"高：\",\n            \"path\": \"模式路径：\",\n            \"noMatch\": \"没有匹配任何实例\",\n            \"matched\": \"匹配：\",\n            \"instances\": \"个实例\",\n            \"total\": \"总共匹配了\",\n        },\n        \"others\": {\n            \"colType\": \"个单元格的数据类型为\",\n            \"string\": \"字符串 (string)\",\n            \"number\": \"数值 (number)\",\n            \"none\": \"空 (none)\",\n            \"targetCol\": \"该单元格在输出表中的映射目标列为：\",\n            \"noTargetCol\": \"该单元格在输出表中无映射目标列\"\n        }\n    }\n}","import { TableStore } from '@/store/table';\nimport * as d3 from 'd3';\n\n\nexport let miniZoom: d3.ZoomBehavior<SVGSVGElement, unknown> | null = null;\n\nexport const drawMinimap = (rows: number, cols: number, container: SVGSVGElement | null, tableStore: TableStore, percentWidth: number = 0.2) => {\n    if (!container) return;\n\n    const svg = d3.select(container);\n    // Clear any existing SVG\n    svg.select('g.left').remove();\n\n    if (rows === 0 || cols === 0) return;\n\n    const containerWidth = container.clientWidth * percentWidth;\n    const containerHeight = container.clientHeight;\n    let cellWidth = Math.max(5, Math.min(45, Math.floor(containerWidth / cols)));\n    let cellHeight = Math.max(5, Math.min(20, Math.floor(containerHeight / rows)));\n    cellWidth = cellHeight = Math.min(cellWidth, cellHeight)\n\n    miniZoom = d3.zoom<SVGSVGElement, unknown>()\n        // .scaleExtent([0.5, 3.5])  // set the zoom scale range\n        .on('zoom', function (event) {\n            // svg.attr('transform', event.transform);  // 直接设置svg的transform属性会导致缩放后的坐标系不正确（导致的问题是：用鼠标平移（pan）矩形的时候，矩形会抖动，导致矩形实际平移的距离小于鼠标平移的距离），因此需要在svg内部再添加一个g元素\n            // d3.select('g.matrix').attr('transform', event.transform);\n            // console.log('minimap', event.transform, event);\n            matrix.attr('transform', `translate(${tableStore.tree.offset.left.x + event.transform.x}, ${tableStore.tree.offset.left.y + event.transform.y}) scale(${event.transform.k})`); // Update the matrix transform based on the zoom event\n            tableStore.updateCurve();\n            // updateCellTextVisibility(event.transform.k); // Update cell text visibility based on the current scale\n            // transformStatue = event.transform;\n            // window.d3 = d3;\n        })\n\n\n    const g = svg.append('g').classed(\"left\", true)\n        .call(miniZoom as any).on('dblclick.zoom', null)  // 禁用双击缩放\n\n    const matrix = g.append('g').classed(\"matrix\", true);  // Append a 'g' element for better transform management to avoid jittering\n    // let texts: any = null;\n\n    // 监听鼠标进入事件，在鼠标悬浮时启用 zoom 行为\n    // matrix.on('mouseover', () => {\n    //     svg.call(zoom as any);\n    //     // const transform = d3.zoomTransform(matrix.node() as SVGSVGElement);\n    //     // console.log(transform);\n    // });\n\n    // // 监听鼠标离开事件，在鼠标离开时禁用 zoom 行为\n    // matrix.on('mouseout', () => {\n    //     svg.on('.zoom', null);  // 移除 zoom 事件监听器\n    //     // const transform = d3.zoomTransform(matrix.node() as SVGSVGElement);\n    //     // console.log(transform);\n    // });\n\n    const grids = tableStore.generateGrid(rows, cols);\n\n    const cells = matrix.append('g').selectAll('rect')\n        .data(grids)\n        .enter().append('rect').classed('grid-cell', true)\n        .attr('x', d => d.col * cellWidth)\n        .attr('y', d => d.row * cellHeight)\n        .attr('id', d => `grid-${d.row}-${d.col}`)\n        .attr('width', cellWidth)\n        .attr('height', cellHeight)\n        // .on('mouseover', function () {\n        //     d3.select(this).raise() // Bring the cell to the front \n        //         // .attr('fill', '#ece9e6')\n        //         // .attr('stroke', '#4b8aff')\n        //         .attr('stroke-width', 2);\n        //     if (texts) {\n        //         texts.raise();\n        //     }\n        // })\n        // .on('mouseout', function () {\n        //     d3.select(this)\n        //         // .attr('fill', '#f9f7ff')\n        //         // .attr('stroke', '#cccccc')\n        //         .attr('stroke-width', 1);\n        // })\n        .on('click', function (event, d) {\n            d3.selectAll('rect.grid-cell').attr('class', 'grid-cell');\n            d3.select(this).raise().classed('selection', true);\n            tableStore.grid_cell_click({ row: d.row, col: d.col })\n            tableStore.input_tbl.instance.deselectCell();\n            tableStore.output_tbl.instance.deselectCell();\n        })\n        .append('title').text(d => `Position: (${d.row}, ${d.col})`);\n\n    // Calculate the offset to center the matrix in the SVG container\n    tableStore.tree.offset.left.x = Math.max((containerWidth - matrix.node()!.getBBox().width) / 2, 0);\n    tableStore.tree.offset.left.y = Math.max((containerHeight - matrix.node()!.getBBox().height) / 2, 0);\n    matrix.attr('transform', `translate(${tableStore.tree.offset.left.x}, ${tableStore.tree.offset.left.y})`); // Center the matrix\n\n    tableStore.tree.minimapInstHighlight = matrix.append('g').classed('tbl-minimap-highlight', true);\n    tableStore.tree.minimapVisInfo = {\n        width: cellWidth,\n        height: cellHeight\n    }\n\n    /*\n    const updateCellTextVisibility = (scale: number) => {\n        const scaledCellWidth = cellWidth * scale;\n        const scaledCellHeight = cellHeight * scale;\n        // const cellArea = scaledCellWidth * scaledCellHeight;\n        if (scaledCellWidth >= 45 && scaledCellHeight >= 20) {\n            if (texts) {\n                texts.style('display', 'block');\n            } else {\n                texts = matrix.selectAll('text')\n                    .data(grids)\n                    .enter().append('text').classed('grid-text', true)\n                    .attr('x', d => d.col * cellWidth + cellWidth / 2)\n                    .attr('y', d => d.row * cellHeight + cellHeight / 2)\n                    .attr('id', d => `text-${d.row}-${d.col}`)\n                    .attr('dy', '.30em')\n                    .attr('font-size', 15 / scale)\n                    .attr('fill', '#000')\n                    .attr('text-anchor', 'middle')\n                    .text(d => `(${d.row}, ${d.col})`)\n                    .style('display', 'block')\n                    .style('pointer-events', 'none'); // Ensure text does not capture mouse events, in order to allow clicking on the cells\n            }\n        } else {\n            if (texts) {\n                texts.style('display', 'none');\n            }\n        }\n    };\n\n    updateCellTextVisibility(1); // Initial update for default scale 1\n    */\n};","export const typeMapColor = {\n  // Pattern selection\n  position: 'rgba(106, 176, 76)',    // '#6ab04c',\n  positionShallow: 'rgba(106, 176, 76, 0.65)',// '#badc58'\n  context: 'rgba(240, 147, 43)', // '#f0932b', \n  contextShallow: 'rgba(240, 147, 43, 0.65)', // '#ffbe76'\n  value: 'rgba(34, 166, 179)', // '#22a6b3',\n  valueShallow: 'rgba(34, 166, 179, 0.65)', // '#7ed6df'\n  // value: 'rgba(140, 122, 230)', // '#8c7ae6',\n  // valueShallow: 'rgba(140, 122, 230, 0.65)', // '#a29bfe'\n  null: 'rgba(131, 149, 167)', // '#8395a7',\n  nullShallow: 'rgba(131, 149, 167, 0.65)', // '#c8d6e5',\n  // Table selection\n  selection: 'rgba(9, 132, 227)',  // '#0984e3',\n  selectionShallow: 'rgba(9, 132, 227, 0.65)',\n\n  positionRGBA: 'rgba(106, 176, 76, 0.5)',\n  contextRGBA: 'rgba(240, 147, 43, 0.5)',\n  valueRGBA: 'rgba(34, 166, 179, 0.5)',\n  nullRGBA: 'rgba(131, 149, 167, 0.5)',\n  selectionRGBA: 'rgba(9, 132, 227, 0.5)',\n\n  ambiguousText: '#f9f7ff', // 'rgba(233, 16, 16, 0.5)',\n\n  // Minimap\n  cellFill: '#f9f7ff',\n  cellStroke: '#cccccc',\n};\n\nexport type TypeColor = keyof typeof typeMapColor;\n\n// Dictionary: '#83b5ed',\n// Array: '#7EAA55',\n// String: '#D07C94',\n// Number: '#EEB189',\n// Boolean: '#926EB8',\n// Null: '#E7D6D6',\n\n/*\nexport const colorConfig = {\n  \"posi-mapping\": {\n    fill: '#0984e3',\n    stroke: '#0984e3',\n    text: '#fff',\n  },\n  \"posi-mapping-shallow\": {\n    fill: '#74b9ff',\n    stroke: '#74b9ff',\n    text: '#fff',\n  },\n  \"ambiguous-cell\": {\n    fill: '#83e4aa',\n    stroke: '#83e4aa',\n    text: '#e91010',\n  },\n  \"determined-cell\": {\n    fill: '#37bc6c',\n    stroke: '#37bc6c',\n    text: '#e91010',\n    weight: 'bold',\n  },\n  \"default\": {\n    fill: '#f9f7ff',\n    stroke: '#cccccc',\n    text: '#000',\n  }\n}\n*/\n\nexport const typeNodeStyle = {\n  nodeWidth: 96, // 100,\n  nodeHeight: 30,\n  nodeRectFillColor: \"#7EAA55\",\n  nodeCircleFillColor: \"#83b5ed\",\n  nodeCircleRadius: 15,\n  nodeBorderRadius: 5,\n  verticalLineLength: 40,\n  verticalLineWidth: 5,\n  nodeSpacing: 34,\n  connectorLineColor: '#0000004D', // 树中link的颜色\n  connectorLineWidth: 1.5,\n  iconsize: 15, // 树中node上侧constraint icon的大小\n  iconPadding: 6,  // 树中node上侧constraint icon的间距\n};\n\nexport const nodeTextStyle = {\n  color: 'white',\n  fontSize: 15,\n  yAxisAdjust: 2,\n};","import { TableStore, TblCell } from \"@/store/table\";\nimport { TypeColor, typeMapColor } from \"./style\";\nimport * as d3 from 'd3';\nimport { lang, langConfig } from \"@/utils/lang\";\n\nexport let tempZoom: d3.ZoomBehavior<SVGSVGElement, unknown> | null = null;\n\n\nexport const drawTblTemplate = (container: SVGSVGElement | null, tableStore: TableStore, percentWidth: number = 0.8) => {\n    if (!container) return;\n    // Clear any existing SVG\n    const svg = d3.select(container);\n    // Clear any existing SVG\n    svg.select('g.right').remove();\n\n    try {\n        const visChildren = tableStore.spec.visTree.children\n        if (visChildren === undefined || visChildren.length === 0 || visChildren[0].width === 0 || visChildren[0].height === 0) return;\n\n        const containerWidth = container.clientWidth * percentWidth;\n        const containerHeight = container.clientHeight;\n\n\n        let cellWidth = Math.max(5, Math.min(90, Math.floor(containerWidth / visChildren[0].width)));\n        let cellHeight = Math.max(5, Math.min(30, Math.floor(containerHeight / visChildren[0].height)));\n        // const cellWidth = 90;\n        // const cellHeight = 30;\n\n        tempZoom = d3.zoom<SVGSVGElement, unknown>()\n            // .scaleExtent([0.5, 3.5])  // set the zoom scale range\n            .on('zoom', function (event) {\n                // svg.attr('transform', event.transform);  // 直接设置svg的transform属性会导致缩放后的坐标系不正确（导致的问题是：用鼠标平移（pan）矩形的时候，矩形会抖动，导致矩形实际平移的距离小于鼠标平移的距离），因此需要在svg内部再添加一个g元素\n                matrix.attr('transform', `translate(${tableStore.tree.offset.right.x + event.transform.x}, ${tableStore.tree.offset.right.y + event.transform.y}) scale(${event.transform.k})`); // Update the matrix transform based on the zoom event\n                updateCellTextVisibility(event.transform.k); // Update cell text visibility based on the current scale\n                // transformStatue = event.transform;\n                tableStore.updateCurve();\n            })\n            .filter(function (event) {\n                // 过滤掉双击事件\n                return !event.ctrlKey && !event.button && event.type !== 'dblclick';\n            });\n        const g = svg.append('g').classed(\"right\", true)\n            .call(tempZoom as any) // .on('dblclick.zoom', null)  // 禁用双击缩放\n\n        const matrix = g.append('g').classed(\"tbl-template\", true);  // Append a 'g' element for better transform management to avoid jittering\n\n        // 监听鼠标进入事件，在鼠标悬浮时启用 zoom 行为\n        matrix.on('mouseover', () => {\n            svg.call(tempZoom as any);\n            // const transform = d3.zoomTransform(matrix.node() as SVGSVGElement);\n            // console.log(transform);\n        });\n\n        // 监听鼠标离开事件，在鼠标离开时禁用 zoom 行为\n        matrix.on('mouseout', () => {\n            svg.on('.zoom', null);  // 移除 zoom 事件监听器\n            // const transform = d3.zoomTransform(matrix.node() as SVGSVGElement);\n            // console.log(transform);\n        });\n\n\n        let texts: any = null;\n\n        const grids = tableStore.computeTblPatternGrid();\n        // console.log(\"grids\", grids);\n\n        const cells = matrix.selectAll('rect')\n            .data(grids)\n            .enter().append('rect').classed('tbl-template-cell', true)\n            .attr('x', d => d.col * cellWidth)\n            .attr('y', d => d.row * cellHeight)\n            // .attr('id', d => `tbl-template-${d.row}-${d.col}`)\n            .attr('width', cellWidth)\n            .attr('height', cellHeight)\n            .attr('fill', (d) => d.bgColor ? typeMapColor[d.bgColor as TypeColor] : typeMapColor.cellFill)\n            .attr('stroke', '#cccccc')\n            .on('mouseover', function (this: SVGRectElement) {\n                d3.select(this).raise() // Bring the cell to the front \n                    // .attr('fill', '#ece9e6')\n                    // .attr('stroke', '#4b8aff')\n                    .attr('stroke-width', 2);\n                if (texts) {\n                    texts.raise();\n                }\n            })\n            .on('mouseout', function () {\n                d3.select(this)\n                    // .attr('fill', '#f9f7ff')\n                    // .attr('stroke', '#cccccc')\n                    .attr('stroke-width', 1);\n                d3.select('.tbl-container .tbl-template-highlight').raise();\n            })\n            .on('click', function (event, d: TblCell) {\n                // tableStore.grid_cell_click({ row: d.row + visChildren[0].y, col: d.col + visChildren[0].x });\n                const row = d.row + visChildren[0].y;\n                const col = d.col + visChildren[0].x;\n                d3.select(`#grid-${row}-${col}`).dispatch('click');\n                tableStore.highlightNodes([[row, col, row, col]]);\n                tableStore.input_tbl.instance.deselectCell();\n                tableStore.output_tbl.instance.deselectCell();\n            })\n            .append('title').text(d => {\n                if (d.text && d.text.length) {\n                    return langConfig[lang].others.targetCol + \"\\n\" + d.text.toString();\n                    /*\n                    if (d.bgColor === typeMapColor.position || d.bgColor === typeMapColor.positionShallow) {\n                        return \"The cell's Target Column is:\\n\" + d.text.toString();\n                    } else {\n                        return \"The cell's Target Column may be:\\n\" + d.text.toString();\n                    }*/\n                } else {\n                    return langConfig[lang].others.noTargetCol;\n                }\n            });\n\n        // Calculate the offset to center the matrix in the SVG container\n        tableStore.tree.offset.right.x = container.clientWidth * (1 - percentWidth) + Math.max((containerWidth - matrix.node()!.getBBox().width) / 2, 0);\n        tableStore.tree.offset.right.y = Math.max((containerHeight - matrix.node()!.getBBox().height) / 2, 0);\n        matrix.attr('transform', `translate(${tableStore.tree.offset.right.x}, ${tableStore.tree.offset.right.y})`); // Center the matrix\n\n\n        const updateCellTextVisibility = (scale: number) => {\n            const scaledCellWidth = cellWidth * scale;\n            const scaledCellHeight = cellHeight * scale;\n            // const cellArea = scaledCellWidth * scaledCellHeight;\n            if (scaledCellWidth >= 90 || scaledCellHeight >= 30) {\n                if (texts) {\n                    texts.style('display', 'block');\n                } else {\n                    texts = matrix.selectAll('text')\n                        .data(grids)\n                        .enter().append('text').classed('tbl-template-text', true)\n                        .attr('x', d => d.col * cellWidth + cellWidth / 2)\n                        .attr('y', d => d.row * cellHeight + cellHeight / 2)\n                        .attr('dy', '.30em')\n                        .attr('font-size', 15 / scale)\n                        .attr('fill', (d) => d.textColor ? typeMapColor[d.textColor as TypeColor] : typeMapColor.cellFill)\n                        .attr('text-anchor', 'middle')\n                        .text(d => d.text ? d.text[0] : '')\n                        .each(function (d) {\n                            const textElement = d3.select(this);\n                            let text = textElement.text();\n                            let textLength = this.getComputedTextLength();\n                            // 如果文本超出最大宽度，进行截断\n                            while (textLength > cellWidth && text.length > 0) {\n                                text = text.slice(0, -1);\n                                textElement.text(text + '…');\n                                textLength = this.getComputedTextLength();\n                            }\n                        })\n                        .style('display', 'block')\n                        .style('pointer-events', 'none'); // Ensure text does not capture mouse events, in order to allow clicking on the cells\n                }\n            } else {\n                if (texts) {\n                    texts.style('display', 'none');\n                }\n            }\n        };\n\n        updateCellTextVisibility(1); // Initial update for default scale 1\n\n        tableStore.tree.tblVisHighlight = matrix.append('g').classed('tbl-template-highlight', true);\n        tableStore.tree.tblVisInfo = {\n            x: visChildren[0].x,\n            y: visChildren[0].y,\n            width: cellWidth,\n            height: cellHeight\n        }\n\n    }\n    catch (e) {\n        console.error(e);\n    }\n}",null,null,"function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 89387;\nmodule.exports = webpackEmptyContext;","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = (n: any) => (_pushScopeId(\"data-v-3eed367a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"icons-container\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { style: {\"width\":\"50px\",\"display\":\"inline-block\"} }, null, -1))\nconst _hoisted_3 = { class: \"icon-scroll\" }\nconst _hoisted_4 = [\"src\", \"alt\", \"title\", \"onClick\"]\n\nimport { computed } from 'vue';\nimport stringIcon from '@/assets/string.png';\nimport numberIcon from '@/assets/number.png';\nimport nullIcon from '@/assets/minus.png';\n\nimport { useTableStore } from \"@/store/table\";\nimport { lang, langConfig } from \"@/utils/lang\";\n// const { colInfos } = defineProps<{ colInfos: ColInfo[] }>();\ntype IconType = keyof typeof icons;\n\n// Compute sorted column info  tableStore[tblType].colInfo\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ColType',\n  props: {\n    tblType: {}\n  },\n  setup(__props: any) {\n\nconst { tblType } = __props;  // | \"transformScript\"\n\nconst tableStore = useTableStore();\n\n// Example data\n// const colInfos = [\n//     { index: 0, string: [0, 1], number: [2], null: [], width: 250 },\n//     { index: 1, string: [], number: [0, 1, 2], null: [1], width: 150 },\n//     { index: 2, string: [0], number: [], null: [1, 2], width: 200 },\n//     { index: 3, string: [0], number: [1], null: [2], width: 300 },\n// ];\n\n// Define icons map\nconst icons = {\n    string: stringIcon,\n    number: numberIcon,\n    none: nullIcon\n};\n\nconst sortedColInfos = computed(() => {\n    return tableStore[tblType].colInfo.map(colInfo => {\n        const iconCounts = [\n            { type: 'string' as IconType, count: colInfo.string.length },\n            { type: 'number' as IconType, count: colInfo.number.length },\n            { type: 'none' as IconType, count: colInfo.none.length }\n        ]\n            .filter(icon => icon.count > 0) // Remove types with zero count\n            .sort((a, b) => b.count - a.count); // Sort by count in descending order\n\n        return {\n            ...colInfo,\n            sortedIcons: iconCounts\n        };\n    });\n});\n\nfunction handleIconClick(col: number, rows: number[]) {\n    const className = 'selection';\n    const cells = rows.map(row => ({ row, col, className }));\n    tableStore.highlightTblCells(tblType, cells, null, true, false);\n    const correspondingTblCells = tableStore.in_out_mapping({ \"0\": cells.map(cell => [cell.row, cell.col]) }, tblType, className);\n\n    if (tblType === \"input_tbl\") {\n        tableStore.highlightMinimapCells(cells);\n        tableStore.highlightTblCells(\"output_tbl\", correspondingTblCells);\n    } else {\n        tableStore.highlightMinimapCells(correspondingTblCells);\n        tableStore.highlightTblCells(\"input_tbl\", correspondingTblCells);\n    }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle({ width: sortedColInfos.value.reduce((sum, colInfo) => sum + colInfo.width, 0) + 'px' })\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sortedColInfos.value, (colInfo) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: colInfo.index,\n            style: _normalizeStyle({ width: colInfo.width + 'px' }),\n            class: \"icon-column\"\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(colInfo.sortedIcons, (icon) => {\n              return (_openBlock(), _createElementBlock(\"img\", {\n                key: icon.type,\n                src: icons[icon.type],\n                alt: `${icon.type} icon`,\n                class: \"icon\",\n                title: `${icon.count} ${_unref(langConfig)[_unref(lang)].others.colType} ${_unref(langConfig)[_unref(lang)].others[icon.type]}`,\n                onClick: ($event: any) => (handleIconClick(colInfo.index, colInfo[icon.type]))\n              }, null, 8, _hoisted_4))\n            }), 128))\n          ], 4))\n        }), 128))\n      ], 4)\n    ])\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"icons-container\">\n        <div style=\"width: 50px; display: inline-block;\"></div>\n        <div class=\"icon-scroll\">\n            <div :style=\"{ width: sortedColInfos.reduce((sum, colInfo) => sum + colInfo.width, 0) + 'px' }\">\n                <div v-for=\"colInfo in sortedColInfos\" :key=\"colInfo.index\" :style=\"{ width: colInfo.width + 'px' }\"\n                    class=\"icon-column\">\n                    <img v-for=\"icon in colInfo.sortedIcons\" :key=\"icon.type\" :src=\"icons[icon.type]\"\n                        :alt=\"`${icon.type} icon`\" class=\"icon\"\n                        :title=\"`${icon.count} ${langConfig[lang].others.colType} ${langConfig[lang].others[icon.type]}`\"\n                        @click=\"handleIconClick(colInfo.index, colInfo[icon.type])\" />\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport stringIcon from '@/assets/string.png';\nimport numberIcon from '@/assets/number.png';\nimport nullIcon from '@/assets/minus.png';\n\nimport { useTableStore } from \"@/store/table\";\nimport { lang, langConfig } from \"@/utils/lang\";\n// const { colInfos } = defineProps<{ colInfos: ColInfo[] }>();\nconst { tblType } = defineProps<{ tblType: \"input_tbl\" | \"output_tbl\" }>();  // | \"transformScript\"\n\nconst tableStore = useTableStore();\n\n// Example data\n// const colInfos = [\n//     { index: 0, string: [0, 1], number: [2], null: [], width: 250 },\n//     { index: 1, string: [], number: [0, 1, 2], null: [1], width: 150 },\n//     { index: 2, string: [0], number: [], null: [1, 2], width: 200 },\n//     { index: 3, string: [0], number: [1], null: [2], width: 300 },\n// ];\n\n// Define icons map\nconst icons = {\n    string: stringIcon,\n    number: numberIcon,\n    none: nullIcon\n};\n\ntype IconType = keyof typeof icons;\n\n// Compute sorted column info  tableStore[tblType].colInfo\nconst sortedColInfos = computed(() => {\n    return tableStore[tblType].colInfo.map(colInfo => {\n        const iconCounts = [\n            { type: 'string' as IconType, count: colInfo.string.length },\n            { type: 'number' as IconType, count: colInfo.number.length },\n            { type: 'none' as IconType, count: colInfo.none.length }\n        ]\n            .filter(icon => icon.count > 0) // Remove types with zero count\n            .sort((a, b) => b.count - a.count); // Sort by count in descending order\n\n        return {\n            ...colInfo,\n            sortedIcons: iconCounts\n        };\n    });\n});\n\nfunction handleIconClick(col: number, rows: number[]) {\n    const className = 'selection';\n    const cells = rows.map(row => ({ row, col, className }));\n    tableStore.highlightTblCells(tblType, cells, null, true, false);\n    const correspondingTblCells = tableStore.in_out_mapping({ \"0\": cells.map(cell => [cell.row, cell.col]) }, tblType, className);\n\n    if (tblType === \"input_tbl\") {\n        tableStore.highlightMinimapCells(cells);\n        tableStore.highlightTblCells(\"output_tbl\", correspondingTblCells);\n    } else {\n        tableStore.highlightMinimapCells(correspondingTblCells);\n        tableStore.highlightTblCells(\"input_tbl\", correspondingTblCells);\n    }\n}\n</script>\n\n<style scoped>\n.icons-container {\n    width: 100%;\n    height: 18px;\n    /* 确保 .parent 不会超出 .grandparent 的宽度 */\n    /* overflow: auto; */\n    /* 启用水平滚动 */\n    /* white-space: nowrap; */\n    /* 防止子元素换行 */\n    /* flex-shrink: 0; */\n    /* 防止 .parent 由于子元素过宽而扩展宽度 */\n}\n\n.icon-column {\n    display: inline-block;\n    text-align: center;\n    /* align-items: center; The display: inline-block property prevents align-items from having an effect. */\n    /* Center icons vertically within the column */\n}\n\n.icon-scroll {\n    display: inline-block;\n    width: calc(100% - 50px);\n    overflow: auto;\n\n    -ms-overflow-style: none;\n    /* IE 10+ */\n    scrollbar-width: none;\n    /* Firefox */\n}\n\n.icon-scroll::-webkit-scrollbar {\n    display: none;\n}\n\n.icon {\n    width: 13px;\n    /* Set appropriate icon size */\n    height: 13px;\n    margin: 0 1px;\n    cursor: pointer;\n    /* Horizontal spacing between icons */\n}\n\n.icon:hover {\n    width: 14px;\n    height: 14px;\n}\n</style>","import script from \"./ColType.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ColType.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ColType.vue?vue&type=style&index=0&id=3eed367a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3eed367a\"]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"9\":\"f0d0ce5c\",\"293\":\"6d8dd432\",\"703\":\"0d1f9c9d\",\"1034\":\"f6b3e245\",\"1157\":\"2beaf0f8\",\"1461\":\"fb0059e9\",\"1477\":\"ffc266e5\",\"1813\":\"6ef079f7\",\"1915\":\"e21bd83b\",\"2149\":\"158a201f\",\"2365\":\"bc8f5817\",\"2412\":\"58f99ca3\",\"2501\":\"55fd872c\",\"2591\":\"ff39a05e\",\"2689\":\"688f7bd6\",\"2709\":\"3469afb1\",\"2799\":\"c63987be\",\"2965\":\"29d2a306\",\"2999\":\"d3f9dba9\",\"3051\":\"77e50c86\",\"3061\":\"482c606b\",\"3071\":\"89465fe3\",\"3445\":\"435e8a35\",\"3473\":\"0bab0d67\",\"3577\":\"6bef9c0d\",\"3691\":\"484ae4ed\",\"3717\":\"768e8e27\",\"3753\":\"b0442b7b\",\"3765\":\"d615a011\",\"3775\":\"d917e1e1\",\"3948\":\"345948b3\",\"4205\":\"5e5ebbf5\",\"4261\":\"169ed9f2\",\"4341\":\"78a4ab37\",\"4373\":\"ac90adaa\",\"4485\":\"bef2dca3\",\"4605\":\"266b8468\",\"4621\":\"870c28e6\",\"4805\":\"cf594d89\",\"4977\":\"838037ee\",\"5077\":\"c02ac641\",\"5081\":\"14f2d800\",\"5083\":\"27c26858\",\"5093\":\"00755c35\",\"5282\":\"c990c8e3\",\"5285\":\"132b11de\",\"5287\":\"283969a6\",\"5303\":\"8f9f9293\",\"5365\":\"dd4e4d8e\",\"5521\":\"2a9a635c\",\"5589\":\"2bda62e9\",\"5609\":\"d5afb7e8\",\"5653\":\"f8f91ca2\",\"5749\":\"e6f60040\",\"5841\":\"bd5e10f3\",\"6059\":\"b1f436f9\",\"6121\":\"dd2816d2\",\"6181\":\"e7ca2241\",\"6229\":\"3ac5fa3b\",\"6309\":\"1ba0b728\",\"6325\":\"abe102ec\",\"6613\":\"370f0a13\",\"6757\":\"689d8cb6\",\"6821\":\"aa9a31f0\",\"6845\":\"e880c126\",\"7045\":\"25718108\",\"7217\":\"f7f0263e\",\"7219\":\"ba6a1f42\",\"7449\":\"3864266f\",\"7461\":\"69958a2b\",\"7525\":\"5eb1403e\",\"7623\":\"05ce3550\",\"7641\":\"d0033e39\",\"8175\":\"cc24a080\",\"8285\":\"b5f431a8\",\"8329\":\"2dbd08aa\",\"8387\":\"a20b1f1d\",\"8533\":\"bb0c91d4\",\"8653\":\"866ac1be\",\"8981\":\"57ed1260\",\"9009\":\"cd2170ef\",\"9437\":\"f09192df\",\"9445\":\"0e4c637b\",\"9626\":\"6f86ed1e\",\"9717\":\"5d0c3836\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"TableCanoniser:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t3524: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkTableCanoniser\"] = self[\"webpackChunkTableCanoniser\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(22419); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","style","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_defineComponent","__name","setup","__props","registerAllModules","tableStore","useTableStore","output_col","ref","output_tbl","cols","tbl","input_tbl","inHotInst","outHotInst","renderTblCell","instance","td","row","col","prop","value","cellProperties","Handsontable","renderers","TextRenderer","apply","this","arguments","innerHTML","updateColInfoFn","tblData","drawMinimap","length","document","querySelector","optimizeMiniTempDistance","initTblInfo","colInfo","spec","matchedInstNum","computeColInfo","resetData","JSON","parse","stringify","currentInitData","updateData","render","fileList","fileTblData","handleUpload","request","reader","FileReader","onload","arrayBuffer","target","result","workbook","XLSX","type","firstSheetName","SheetNames","worksheet","Sheets","rawData","sheet_to_json","header","maxColumns","Math","max","push","undefined","handlePreview","onSuccess","readAsArrayBuffer","file","error","message","name","saveLastCase","handleRemove","transformTblUpdateRootArea","currentCase","caseList","pop","startsWith","includes","editor","mappingSpec","codePref","arrayToCSV","array","cell","join","watch","newVal","loadCaseData","handleDownload","warning","csv","blob","Blob","url","URL","createObjectURL","a","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","success","normalizeSelection","selections","row1","col1","row2","col2","startRow","min","endRow","startCol","endCol","initEventsForTbl","tblInst1","tblInst2","tbl2","updateSettings","outsideClickDeselects","targetEle","targetClassName","className","closest","cursor","clearStatus","some","c","split","highlightMinimapCells","decorations","clear","addHook","currentColumn","newSize","isDoubleClick","changes","source","ci","event","coords","TD","selected","getSelected","selectedCoords","hightedCells","getHightlightedCells","cells","in_out_mapping","highlightTblCells","selectAreaFromNode","tree","instanceIndex","updateVisTreeAreaBox","selectType","visNode","selectNode","data","nx","x","ny","y","nw","width","nh","height","offsetX","offsetY","traverse","children","xDirection","yDirection","extract","extractColor","maxCNum","findMaxCNumber","byPositionToTargetCols","Array","from","_","i","byContext","position","createExtract","eval","byValue","childPattern","match","startCell","size","insertNodeOrPropertyIntoSpecs","highlightCode","getHighlightCodeStartEndLine","cellValue","getDataAtCell","constraint","offsetFrom","valueCstr","getCellDataType","getNodebyPath","rawSpecs","path","selectAreaFromLegend","selectFromLegend","selectionsAreaFromLegend","selectionsPath","generateHighlightCells","specs","newSpec","buildTree","stringifySpec","highlightNodes","newSelections","onMounted","proxy","getCurrentInstance","$refs","inputTbl","hotInstance","outputTbl","iconScrolls","querySelectorAll","tblScrolls","forEach","iconScroll","index","addEventListener","scrollLeft","_ctx","_cache","_component_v_icon","_resolveComponent","_component_a_button","_component_a_upload","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_toDisplayString","_unref","langConfig","lang","table","input","_createVNode","$event","accept","customRequest","onRemove","onPreview","showUploadList","showRemoveIcon","default","_withCtx","scale","upload","onClick","reset","ColType","tblType","HotTable","rowHeaders","colHeaders","manualColumnResize","autoWrapRow","autoWrapCol","contextMenu","renderer","licenseKey","onMousedown","getNeighborEls","title","output","_hoisted_12","expose","__expose","instanceContent","menuList","computed","contextMenuVisible","contextMenuVisibleChange","closeContextMenu","triggerCellCursorFlag","messageInfo","pattern","selectionMode","key","addConstr","addSubPattern","deleteChildByPath","selectConstrIndex","info","documentElement","setProperty","treeContainer","resetZoom","visInst","d3","transition","duration","call","miniZoom","transform","tempZoom","drawTree","treeInstance","TreeChart","typeMap","selectMatchExtractArea","classed","selectionsFromLegend","afterClickMessage","tblContainer","handleFormatter","v","isNaN","parseInt","handleStep","goToInstance","visTree","matchs","handleCodeChange","clickFlag","codeUpdateFromEditor","setTimeout","setFlag","prepareDataAfterCodeChange","transformRes","transformTablebyCode","triggerCodeChange","noMatch","drawTblTemplate","updateCurve","setValue","highlightTblPatternConstr","setAttribute","previousInst","nextInst","_component_a_input_number","_component_a_button_group","_component_a_flex","_component_a_menu","_component_a_dropdown","justify","align","patterns","currentInst","defaultValue","disabled","onPressEnter","precision","formatter","onStep","onBlur","regionTitle","_createTextVNode","region","positionTitle","contextTitle","context","valueTitle","ref_key","trigger","open","onOpenChange","overlay","items","_createStaticVNode","$props","$setup","$data","$options","_component_panel_view","__exports__","props","codeType","editorDefaultOptions","language","theme","fontSize","glyphMargin","automaticLayout","autoIndent","readOnly","minimap","enabled","lineNumbersMinChars","scrollBeyondLastLine","wordWrap","padding","bottom","editorWrapper","regex","areStringEqual","str1","str2","replace","updateCode","newCode","undoHistory","redoHistory","initEditor","dispose","editorOptions","monaco","create","debounceUpdateCode","debounce","checkGrammarError","errorMark","autoRun","getValue","onDidChangeModelContent","handleResize","layout","resizeObserver","ResizeObserver","libUri","existingModel","getModels","find","model","uri","toString","fetch","then","response","text","tsContent","typescript","javascriptDefaults","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","setCompilerOptions","ScriptTarget","ES2015","allowNonTsExtensions","addExtraLib","createModel","observe","createDecorationsCollection","onUnmounted","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","typeMapColor","caseOption","label","codePanel","undoFlag","redoFlag","undo","lastSpec","redo","lastUndo","patternVis","specCode","marker","startLineNumber","startColumn","handleKeydown","deselectCell","handleCaseChange","isDropdownOpen","timeHandler","dropdownListEle","selectEnter","clearTimeout","selectLeave","onDrag","endDrag","_component_a_select","_component_a_checkbox","_component_a_tab_pane","_component_a_tabs","panel","case","options","onChange","onMouseenter","onMouseleave","InOutTable","PatternVis","activeKey","rightExtra","autoRunTitle","checked","run","tab","specTitle","CodeView","matchedInstTitle","matchedInst","defineComponent","components","PanelView","pinia","createPinia","app","createApp","App","use","Select","Tabs","Button","Upload","Tooltip","Popover","Input","Modal","Space","Dropdown","Menu","Form","Row","Col","Radio","Divider","Flex","InputNumber","Checkbox","addIcons","BiUpload","BiDownload","LaRocketSolid","BiArrowClockwise","IoArrowUndoOutline","IoArrowRedoOutline","BiChevronLeft","BiChevronRight","component","OhVueIcon","mount","replaceEvenSpaces","str","halfLength","repeat","removeWhitespace","csvToMatrix","csvText","rows","trim","matrix","removeSpaceType","even","all","defineStore","state","shallowRef","visTreeMatchPath","constrNodeRectClickId","dragConfigOpen","areaConfig","constraints","fill","areaFormData","offsetLayer","codeSuff","rootArea","object","in2out","in2nodes","out2in","clickNode","clickConstrIndex","offset","left","right","tblVisHighlight","tblVisInfo","minimapInstHighlight","minimapVisInfo","menuAllList","store","menu","addPattern","color","resetCol","resetColTitle","deletePattern","deletePatternTitle","deleteConstr","deleteConstrTitle","actions","caseN","prompt","case_path","data_res","spec_res","Promise","dataText","specText","ok","msg","traverseTree4UpdateMatchs","nodes","instIndex","node","templateRef","firstLayerFlag","isDefinedFromSpec","hasOwnProperty","cellInfoSelections","constrsInfo","allConstr","completeCellConstraint","cellInfo","getCellBySelect","matchedInsts","filter","currentMatchs","isDefinedFromSpecInst","cm","newMatch","areaBox","child","round","maxInst","highlightViewsAfterClickNode","selectAll","highlightMinimapInsts","highlight","attr","select","selection","visInfo","remove","raise","d","enter","append","on","numberToOrdinal","maxDistance","miniG","miniWidth","getBBox","distanceGap","console","currentInstRect","instRightX","instTopY","instBottomY","tempRect","tempLeftX","tempTopY","tempBottomY","tempG","instTransform","getCTM","tempTransform","applyTransform","f","rectTopRight","rectBottomRight","rectRightTopLeft","rectRightBottomLeft","lineGenerator","curve","pathData1","pathData2","traverseTree4UpdateIn2Nodes","parentPath","idCounter","currentPath","areaKey","add","Set","tidyData","executionMessages","transformTable","strSpec","serialize","removeQuotesFromKeysRegex","currentNode","startLine","endLine","classNames","range","ri","rowFlag","colFlag","topLeft","rowSize","colSize","startPoint","visibleRows","countVisibleRows","visibleCols","countVisibleCols","scrollViewportTo","floor","verticalSnap","horizontalSnap","nodeConstrId","visData","highlightTblTemplate","matchArea","allHightedInCells","allHightedOutCells","concat","values","coordsOut","constrIndex","ele","slice","posi_mapping","posi","pi","recordPis","endsWith","pi_n","doRectanglesIntersect","rect1","rect2","isRectanglesContained","parent","pStartRow","pStartCol","pEndRow","pEndCol","cStartRow","cStartCol","cEndRow","cEndCol","arr","maxNumber","number","types","paths","rootNodes","insertNode","existingChild","newNode","added","rootNode","addedSpec","traverseTree4buildSpecs","pSelection","px","py","pw","ph","targetNode","copyAttributes","highlightNodesId","keyArea","n","Number","areas","area","log","grid_cell_click","outTblCells","points","current","codeFormat","ts","compilerOptions","CommonJS","evalFunction","Function","outputText","TableCanoniserKeyWords","isArray","failedParse","num","suffix","markers","getModelMarkers","messageContent","for","template","matched","oneMatch","emptyTable","derivePosiMapping","CustomError","failedTransform","outTbl","numRows","j","inPosi","outPosi","generateGrid","grid","computeTblPatternGrid","firstNode","grids","box","shift","bgColor","textColor","outY","outX","inputFlag","splice","lastIndex","parentNode","replaceSpace","replaceCode","fnList","replacer","fn","replaceTableCanoniserKeyWordsRegex","selectArea","formData","currentSpec","nodeOrProperty","property","invalidPath","assign","attributes","copyTreeAttributes","tree1","tree2","sonData","sonParentData","rootData","rootStr","sonStr","startIndex","indexOf","strBefore","startParentLine","startConstLine","endConstLine","decorationsCollection","newDecorations","isWholeLine","set","revealRangeAtTop","hot","colCount","getColWidth","string","none","String","None","NotNone","func","wait","timeout","args","getters","lastEl","flex","nextEl","startX","startY","flexSum","dragging","draggingType","dividerEl","siblingElements","parentElement","currentIndex","getBoundingClientRect","parseFloat","clientX","clientY","move","newLastW_H","newNextW_H","newLastRate","newNextRate","newLastFlex","newNextFlex","escapeEvent","KeyboardEvent","keyCode","charCode","which","bubbles","cancelable","customRectCorner","rectInfo","startx","starty","rectWidth","rectHeight","rounded","radius","declareContextMenu","preventDefault","constructor","_margins","_container","_data","_store","_zoomLevel","_orient","_defineProperty","svgWidth","svgHeight","margins","container","zoomLevel","orient","depth","calculated","treeLayout","realChart","previousTransform","centerX","root","allNodes","defaultFont","setZoomFactor","bind","batchEnterExitUpdate","currentWidth","centerG","targetZoomLevel","nodeMaxWidth","centerY","nodeMaxHeight","prototype","patternify","selectedTag","tag","selector","tmpData","targetData","batchSelection","exit","mergedSelection","merge","drawingContainer","replaceChildren","drawingContainerBoundry","typeNodeStyle","nodeWidth","nodeHeight","random","chartVerticalMargin","chartHorizontalMargin","chartWidth","chartHeight","nodeSize","nodeSpacing","nodeId","parentId","parentNodeId","each","x0","y0","zoomfunc","chart","svg","update","treeData","linksData","descendants","nodesData","originalX","nodeCircleRadius","linksSelection","linkGen","linksEnter","insert","linkUpdate","connectorLineWidth","connectorLineColor","realChartWidth","xshiftStart","yshiftStart","xshiftEnd","yshiftEnd","nodesSelection","nodeEnter","nodeGroups","nodeUpdate","nodeRectData","tooltipText","instances","_constraint","iconsz","iconsize","constrId","constrNodeRect","subTemplate","iconPadding","iconPath","require","_e","dispatchEvent","function","notNone","equal","nodeTextStyle","yAxisAdjust","specWidth","specHeight","stopPropagation","window","location","percentWidth","containerWidth","clientWidth","containerHeight","clientHeight","cellWidth","cellHeight","k","g","positionShallow","contextShallow","valueShallow","null","nullShallow","selectionShallow","positionRGBA","contextRGBA","valueRGBA","nullRGBA","selectionRGBA","ambiguousText","cellFill","cellStroke","nodeRectFillColor","nodeCircleFillColor","nodeBorderRadius","verticalLineLength","verticalLineWidth","visChildren","updateCellTextVisibility","ctrlKey","button","texts","dispatch","others","targetCol","noTargetCol","scaledCellWidth","scaledCellHeight","textElement","textLength","getComputedTextLength","Forward","Auto","pairSort","sortWithCorrespondingArray","A","B","sortOrder","indexedA","sort","b","sortedB","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_REFERENCE_AREA_LAYER","DEFAULT_REFERENCE_AREA_POSI","DEFAULT_X_OFFSET","DEFAULT_Y_OFFSET","DEFAULT_X_DIRECTION","DEFAULT_Y_DIRECTION","DEFAULT_CONTEXT_POSITION","DEFAULT_TARGET_COL","ctxCells","DEFAULT_VALUE_CSTR","DEFAULT_IGNORE_OUT_OF_BOUNDS","DEFAULT_FILL","completeRegionPosition","completedSelection","ignoreOutOfBounds","completeContextTransform","toTargetCol","completeSpecification","_a","_c","_b","_d","_g","_f","_j","_h","_l","_k","_m","setPrototypeOf","grammar_1","obj","seen","WeakSet","has","template2Cols","temp","evaluateConstraint","calculateOffset","currentArea","constrFlag","layer","areaLayer","li","cellPosi","errorMessage","areaTbl","calculateSize","getSubArea","subArea","fillColumns","maxLength","column","fillValue","traverseArea","endX","endY","currentStartX","currentEndX","currentStartY","currentEndY","tmpArea","areaHeight","areaWidth","xIndex","yIndex","cstr","transformArea","cellArray","flat","transformedCols","ctxCols","ctxCellsInfo","ctxSelections","ctxPosiFn","customSelections","customSelectionsWithDefaults","cellCtxs","cellCtxsInfo","customMapColbyCxt","templateRefStr","validCols","parentRefStr","processTemplate","templateIndex","matchTemplateArea","areaChild","templateChild","ti","templateCols","extractKeys","specWithDefaults","webpackEmptyContext","_withScopeId","_pushScopeId","_popScopeId","icons","stringIcon","numberIcon","nullIcon","sortedColInfos","iconCounts","count","icon","sortedIcons","handleIconClick","correspondingTblCells","_normalizeStyle","reduce","sum","_renderList","src","alt","colType","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","m","amdO","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","every","r","getter","__esModule","definition","defineProperty","enumerable","get","chunkId","promises","u","miniCssF","globalThis","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","nc","onScriptComplete","prev","onerror","doneFns","head","Symbol","toStringTag","nmd","p","installedChunks","installedChunkData","promise","reject","loadingEnded","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}